/*! For license information please see application-5bcb5eca090e783bffee.js.LICENSE.txt */
!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="https://cdn.sittercity.com/f42930913d42ea3de6209b2f3dc73204fc5eb5fc/packs/",r(r.s=69)}([,,function(t,e,r){t.exports=r.p+"media/images/Disclosure-fa52b62a705f975a5e97e4f3b820e5c7.svg"},function(t,e,r){t.exports=r.p+"media/images/Ellipse-active-eabcb4ddf5b1e3e6d14152866d0519bd.svg"},function(t,e,r){t.exports=r.p+"media/images/Ellipse-innactive-e3e354271e7831c122c0549fb318618e.svg"},function(t,e,r){t.exports=r.p+"media/images/Featured-desktop-76bda6bc4d624466cfbcf96097571261.webp"},function(t,e,r){t.exports=r.p+"media/images/Featured-mobile-849e86f19d75ca0cb6793e6060cd5e2c.webp"},function(t,e,r){t.exports=r.p+"media/images/bg_check-ef415dde6e50d30818ea18ee4f184fff.svg"},function(t,e,r){t.exports=r.p+"media/images/bh-logo-8ec83308605befd9a5bb9b335b072c19.svg"},function(t,e,r){t.exports=r.p+"media/images/bh-sun-b54eaa72739165c3b4b6f845d1c396d3.svg"},function(t,e,r){t.exports=r.p+"media/images/blueShield-3a51df9b1b178fb87f8437afa094cb99.svg"},function(t,e,r){t.exports=r.p+"media/images/caret-d8b73ca20e7e26584a9be2c0461d7c55.svg"},function(t,e,r){t.exports=r.p+"media/images/cta-arrow-5f4e5b025b245e3b4c470f4e1fb1a2e2.svg"},function(t,e,r){t.exports=r.p+"media/images/featured-2-desktop-38c5d1d85e432e669d5eb75350c1e3c2.webp"},function(t,e,r){t.exports=r.p+"media/images/featured-2-mobile-6d39d4a7a93f637e801808feb0ad0c89.webp"},function(t,e,r){t.exports=r.p+"media/images/featured-graphic-94b8e941c2715db4898ecf940ccc78e0.svg"},function(t,e,r){t.exports=r.p+"media/images/forbes-99299484fb0e5db6f8a55084eb8bdf8d.svg"},function(t,e,r){t.exports=r.p+"media/images/gma-4d7f6ed9b9dfc40100cd174b9138976d.svg"},function(t,e,r){t.exports=r.p+"media/images/grey_logos/forbes-98f7a3ae18495c200cae89acd8f10cf7.svg"},function(t,e,r){t.exports=r.p+"media/images/grey_logos/gma-1fb477fd6348e8fb6b28c82d11d4cbc5.svg"},function(t,e,r){t.exports=r.p+"media/images/grey_logos/ny-times-428bcd9c33e678d20b9b312f7450fb21.svg"},function(t,e,r){t.exports=r.p+"media/images/grey_logos/scary-mommy-046f03be504a3187bab2110003fc40c0.svg"},function(t,e,r){t.exports=r.p+"media/images/grey_logos/today-61bb76bb7f8911e50b654448675629db.svg"},function(t,e,r){t.exports=r.p+"media/images/grey_logos/w-post-3ee717596f98b0d4bd5f65a78d9fb833.svg"},function(t,e,r){t.exports=r.p+"media/images/grey_logos/working-mother-30a59f4d3936ea89839c177be6244ff1.svg"},function(t,e,r){t.exports=r.p+"media/images/icon_schedule-occasional-12e1db676c1429cc614b5f7a455ac267.svg"},function(t,e,r){t.exports=r.p+"media/images/icon_schedule-one-time-e0bc3d66ecfe96fe5be97c46d149a789.svg"},function(t,e,r){t.exports=r.p+"media/images/icon_schedule-regular-e382008a1a6c0eff4dd2eb20824ab082.svg"},function(t,e,r){t.exports=r.p+"media/images/id_verif-7fa55f0ccd898ab23e5ba817395930b5.svg"},function(t,e,r){t.exports=r.p+"media/images/jlp-features-job-search-a5d2d2f576c8030e676db4e80b2aae41.svg"},function(t,e,r){t.exports=r.p+"media/images/jlp-features-sitter-applies-5fb0e8fcfb53029d578ac739efe321b8.svg"},function(t,e,r){t.exports=r.p+"media/images/jlp-features-sitter-profile-54d8247fcc2010c38c333574f703ed1f.svg"},function(t,e,r){t.exports=r.p+"media/images/jlp-jobs-map-lg-680363f06b7b01d22369271e729a8cda.png"},function(t,e,r){t.exports=r.p+"media/images/jlp-jobs-map-sm-f1a7ce3e2a5007f5002a8b009da601c0.png"},function(t,e,r){t.exports=r.p+"media/images/jlp-native-app-promo-d0ed8e51e8403408209df7dc6345b237.png"},function(t,e,r){t.exports=r.p+"media/images/jlp-trust-safety-chelsea-a0123444ce86df6212f509e9e3ee8026.png"},function(t,e,r){t.exports=r.p+"media/images/jlp-trust-safety-shield-f21306953d29a8582a78c7863a20cdef.svg"},function(t,e,r){t.exports=r.p+"media/images/messaging-e86e58b0d1fab165d981fdd5688d6a51.svg"},function(t,e,r){t.exports=r.p+"media/images/next-e0c8f205ff850c536705745ed425652e.svg"},function(t,e,r){t.exports=r.p+"media/images/next-transparent-be79b86f5aaa2d338a9a486dfd0e1c04.svg"},function(t,e,r){t.exports=r.p+"media/images/ny-times-60b4e006dbf688ccd8fc068bf3a91e37.svg"},function(t,e,r){t.exports=r.p+"media/images/orange-new-banner-e6a61e0d5fccdebf3fd794224832d6b2.svg"},function(t,e,r){t.exports=r.p+"media/images/pink-left-quote-ae4475ed36fbcc150493deb78135c975.svg"},function(t,e,r){t.exports=r.p+"media/images/prev-8bd8823b026e69bab97eaf729fffd10a.svg"},function(t,e,r){t.exports=r.p+"media/images/prev-transparent-b9f9a889ef9c070cf53da455fcc39cc7.svg"},function(t,e,r){t.exports=r.p+"media/images/red-left-quote-1d8483c1b0aa637b7cdd292f1b6e3008.svg"},function(t,e,r){t.exports=r.p+"media/images/scary-mommy-5e040954b2eafdabb5f6935aba6e2af6.svg"},function(t,e,r){t.exports=r.p+"media/images/shieldCheckmark-29ae626a2d60a353cd5e1d0af5ab13c6.svg"},function(t,e,r){t.exports=r.p+"media/images/sparkle-fb9711cc2ce75cc099424a68af0af715.svg"},function(t,e,r){t.exports=r.p+"media/images/today-86c86044896ebb64a6c91ccd07c777cc.svg"},function(t,e,r){t.exports=r.p+"media/images/tools-8b9a34e95fea59bf11234343bd27c34e.svg"},function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);t.exports=function(){return r(n),n}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,o=r;return[o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]]].join("")}},function(t,e,r){"use strict";t.exports=r(58)},,function(t,e,r){var n={"./Disclosure":2,"./Disclosure.svg":2,"./Ellipse-active":3,"./Ellipse-active.svg":3,"./Ellipse-innactive":4,"./Ellipse-innactive.svg":4,"./Featured-desktop":5,"./Featured-desktop.webp":5,"./Featured-mobile":6,"./Featured-mobile.webp":6,"./bg_check":7,"./bg_check.svg":7,"./bh-logo":8,"./bh-logo.svg":8,"./bh-sun":9,"./bh-sun.svg":9,"./blueShield":10,"./blueShield.svg":10,"./caret":11,"./caret.svg":11,"./cta-arrow":12,"./cta-arrow.svg":12,"./featured-2-desktop":13,"./featured-2-desktop.webp":13,"./featured-2-mobile":14,"./featured-2-mobile.webp":14,"./featured-graphic":15,"./featured-graphic.svg":15,"./forbes":16,"./forbes.svg":16,"./gma":17,"./gma.svg":17,"./grey_logos/forbes":18,"./grey_logos/forbes.svg":18,"./grey_logos/gma":19,"./grey_logos/gma.svg":19,"./grey_logos/ny-times":20,"./grey_logos/ny-times.svg":20,"./grey_logos/scary-mommy":21,"./grey_logos/scary-mommy.svg":21,"./grey_logos/today":22,"./grey_logos/today.svg":22,"./grey_logos/w-post":23,"./grey_logos/w-post.svg":23,"./grey_logos/working-mother":24,"./grey_logos/working-mother.svg":24,"./icon_schedule-occasional":25,"./icon_schedule-occasional.svg":25,"./icon_schedule-one-time":26,"./icon_schedule-one-time.svg":26,"./icon_schedule-regular":27,"./icon_schedule-regular.svg":27,"./id_verif":28,"./id_verif.svg":28,"./jlp-features-job-search":29,"./jlp-features-job-search.svg":29,"./jlp-features-sitter-applies":30,"./jlp-features-sitter-applies.svg":30,"./jlp-features-sitter-profile":31,"./jlp-features-sitter-profile.svg":31,"./jlp-jobs-map-lg":32,"./jlp-jobs-map-lg.png":32,"./jlp-jobs-map-sm":33,"./jlp-jobs-map-sm.png":33,"./jlp-native-app-promo":34,"./jlp-native-app-promo.png":34,"./jlp-trust-safety-chelsea":35,"./jlp-trust-safety-chelsea.png":35,"./jlp-trust-safety-shield":36,"./jlp-trust-safety-shield.svg":36,"./messaging":37,"./messaging.svg":37,"./next":38,"./next-transparent":39,"./next-transparent.svg":39,"./next.svg":38,"./ny-times":40,"./ny-times.svg":40,"./orange-new-banner":41,"./orange-new-banner.svg":41,"./pink-left-quote":42,"./pink-left-quote.svg":42,"./prev":43,"./prev-transparent":44,"./prev-transparent.svg":44,"./prev.svg":43,"./red-left-quote":45,"./red-left-quote.svg":45,"./scary-mommy":46,"./scary-mommy.svg":46,"./shieldCheckmark":47,"./shieldCheckmark.svg":47,"./sparkle":48,"./sparkle.svg":48,"./today":49,"./today.svg":49,"./tools":50,"./tools.svg":50};function o(t){var e=i(t);return r(e)}function i(t){if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}o.keys=function(){return Object.keys(n)},o.resolve=i,t.exports=o,o.id=55},function(t,e,r){},function(t,e,r){function n(){"use strict";n=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:L(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var p="suspendedStart",d="suspendedYield",y="executing",v="completed",m={};function g(){}function b(){}function w(){}var _={};l(_,c,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(C([])));E&&E!==r&&o.call(E,c)&&(_=E);var k=w.prototype=g.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(n,i,a,c){var u=h(t[n],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==typeof l&&o.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var n;i(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,n){r(t,o,e,n)}))}return n=n?n.then(i,i):i()}})}function L(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=A(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=h(e,r,n);if("normal"===s.type){if(o=n.done?v:d,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(o.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return b.prototype=w,i(k,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=l(w,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l(t,s,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},S(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(k),l(k,s,"Generator"),l(k,c,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function o(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=r(71).GrowthBook,u=r(59).v4,s=r(70).decodeJwt,l=r(62);function f(t,e){var r=document.querySelector("meta[name=".concat(t,"]"));return r?e?r.getAttribute(e):r.getAttribute("content"):null}function h(t){var e=f("cookie_domain");return e?l.get(t,{domain:e}):l.get(t)}function p(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=f("cookie_domain"),o=r;n&&(o=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({domain:n},r)),Object.keys(o).length?l.set(t,e,o):l.set(t,e)}function d(){return h("jwt")}function y(){var t=d();if(!t)throw new Error("No login token");return s(t)}function v(){var t;try{t=y().sub}catch(e){return null}return t||null}var m=null,g=function(){var t="gbuuid",e=h(t);if(e)return e;var r=u();return p(t,r,{expires:400}),r};function b(){var t;return t=n().mark((function t(){var e,r,o,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!m){t.next=2;break}return t.abrupt("return",m);case 2:if(e=f("growthbook-client-key"),r="true"===f("growthbook-dev-mode").toLowerCase(),e){t.next=7;break}return console.error("GrowthBook client key missing"),t.abrupt("return",null);case 7:return o=v(),i=g(),t.prev=9,m=new c({clientKey:e,enableDevMode:r,attributes:{userId:o,gbuuid:i,country:"US"},trackingCallback:function(t,e){analytics.track("Experiment Viewed",{experimentId:t.key,variationId:e.key,gbuuid:i})}}),t.next=13,m.init({streaming:!0});case 13:return t.abrupt("return",m);case 16:return t.prev=16,t.t0=t.catch(9),console.error("Error initializing GrowthBook:",t.t0),t.abrupt("return",null);case 20:case"end":return t.stop()}}),t,null,[[9,16]])})),b=function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function c(t){o(a,n,i,c,u,"next",t)}function u(t){o(a,n,i,c,u,"throw",t)}c(void 0)}))},b.apply(this,arguments)}t.exports={readMeta:f,readDomainCookie:h,writeDomainCookie:p,currentJwt:d,jwtData:y,getUserId:v,getGrowthbook:function(){return m},resetGrowthbook:function(){m=null},initGrowthbook:function(){return b.apply(this,arguments)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=/^[a-zA-Z:_][a-zA-Z0-9:_.-]*$/,o={revert:function(){}},i=new Map,a=new Set;function c(t){var e=i.get(t);return e||i.set(t,e={element:t,attributes:{}}),e}function u(t,e,r,n,o){var i=r(t),a={isDirty:!1,originalValue:i,virtualValue:i,mutations:[],el:t,_positionTimeout:null,observer:new MutationObserver((function(){if("position"!==e||!a._positionTimeout){"position"===e&&(a._positionTimeout=setTimeout((function(){a._positionTimeout=null}),1e3));var n=r(t);"position"===e&&n.parentNode===a.virtualValue.parentNode&&n.insertBeforeNode===a.virtualValue.insertBeforeNode||n!==a.virtualValue&&(a.originalValue=n,o(a))}})),mutationRunner:o,setValue:n,getCurrentValue:r};return"position"===e&&t.parentNode?a.observer.observe(t.parentNode,{childList:!0,subtree:!0,attributes:!1,characterData:!1}):a.observer.observe(t,function(t){return"html"===t?{childList:!0,subtree:!0,attributes:!0,characterData:!0}:{childList:!1,subtree:!1,attributes:!0,attributeFilter:[t]}}(e)),a}function s(t,e){var r=e.getCurrentValue(e.el);e.virtualValue=t,t&&"string"!=typeof t?r&&t.parentNode===r.parentNode&&t.insertBeforeNode===r.insertBeforeNode||(e.isDirty=!0,A()):t!==r&&(e.isDirty=!0,A())}function l(t){var e=t.originalValue;t.mutations.forEach((function(t){return e=t.mutate(e)})),s(function(t){return w||(w=document.createElement("div")),w.innerHTML=t,w.innerHTML}(e),t)}function f(t){var e=new Set(t.originalValue.split(/\s+/).filter(Boolean));t.mutations.forEach((function(t){return t.mutate(e)})),s(Array.from(e).filter(Boolean).join(" "),t)}function h(t){var e=t.originalValue;t.mutations.forEach((function(t){return e=t.mutate(e)})),s(e,t)}function p(t){var e=t.originalValue;t.mutations.forEach((function(t){var r=function(t){var e=t.insertBeforeSelector,r=document.querySelector(t.parentSelector);if(!r)return null;var n=e?document.querySelector(e):null;return e&&!n?null:{parentNode:r,insertBeforeNode:n}}(t.mutate());e=r||e})),s(e,t)}var d=function(t){return t.innerHTML},y=function(t,e){return t.innerHTML=e};function v(t){var e=c(t);return e.html||(e.html=u(t,"html",d,y,l)),e.html}var m=function(t){return{parentNode:t.parentElement,insertBeforeNode:t.nextElementSibling}},g=function(t,e){e.insertBeforeNode&&!e.parentNode.contains(e.insertBeforeNode)||e.parentNode.insertBefore(t,e.insertBeforeNode)};function b(t){var e=c(t);return e.position||(e.position=u(t,"position",m,g,p)),e.position}var w,_,x=function(t,e){return e?t.className=e:t.removeAttribute("class")},E=function(t){return t.className};function k(t){var e=c(t);return e.classes||(e.classes=u(t,"class",E,x,f)),e.classes}function S(t,e){var r,n=c(t);return n.attributes[e]||(n.attributes[e]=u(t,e,(r=e,function(t){var e;return null!=(e=t.getAttribute(r))?e:null}),function(t){return function(e,r){return null!==r?e.setAttribute(t,r):e.removeAttribute(t)}}(e),h)),n.attributes[e]}function O(t,e,r){if(r.isDirty){r.isDirty=!1;var n=r.virtualValue;r.mutations.length||function(t,e){var r,n,o=i.get(t);if(o)if("html"===e)null==(r=o.html)||null==(n=r.observer)||n.disconnect(),delete o.html;else if("class"===e){var a,c;null==(a=o.classes)||null==(c=a.observer)||c.disconnect(),delete o.classes}else if("position"===e){var u,s;null==(u=o.position)||null==(s=u.observer)||s.disconnect(),delete o.position}else{var l,f,h;null==(l=o.attributes)||null==(f=l[e])||null==(h=f.observer)||h.disconnect(),delete o.attributes[e]}}(t,e),r.setValue(t,n)}}function L(t,e){t.html&&O(e,"html",t.html),t.classes&&O(e,"class",t.classes),t.position&&O(e,"position",t.position),Object.keys(t.attributes).forEach((function(r){O(e,r,t.attributes[r])}))}function A(){i.forEach(L)}function j(t){if("position"!==t.kind||1!==t.elements.size){var e=new Set(t.elements);document.querySelectorAll(t.selector).forEach((function(r){e.has(r)||(t.elements.add(r),function(t,e){var r=null;"html"===t.kind?r=v(e):"class"===t.kind?r=k(e):"attribute"===t.kind?r=S(e,t.attribute):"position"===t.kind&&(r=b(e)),r&&(r.mutations.push(t),r.mutationRunner(r))}(t,r))}))}}function P(){a.forEach(j)}function T(){"undefined"!=typeof document&&(_||(_=new MutationObserver((function(){P()}))),P(),_.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!1,characterData:!1}))}function C(t){return"undefined"==typeof document?o:(a.add(t),j(t),{revert:function(){var e;(e=t).elements.forEach((function(t){return function(t,e){var r=null;if("html"===t.kind?r=v(e):"class"===t.kind?r=k(e):"attribute"===t.kind?r=S(e,t.attribute):"position"===t.kind&&(r=b(e)),r){var n=r.mutations.indexOf(t);-1!==n&&r.mutations.splice(n,1),r.mutationRunner(r)}}(e,t)})),e.elements.clear(),a.delete(e)}})}function N(t,e){return C({kind:"html",elements:new Set,mutate:e,selector:t})}function I(t,e){return C({kind:"position",elements:new Set,mutate:e,selector:t})}function R(t,e){return C({kind:"class",elements:new Set,mutate:e,selector:t})}function F(t,e,r){return n.test(e)?"class"===e||"className"===e?R(t,(function(t){var e=r(Array.from(t).join(" "));t.clear(),e&&e.split(/\s+/g).filter(Boolean).forEach((function(e){return t.add(e)}))})):C({kind:"attribute",attribute:e,elements:new Set,mutate:r,selector:t}):o}T();var G={html:N,classes:R,attribute:F,position:I,declarative:function(t){var e=t.selector,r=t.action,n=t.value,i=t.attribute,a=t.parentSelector,c=t.insertBeforeSelector;if("html"===i){if("append"===r)return N(e,(function(t){return t+(null!=n?n:"")}));if("set"===r)return N(e,(function(){return null!=n?n:""}))}else if("class"===i){if("append"===r)return R(e,(function(t){n&&t.add(n)}));if("remove"===r)return R(e,(function(t){n&&t.delete(n)}));if("set"===r)return R(e,(function(t){t.clear(),n&&t.add(n)}))}else if("position"===i){if("set"===r&&a)return I(e,(function(){return{insertBeforeSelector:c,parentSelector:a}}))}else{if("append"===r)return F(e,i,(function(t){return null!==t?t+(null!=n?n:""):null!=n?n:""}));if("set"===r)return F(e,i,(function(){return null!=n?n:""}));if("remove"===r)return F(e,i,(function(){return null}))}return o}};e.connectGlobalObserver=T,e.default=G,e.disconnectGlobalObserver=function(){_&&_.disconnect()},e.validAttributeName=n},function(t,e,r){var n=r(60),o=r(61),i=o;i.v1=n,i.v4=o,t.exports=i},function(t,e,r){var n,o,i=r(51),a=r(52),c=0,u=0;t.exports=function(t,e,r){var s=e&&r||0,l=e||[],f=(t=t||{}).node||n,h=void 0!==t.clockseq?t.clockseq:o;if(null==f||null==h){var p=i();null==f&&(f=n=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=o=16383&(p[6]<<8|p[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),y=void 0!==t.nsecs?t.nsecs:u+1,v=d-c+(y-u)/1e4;if(v<0&&void 0===t.clockseq&&(h=h+1&16383),(v<0||d>c)&&void 0===t.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=d,u=y,o=h;var m=(1e4*(268435455&(d+=122192928e5))+y)%4294967296;l[s++]=m>>>24&255,l[s++]=m>>>16&255,l[s++]=m>>>8&255,l[s++]=255&m;var g=d/4294967296*1e4&268435455;l[s++]=g>>>8&255,l[s++]=255&g,l[s++]=g>>>24&15|16,l[s++]=g>>>16&255,l[s++]=h>>>8|128,l[s++]=255&h;for(var b=0;b<6;++b)l[s+b]=f[b];return e||a(l)}},function(t,e,r){var n=r(51),o=r(52);t.exports=function(t,e,r){var i=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var c=0;c<16;++c)e[i+c]=a[c];return e||o(a)}},function(t,e,r){var n,o,i;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}i=function(){"use strict";function t(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}var e=function e(r,n){function o(e,o,i){if("undefined"!==typeof document){"number"===typeof(i=t({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var c in i)i[c]&&(a+="; "+c,!0!==i[c]&&(a+="="+i[c].split(";")[0]));return document.cookie=e+"="+r.write(o,e)+a}}return Object.create({set:o,get:function(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var e=document.cookie?document.cookie.split("; "):[],n={},o=0;o<e.length;o++){var i=e[o].split("="),a=i.slice(1).join("=");try{var c=decodeURIComponent(i[0]);if(n[c]=r.read(a,c),t===c)break}catch(u){}}return t?n[t]:n}},remove:function(e,r){o(e,"",t({},r,{expires:-1}))},withAttributes:function(r){return e(this.converter,t({},this.attributes,r))},withConverter:function(r){return e(t({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(r)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});return e},"object"===a(e)&&"undefined"!==typeof t?t.exports=i():void 0===(o="function"===typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},,,,,,,function(t,e,r){"use strict";r.r(e);r(56);function n(t){var e=t.target.dataset.cta;window.analytics?window.analytics.track("Featured Content Clicked",{source:e}):console.log("Would have tracked segment event with source",e)}var o={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},i=console,a={};Object.keys(o).forEach((function(t){a[t]=i[t]}));var c="Datadog Browser SDK:",u={debug:a.debug.bind(i,c),log:a.log.bind(i,c),info:a.info.bind(i,c),warn:a.warn.bind(i,c),error:a.error.bind(i,c)};function s(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{return t.apply(void 0,r)}catch(o){u.error(e,o)}}}var l,f=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},h=!1;function p(t){h=t}function d(t){return function(){return y(t,this,arguments)}}function y(t,e,r){try{return t.apply(e,r)}catch(n){if(v(n),l)try{l(n)}catch(n){v(n)}}}function v(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];h&&u.error.apply(u,f(["[MONITOR]"],t,!1))}function m(t,e){return-1!==t.indexOf(e)}function g(t){if(Array.from)return Array.from(t);var e=[];if(t instanceof Set)t.forEach((function(t){return e.push(t)}));else for(var r=0;r<t.length;r++)e.push(t[r]);return e}function b(t,e){for(var r=0;r<t.length;r+=1){var n=t[r];if(e(n,r))return n}}function w(t){return Object.keys(t).map((function(e){return t[e]}))}function _(t){return Object.keys(t).map((function(e){return[e,t[e]]}))}function x(t,e){return t.slice(0,e.length)===e}function E(t){return window.CSS&&window.CSS.escape?window.CSS.escape(t):t.replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,(function(t,e){return e?"\0"===t?"\ufffd":"".concat(t.slice(0,-1),"\\").concat(t.charCodeAt(t.length-1).toString(16)," "):"\\".concat(t)}))}function k(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.forEach((function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})),t}function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function O(){if("object"===("undefined"===typeof globalThis?"undefined":S(globalThis)))return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var t=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!==S(t)&&(t="object"===("undefined"===typeof self?"undefined":S(self))?self:"object"===("undefined"===typeof window?"undefined":S(window))?window:{}),t}var L=/[^\u0000-\u007F]/;function A(t){return L.test(t)?void 0!==window.TextEncoder?(new TextEncoder).encode(t).length:new Blob([t]).size:t.length}function j(t,e){var r,n=O();return n.Zone&&"function"===typeof n.Zone.__symbol__&&(r=t[n.Zone.__symbol__(e)]),r||(r=t[e]),r}function P(t,e){return j(O(),"setTimeout")(d(t),e)}function T(t){j(O(),"clearTimeout")(t)}function C(t,e){return j(O(),"setInterval")(d(t),e)}function N(t){j(O(),"clearInterval")(t)}function I(t,e,r){var n,o,i=!r||void 0===r.leading||r.leading,a=!r||void 0===r.trailing||r.trailing,c=!1;return{throttled:function(){for(var r=[],u=0;u<arguments.length;u++)r[u]=arguments[u];c?n=r:(i?t.apply(void 0,r):n=r,c=!0,o=P((function(){a&&n&&t.apply(void 0,n),c=!1,n=void 0}),e))},cancel:function(){T(o),c=!1,n=void 0}}}function R(){}function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function G(t){return null===t?"null":Array.isArray(t)?"array":F(t)}function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function H(t,e,r){if(void 0===r&&(r=function(){if("undefined"!==typeof WeakSet){var t=new WeakSet;return{hasAlreadyBeenSeen:function(e){var r=t.has(e);return r||t.add(e),r}}}var e=[];return{hasAlreadyBeenSeen:function(t){var r=e.indexOf(t)>=0;return r||e.push(t),r}}}()),void 0===e)return t;if("object"!==D(e)||null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){var n=e.flags||[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.sticky?"y":"",e.unicode?"u":""].join("");return new RegExp(e.source,n)}if(!r.hasAlreadyBeenSeen(e)){if(Array.isArray(e)){for(var o=Array.isArray(t)?t:[],i=0;i<e.length;++i)o[i]=H(o[i],e[i],r);return o}var a="object"===G(t)?t:{};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&(a[c]=H(a[c],e[c],r));return a}}function U(t){return H(void 0,t)}function M(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=0,o=e;n<o.length;n++){var i=o[n];void 0!==i&&null!==i&&(t=H(t,i))}return t}function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function B(t,e,r){if("object"!==K(t)||null===t)return JSON.stringify(t);var n=W(Object.prototype),o=W(Array.prototype),i=W(Object.getPrototypeOf(t)),a=W(t);try{return JSON.stringify(t,e,r)}catch(c){return"<error: unable to serialize object>"}finally{n(),o(),i(),a()}}function W(t){var e=t,r=e.toJSON;return r?(delete e.toJSON,function(){e.toJSON=r}):R}function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function V(t,e){var r;void 0===e&&(e=225280);var n=W(Object.prototype),o=W(Array.prototype),i=[],a=new WeakMap,c=z(t,"$",void 0,i,a),u=(null===(r=JSON.stringify(c))||void 0===r?void 0:r.length)||0;if(!(u>e)){for(;i.length>0&&u<e;){var s=i.shift(),l=0;if(Array.isArray(s.source))for(var f=0;f<s.source.length;f++){if(u+=void 0!==(h=z(s.source[f],s.path,f,i,a))?JSON.stringify(h).length:4,u+=l,l=1,u>e){Y(e,"truncated",t);break}s.target[f]=h}else for(var f in s.source)if(Object.prototype.hasOwnProperty.call(s.source,f)){var h;if(void 0!==(h=z(s.source[f],s.path,f,i,a))&&(u+=JSON.stringify(h).length+l+f.length+3,l=1),u>e){Y(e,"truncated",t);break}s.target[f]=h}}return n(),o(),c}Y(e,"discarded",t)}function z(t,e,r,n,o){var i=function(t){var e=t;if(e&&"function"===typeof e.toJSON)try{return e.toJSON()}catch(r){}return t}(t);if(!i||"object"!==J(i))return function(t){if("bigint"===typeof t)return"[BigInt] ".concat(t.toString());if("function"===typeof t)return"[Function] ".concat(t.name||"unknown");if("symbol"===J(t))return"[Symbol] ".concat(t.description||t.toString());return t}(i);var a=function(t){try{if(t instanceof Event)return{isTrusted:t.isTrusted};var e=Object.prototype.toString.call(t).match(/\[object (.*)\]/);if(e&&e[1])return"[".concat(e[1],"]")}catch(r){}return"[Unserializable]"}(i);if("[Object]"!==a&&"[Array]"!==a&&"[Error]"!==a)return a;var c=t;if(o.has(c))return"[Reference seen at ".concat(o.get(c),"]");var u=void 0!==r?"".concat(e,".").concat(r):e,s=Array.isArray(i)?[]:{};return o.set(c,u),n.push({source:i,target:s,path:u}),s}function Y(t,e,r){u.warn("The data provided has been ".concat(e," as it is over the limit of ").concat(t," characters:"),r)}var q,$=function(){function t(t){this.onFirstSubscribe=t,this.observers=[]}return t.prototype.subscribe=function(t){var e=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(t),{unsubscribe:function(){e.observers=e.observers.filter((function(e){return t!==e})),!e.observers.length&&e.onLastUnsubscribe&&e.onLastUnsubscribe()}}},t.prototype.notify=function(t){this.observers.forEach((function(e){return e(t)}))},t}();function Z(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new $((function(){var e=t.map((function(t){return t.subscribe((function(t){return r.notify(t)}))}));return function(){return e.forEach((function(t){return t.unsubscribe()}))}}));return r}var X=((q={})[0]="feature flag evaluation",q[1]="user",q[2]="global context",q[3]="logger context",q);function Q(t,e){return t>3072&&(u.warn("The ".concat(X[e]," data exceeds the recommended ").concat(3,"KiB threshold. More details: https://docs.datadoghq.com/real_user_monitoring/browser/troubleshooting/#customer-data-exceeds-the-recommended-3kib-warning")),!0)}function tt(t,e){void 0===e&&(e=A);var r,n={},o=!1,i=new $,a=I((function(n){r=e(B(n)),o||(o=Q(r,t))}),200).throttled,c={getBytesCount:function(){return r},get:function(){return n},add:function(t,e){n[t]=e,a(n),i.notify()},remove:function(t){delete n[t],a(n),i.notify()},set:function(t){a(n=t),i.notify()},getContext:function(){return U(n)},setContext:function(t){"object"===G(t)?(n=V(t),a(n)):c.clearContext(),i.notify()},setContextProperty:function(t,e){n[t]=V(e),a(n),i.notify()},removeContextProperty:function(t){delete n[t],a(n),i.notify()},clearContext:function(){n={},r=0,i.notify()},changeObservable:i};return c}var et=function(){function t(){this.buffer=[]}return t.prototype.add=function(t){this.buffer.push(t)>500&&this.buffer.splice(0,1)},t.prototype.drain=function(){this.buffer.forEach((function(t){return t()})),this.buffer.length=0},t}();function rt(t){return 0!==t&&100*Math.random()<=t}function nt(t,e){return+t.toFixed(e)}function ot(t){return it(t)&&t>=0&&t<=100}function it(t){return"number"===typeof t}var at,ct,ut=1e3,st=6e4;function lt(t){return{relative:t,timeStamp:ft(t)}}function ft(t){var e=pt()-performance.now();return e>_t()?Math.round(bt(e,t)):function(t){return Math.round(bt(_t(),t))}(t)}function ht(t){return it(t)?nt(1e6*t,0):t}function pt(){return(new Date).getTime()}function dt(){return pt()}function yt(){return performance.now()}function vt(){return{relative:yt(),timeStamp:dt()}}function mt(){return{relative:0,timeStamp:_t()}}function gt(t,e){return e-t}function bt(t,e){return t+e}function wt(t){return t-_t()}function _t(){return void 0===at&&(at=performance.timing.navigationStart),at}function xt(t){return t?(parseInt(t,10)^16*Math.random()>>parseInt(t,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,xt)}function Et(t,e){var r=new RegExp("(?:^|;)\\s*".concat(e,"\\s*=\\s*([^;]+)")).exec(t);return r?r[1]:void 0}function kt(t,e,r){void 0===r&&(r="");var n=t.charCodeAt(e-1),o=n>=55296&&n<=56319?e+1:e;return t.length<=o?t:"".concat(t.slice(0,o)).concat(r)}function St(t,e,r,n){var o=new Date;o.setTime(o.getTime()+r);var i="expires=".concat(o.toUTCString()),a=n&&n.crossSite?"none":"strict",c=n&&n.domain?";domain=".concat(n.domain):"",u=n&&n.secure?";secure":"";document.cookie="".concat(t,"=").concat(e,";").concat(i,";path=/;samesite=").concat(a).concat(c).concat(u)}function Ot(t){return Et(document.cookie,t)}function Lt(t,e){St(t,"",0,e)}function At(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||Ot("datadog-synthetics-injects-rum"))}function jt(){var t=O().DatadogEventBridge;if(t)return{getAllowedWebViewHosts:function(){return JSON.parse(t.getAllowedWebViewHosts())},send:function(e,r){t.send(JSON.stringify({eventType:e,event:r}))}}}function Pt(t){var e;void 0===t&&(t=null===(e=O().location)||void 0===e?void 0:e.hostname);var r=jt();return!!r&&r.getAllowedWebViewHosts().some((function(e){return t===e||(r=t,n=".".concat(e),r.slice(-n.length)===n);var r,n}))}function Tt(t,e,r,n,o){return Ct(t,e,[r],n,o)}function Ct(t,e,r,n,o){var i=void 0===o?{}:o,a=i.once,c=i.capture,u=i.passive,s=d(a?function(t){h(),n(t)}:n),l=u?{capture:c,passive:u}:c,f=j(e,"addEventListener");function h(){var t=j(e,"removeEventListener");r.forEach((function(r){return t.call(e,r,s,l)}))}return r.forEach((function(t){return f.call(e,t,s,l)})),{stop:h}}var Nt="_dd_c",It=[];function Rt(t,e,r,n){void 0===n&&(n=A);var o=function(t,e){return"".concat(Nt,"_").concat(t,"_").concat(e)}(e,r),i=tt(r,n);return a(),It.push(Tt(t,window,"storage",(function(t){var e=t.key;o===e&&a()}))),i.changeObservable.subscribe((function(){localStorage.setItem(o,JSON.stringify(i.getContext()))})),i;function a(){var t=localStorage.getItem(o),e=null!==t?JSON.parse(t):{};i.setContext(e)}}function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}var Gt="?";function Dt(t){var e=[],r=zt(t,"stack"),n=String(t);return r&&x(r,n)&&(r=r.slice(n.length)),r&&r.split("\n").forEach((function(t){var r=function(t){var e=Mt.exec(t);if(!e)return;var r=e[2]&&0===e[2].indexOf("native"),n=e[2]&&0===e[2].indexOf("eval"),o=Kt.exec(e[2]);n&&o&&(e[2]=o[1],e[3]=o[2],e[4]=o[3]);return{args:r?[e[2]]:[],column:e[4]?+e[4]:void 0,func:e[1]||Gt,line:e[3]?+e[3]:void 0,url:r?void 0:e[2]}}(t)||function(t){var e=Bt.exec(t);if(!e)return;return{args:[],column:e[3]?+e[3]:void 0,func:Gt,line:e[2]?+e[2]:void 0,url:e[1]}}(t)||function(t){var e=Wt.exec(t);if(!e)return;return{args:[],column:e[4]?+e[4]:void 0,func:e[1]||Gt,line:+e[3],url:e[2]}}(t)||function(t){var e=Jt.exec(t);if(!e)return;var r=e[3]&&e[3].indexOf(" > eval")>-1,n=Vt.exec(e[3]);r&&n&&(e[3]=n[1],e[4]=n[2],e[5]=void 0);return{args:e[2]?e[2].split(","):[],column:e[5]?+e[5]:void 0,func:e[1]||Gt,line:e[4]?+e[4]:void 0,url:e[3]}}(t);r&&(!r.func&&r.line&&(r.func=Gt),e.push(r))})),{message:zt(t,"message"),name:zt(t,"name"),stack:e}}var Ht="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",Ut="(?::(\\d+))",Mt=new RegExp("^\\s*at (.*?) ?\\(".concat(Ht).concat(Ut,"?").concat(Ut,"?\\)?\\s*$"),"i"),Kt=new RegExp("\\((\\S*)".concat(Ut).concat(Ut,"\\)"));var Bt=new RegExp("^\\s*at ?".concat(Ht).concat(Ut,"?").concat(Ut,"??\\s*$"),"i");var Wt=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;var Jt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,Vt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function zt(t,e){if("object"===Ft(t)&&t&&e in t){var r=t[e];return"string"===typeof r?r:void 0}}var Yt,qt="No stack, consider using an instance of Error";function $t(t){var e=t.stackTrace,r=t.originalError,n=t.handlingStack,o=t.startClocks,i=t.nonErrorPrefix,a=t.source,c=t.handling,u=r instanceof Error,s=function(t,e,r,n){return(null===t||void 0===t?void 0:t.message)&&(null===t||void 0===t?void 0:t.name)?t.message:e?"Empty message":"".concat(r," ").concat(B(V(n)))}(e,u,i,r),l=function(t,e){if(void 0===e)return!1;if(t)return!0;return e.stack.length>0&&(e.stack.length>1||void 0!==e.stack[0].url)}(u,e)?Xt(e):qt,f=u?function(t,e){var r=t,n=[];for(;(null===r||void 0===r?void 0:r.cause)instanceof Error&&n.length<10;){var o=Dt(r.cause);n.push({message:r.cause.message,source:e,type:null===o||void 0===o?void 0:o.name,stack:o&&Xt(o)}),r=r.cause}return n.length?n:void 0}(r,a):void 0;return{startClocks:o,source:a,handling:c,handlingStack:n,originalError:r,type:null===e||void 0===e?void 0:e.name,message:s,stack:l,causes:f,fingerprint:Zt(r)}}function Zt(t){return t instanceof Error&&"dd_fingerprint"in t?String(t.dd_fingerprint):void 0}function Xt(t){var e=Qt(t);return t.stack.forEach((function(t){var r="?"===t.func?"<anonymous>":t.func,n=t.args&&t.args.length>0?"(".concat(t.args.join(", "),")"):"",o=t.line?":".concat(t.line):"",i=t.line&&t.column?":".concat(t.column):"";e+="\n  at ".concat(r).concat(n," @ ").concat(t.url).concat(o).concat(i)})),e}function Qt(t){return"".concat(t.name||"Error",": ").concat(t.message)}function te(){var t,e=new Error;if(!e.stack)try{throw e}catch(r){}return y((function(){var r=Dt(e);r.stack=r.stack.slice(2),t=Xt(r)})),t}function ee(t){var e=k({},t);return["id","name","email"].forEach((function(t){t in e&&(e[t]=String(e[t]))})),e}!function(t){t.PAGEHIDE="pagehide",t.FEATURE_FLAGS="feature_flags",t.RESOURCE_PAGE_STATES="resource_page_states",t.PAGE_STATES="page_states",t.COLLECT_FLUSH_REASON="collect_flush_reason",t.NO_RESOURCE_DURATION_FROZEN_STATE="no_resource_duration_frozen_state",t.SCROLLMAP="scrollmap",t.INTERACTION_TO_NEXT_PAINT="interaction_to_next_paint",t.WEB_VITALS_ATTRIBUTION="web_vitals_attribution",t.DISABLE_REPLAY_INLINE_CSS="disable_replay_inline_css"}(Yt||(Yt={}));var re=new Set;function ne(t){return re.has(t)}function oe(){return re}function ie(t){return k({},t)}function ae(t,e){return Object.keys(t).some((function(r){return t[r]===e}))}function ce(t){return 0===Object.keys(t).length}var ue,se,le,fe=144e5,he=9e5;var pe="_dd_s",de=/^([a-z]+)=([a-z0-9-]+)$/,ye="&";function ve(t){return ce(t)}function me(t){t.expire=String(pt()+he)}function ge(t){return _(t).map((function(t){var e=t[0],r=t[1];return"".concat(e,"=").concat(r)})).join("&")}function be(t){var e={};return function(t){return!!t&&(-1!==t.indexOf(ye)||de.test(t))}(t)&&t.split(ye).forEach((function(t){var r=de.exec(t);if(null!==r){var n=r[1],o=r[2];e[n]=o}})),e}function we(t){var e=function(t){var e={};e.secure=!!t.useSecureSessionCookie||!!t.useCrossSiteSessionCookie,e.crossSite=!!t.useCrossSiteSessionCookie,t.trackSessionAcrossSubdomains&&(e.domain=function(){if(void 0===ct){for(var t="dd_site_test_".concat(xt()),e=window.location.hostname.split("."),r=e.pop();e.length&&!Ot(t);)r="".concat(e.pop(),".").concat(r),St(t,"test",ut,{domain:r});Lt(t,{domain:r}),ct=r}return ct}());return e}(t);return function(t){if(void 0===document.cookie||null===document.cookie)return!1;try{var e="dd_cookie_test_".concat(xt()),r="test";St(e,r,st,t);var n=Ot(e)===r;return Lt(e,t),n}catch(o){return u.error(o),!1}}(e)?{type:"Cookie",cookieOptions:e}:void 0}function _e(t){var e,r={isLockEnabled:null!==se&&void 0!==se?se:se=!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent),persistSession:(e=t,function(t){St(pe,ge(t),he,e)}),retrieveSession:xe,clearSession:Ee(t)};return function(t){if(!Ot(pe)){var e=Ot("_dd"),r=Ot("_dd_r"),n=Ot("_dd_l"),o={};e&&(o.id=e),n&&/^[01]$/.test(n)&&(o.logs=n),r&&/^[012]$/.test(r)&&(o.rum=r),ve(o)||(me(o),t.persistSession(o))}}(r),r}function xe(){return be(Ot(pe))}function Ee(t){return function(){Lt(pe,t)}}function ke(t){localStorage.setItem(pe,ge(t))}function Se(){return be(localStorage.getItem(pe))}function Oe(){localStorage.removeItem(pe)}var Le,Ae=[];function je(t,e,r){var n;void 0===r&&(r=0);var o=e.isLockEnabled,i=e.retrieveSession,a=e.persistSession,c=e.clearSession;if(Le||(Le=t),t===Le)if(o&&r>=100)Te(e);else{var u,s=i();if(o){if(s.lock)return void Pe(t,e,r);if(u=xt(),s.lock=u,a(s),(s=i()).lock!==u)return void Pe(t,e,r)}var l=t.process(s);if(o&&(s=i()).lock!==u)Pe(t,e,r);else{if(l&&(ve(l)?c():(me(l),a(l))),o&&(!l||!ve(l))){if((s=i()).lock!==u)return void Pe(t,e,r);delete s.lock,a(s),l=s}null===(n=t.after)||void 0===n||n.call(t,l||s),Te(e)}}else Ae.push(t)}function Pe(t,e,r){P((function(){je(t,e,r+1)}),10)}function Te(t){Le=void 0;var e=Ae.shift();e&&je(e,t)}var Ce=ut;function Ne(t){var e=we(t);return!e&&t.allowFallbackToLocalStorage&&(e=function(){try{var t=xt(),e="".concat("_dd_test_").concat(t);localStorage.setItem(e,t);var r=localStorage.getItem(e);return localStorage.removeItem(e),t===r?{type:"LocalStorage"}:void 0}catch(n){return}}()),e}function Ie(t,e,r){var n=new $,o=new $,i="Cookie"===t.type?_e(t.cookieOptions):{isLockEnabled:!1,persistSession:ke,retrieveSession:Se,clearSession:Oe},a=i.clearSession,c=i.retrieveSession,u=C((function(){je({process:function(t){return h(t)?void 0:{}},after:l},i)}),Ce),s=function(){var t=c();if(h(t))return t;return{}}();function l(t){return h(t)||(t={}),f()&&(!function(t){return s.id!==t.id||s[e]!==t[e]}(t)?s=t:(s={},o.notify())),t}function f(){return void 0!==s[e]}function h(t){return(void 0===t.created||pt()-Number(t.created)<fe)&&(void 0===t.expire||pt()<Number(t.expire))}return{expandOrRenewSession:I((function(){var t;je({process:function(n){var o=l(n);return t=function(t){var n=r(t[e]),o=n.trackingType,i=n.isTracked;t[e]=o,i&&!t.id&&(t.id=xt(),t.created=String(pt()));return i}(o),o},after:function(e){t&&!f()&&function(t){s=t,n.notify()}(e),s=e}},i)}),Ce).throttled,expandSession:function(){je({process:function(t){return f()?l(t):void 0}},i)},getSession:function(){return s},renewObservable:n,expireObservable:o,expire:function(){a(),l({})},stop:function(){N(u)}}}function Re(t){return Ge(t,Ue(window.location)).href}function Fe(t){return Ue(Ge(t))}function Ge(t,e){var r=function(){if(void 0===De)try{var t=new He("http://test/path");De="http://test/path"===t.href}catch(e){De=!1}return De?He:void 0}();if(r)try{return void 0!==e?new r(t,e):new r(t)}catch(a){throw new Error("Failed to construct URL: ".concat(String(a)," ").concat(B({url:t,base:e})))}if(void 0===e&&!/:/.test(t))throw new Error("Invalid URL: '".concat(t,"'"));var n=document,o=n.createElement("a");if(void 0!==e){var i=(n=document.implementation.createHTMLDocument("")).createElement("base");i.href=e,n.head.appendChild(i),n.body.appendChild(o)}return o.href=t,o}var De,He=URL;function Ue(t){if(t.origin&&"null"!==t.origin)return t.origin;var e=t.host.replace(/(:80|:443)$/,"");return"".concat(t.protocol,"//").concat(e)}var Me="datad0g.com",Ke="datadoghq.com",Be="datadoghq.eu",We="ap1.datadoghq.com",Je={logs:"logs",rum:"rum",sessionReplay:"session-replay"},Ve={logs:"logs",rum:"rum",sessionReplay:"replay"};function ze(t,e,r){var n=function(t,e){var r="/api/v2/".concat(Ve[e]),n=t.proxy,o=t.proxyUrl;if(n){var i=Re(n);return function(t){return"".concat(i,"?ddforward=").concat(encodeURIComponent("".concat(r,"?").concat(t)))}}var a=function(t,e){var r=t.site,n=void 0===r?Ke:r,o=t.internalAnalyticsSubdomain;if(o&&n===Ke)return"".concat(o,".").concat(Ke);var i=n.split("."),a=i.pop(),c=n!==We?"".concat(Je[e],"."):"";return"".concat(c,"browser-intake-").concat(i.join("-"),".").concat(a)}(t,e);if(void 0===n&&o){var c=Re(o);return function(t){return"".concat(c,"?ddforward=").concat(encodeURIComponent("https://".concat(a).concat(r,"?").concat(t)))}}return function(t){return"https://".concat(a).concat(r,"?").concat(t)}}(t,e);return{build:function(o,i){var a=function(t,e,r,n,o){var i=t.clientToken,a=t.internalAnalyticsSubdomain,c=o.retry,u=o.flushReason,s=o.encoding,l=["sdk_version:".concat("4.50.1"),"api:".concat(n)].concat(r);u&&ne(Yt.COLLECT_FLUSH_REASON)&&l.push("flush_reason:".concat(u));c&&l.push("retry_count:".concat(c.count),"retry_after:".concat(c.lastFailureStatus));var f=["ddsource=browser","ddtags=".concat(encodeURIComponent(l.join(","))),"dd-api-key=".concat(i),"dd-evp-origin-version=".concat(encodeURIComponent("4.50.1")),"dd-evp-origin=browser","dd-request-id=".concat(xt())];s&&f.push("dd-evp-encoding=".concat(s));"rum"===e&&f.push("batch_time=".concat(dt()));a&&f.reverse();return f.join("&")}(t,e,r,o,i);return n(a)},urlPrefix:n(""),endpointType:e}}var Ye=/[^a-z0-9_:./-]/;function qe(t,e){var r=200-t.length-1;(e.length>r||Ye.test(e))&&u.warn("".concat(t," value doesn't meet tag requirements and will be sanitized"));var n=e.replace(/,/g,"_");return"".concat(t,":").concat(n)}function $e(t){var e=function(t){var e=t.env,r=t.service,n=t.version,o=t.datacenter,i=[];return e&&i.push(qe("env",e)),r&&i.push(qe("service",r)),n&&i.push(qe("version",n)),o&&i.push(qe("datacenter",o)),i}(t),r=function(t,e){return{logsEndpointBuilder:ze(t,"logs",e),rumEndpointBuilder:ze(t,"rum",e),sessionReplayEndpointBuilder:ze(t,"sessionReplay",e)}}(t,e),n=w(r).map((function(t){return t.urlPrefix})),o=function(t,e,r){if(!t.replica)return;var n=k({},t,{site:Ke,clientToken:t.replica.clientToken}),o={logsEndpointBuilder:ze(n,"logs",r),rumEndpointBuilder:ze(n,"rum",r)};return e.push.apply(e,w(o).map((function(t){return t.urlPrefix}))),k({applicationId:t.replica.applicationId},o)}(t,n,e);return k({isIntakeUrl:function(t){return n.some((function(e){return 0===t.indexOf(e)}))},replica:o,site:t.site||Ke},r)}var Ze={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"};function Xe(t){var e,r,n;if(t&&t.clientToken){var o=null!==(e=t.sessionSampleRate)&&void 0!==e?e:t.sampleRate;if(void 0===o||ot(o))if(void 0===t.telemetrySampleRate||ot(t.telemetrySampleRate)){if(void 0===t.telemetryConfigurationSampleRate||ot(t.telemetryConfigurationSampleRate))return Array.isArray(t.enableExperimentalFeatures)&&t.enableExperimentalFeatures.filter((function(t){return ae(Yt,t)})).forEach((function(t){re.add(t)})),k({beforeSend:t.beforeSend&&s(t.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:Ne(t),sessionSampleRate:null!==o&&void 0!==o?o:100,telemetrySampleRate:null!==(r=t.telemetrySampleRate)&&void 0!==r?r:20,telemetryConfigurationSampleRate:null!==(n=t.telemetryConfigurationSampleRate)&&void 0!==n?n:5,service:t.service,silentMultipleInit:!!t.silentMultipleInit,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144},$e(t));u.error("Telemetry Configuration Sample Rate should be a number between 0 and 100")}else u.error("Telemetry Sample Rate should be a number between 0 and 100");else u.error("Session Sample Rate should be a number between 0 and 100")}else u.error("Client Token is not configured, we will not send any data.")}function Qe(t){var e=G(t);return"string"===e||"function"===e||t instanceof RegExp}function tr(t,e,r){return void 0===r&&(r=!1),t.some((function(t){try{if("function"===typeof t)return t(e);if(t instanceof RegExp)return t.test(e);if("string"===typeof t)return r?x(e,t):t===e}catch(n){u.error(n)}return!1}))}function er(t){0!==t.status||t.isAborted||(t.traceId=void 0,t.spanId=void 0,t.traceSampled=void 0)}function rr(t,e,r,n){if(void 0!==nr()&&r.findTrackedSession()){var o,i,a,c,u,s=b(t.allowedTracingUrls,(function(t){return tr([t.match],e.url,!0)}));if(s)e.traceId=new or,e.spanId=new or,e.traceSampled=!it(t.traceSampleRate)||rt(t.traceSampleRate),n((o=e.traceId,i=e.spanId,a=e.traceSampled,c=s.propagatorTypes,u={},c.forEach((function(t){switch(t){case"datadog":k(u,{"x-datadog-origin":"rum","x-datadog-parent-id":i.toDecimalString(),"x-datadog-sampling-priority":a?"1":"0","x-datadog-trace-id":o.toDecimalString()});break;case"tracecontext":k(u,{traceparent:"00-0000000000000000".concat(o.toPaddedHexadecimalString(),"-").concat(i.toPaddedHexadecimalString(),"-0").concat(a?"1":"0")});break;case"b3":k(u,{b3:"".concat(o.toPaddedHexadecimalString(),"-").concat(i.toPaddedHexadecimalString(),"-").concat(a?"1":"0")});break;case"b3multi":k(u,{"X-B3-TraceId":o.toPaddedHexadecimalString(),"X-B3-SpanId":i.toPaddedHexadecimalString(),"X-B3-Sampled":a?"1":"0"})}})),u))}}function nr(){return window.crypto||window.msCrypto}var or=function(){function t(){this.buffer=new Uint8Array(8),nr().getRandomValues(this.buffer),this.buffer[0]=127&this.buffer[0]}return t.prototype.toString=function(t){var e=this.readInt32(0),r=this.readInt32(4),n="";do{var o=e%t*4294967296+r;e=Math.floor(e/t),r=Math.floor(o/t),n=(o%t).toString(t)+n}while(e||r);return n},t.prototype.toDecimalString=function(){return this.toString(10)},t.prototype.toPaddedHexadecimalString=function(){var t=this.toString(16);return Array(17-t.length).join("0")+t},t.prototype.readInt32=function(t){return 16777216*this.buffer[t]+(this.buffer[t+1]<<16)+(this.buffer[t+2]<<8)+this.buffer[t+3]},t}();function ir(t){var e,r,n,o,i,a;if(t.applicationId)if(void 0===t.sessionReplaySampleRate||ot(t.sessionReplaySampleRate)){var c=null!==(e=t.premiumSampleRate)&&void 0!==e?e:t.replaySampleRate;if(void 0!==c&&void 0!==t.sessionReplaySampleRate&&(u.warn("Ignoring Premium Sample Rate because Session Replay Sample Rate is set"),c=void 0),void 0===c||ot(c)){var s=null!==(r=t.traceSampleRate)&&void 0!==r?r:t.tracingSampleRate;if(void 0===s||ot(s))if(void 0===t.excludedActivityUrls||Array.isArray(t.excludedActivityUrls)){var l=function(t){void 0!==t.allowedTracingUrls&&void 0!==t.allowedTracingOrigins&&u.warn("Both allowedTracingUrls and allowedTracingOrigins (deprecated) have been defined. The parameter allowedTracingUrls will override allowedTracingOrigins.");if(void 0!==t.allowedTracingUrls){if(!Array.isArray(t.allowedTracingUrls))return void u.error("Allowed Tracing URLs should be an array");if(0!==t.allowedTracingUrls.length&&void 0===t.service)return void u.error("Service needs to be configured when tracing is enabled");var e=[];return t.allowedTracingUrls.forEach((function(t){var r;Qe(t)?e.push({match:t,propagatorTypes:["datadog"]}):"object"===G(r=t)&&Qe(r.match)&&Array.isArray(r.propagatorTypes)?e.push(t):u.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",t)})),e}if(void 0!==t.allowedTracingOrigins){if(!Array.isArray(t.allowedTracingOrigins))return void u.error("Allowed Tracing Origins should be an array");if(0!==t.allowedTracingOrigins.length&&void 0===t.service)return void u.error("Service needs to be configured when tracing is enabled");var r=[];return t.allowedTracingOrigins.forEach((function(t){var e=function(t){var e;"string"===typeof t?e=t:t instanceof RegExp?e=function(e){return t.test(Fe(e))}:"function"===typeof t&&(e=function(e){return t(Fe(e))});if(void 0===e)return void u.warn("Allowed Tracing Origins parameters should be a string, RegExp or function. Ignoring parameter",t);return{match:e,propagatorTypes:["datadog"]}}(t);e&&r.push(e)})),r}return[]}(t);if(l){var f=Xe(t);if(f){var h=!!(null!==(n=t.trackUserInteractions)&&void 0!==n?n:t.trackInteractions),p=!!t.trackFrustrations;return k({applicationId:t.applicationId,version:t.version,actionNameAttribute:t.actionNameAttribute,sessionReplaySampleRate:null!==(i=null!==(o=t.sessionReplaySampleRate)&&void 0!==o?o:c)&&void 0!==i?i:100,oldPlansBehavior:void 0===t.sessionReplaySampleRate,traceSampleRate:s,allowedTracingUrls:l,excludedActivityUrls:null!==(a=t.excludedActivityUrls)&&void 0!==a?a:[],workerUrl:t.workerUrl,trackUserInteractions:h||p,trackFrustrations:p,trackViewsManually:!!t.trackViewsManually,trackResources:t.trackResources,trackLongTasks:t.trackLongTasks,subdomain:t.subdomain,defaultPrivacyLevel:ae(Ze,t.defaultPrivacyLevel)?t.defaultPrivacyLevel:Ze.MASK_USER_INPUT,customerDataTelemetrySampleRate:1},f)}}}else u.error("Excluded Activity Urls should be an array");else u.error("Trace Sample Rate should be a number between 0 and 100")}else u.error("Premium Sample Rate should be a number between 0 and 100")}else u.error("Session Replay Sample Rate should be a number between 0 and 100");else u.error("Application ID is not configured, no RUM data will be collected.")}function ar(t){var e=new Set;return Array.isArray(t.allowedTracingUrls)&&t.allowedTracingUrls.length>0&&t.allowedTracingUrls.forEach((function(t){Qe(t)?e.add("datadog"):"object"===G(t)&&Array.isArray(t.propagatorTypes)&&t.propagatorTypes.forEach((function(t){return e.add(t)}))})),Array.isArray(t.allowedTracingOrigins)&&t.allowedTracingOrigins.length>0&&e.add("datadog"),g(e)}function cr(t,e,r){return{context:t.getContext(),user:e.getContext(),hasReplay:!!r.isRecording()||void 0}}function ur(t){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ur(t)}function sr(t,e){var r=window.__ddBrowserSdkExtensionCallback;r&&r({type:t,payload:e})}var lr,fr="log",hr="configuration",pr=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],dr=["ddog-gov.com"],yr={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1};function vr(t,e){var r,n=new $;yr.telemetryEnabled=!m(dr,e.site)&&rt(e.telemetrySampleRate),yr.telemetryConfigurationEnabled=yr.telemetryEnabled&&rt(e.telemetryConfigurationSampleRate);var o={is_local_file:"file:"===window.location.protocol,is_worker:"WorkerGlobalScope"in self};return lr=function(e){if(yr.telemetryEnabled){var i=function(t,e,n){return M({type:"telemetry",date:dt(),service:t,version:"4.50.1",source:"browser",_dd:{format_version:2},telemetry:M(e,{runtime_env:n}),experimental_features:g(oe())},void 0!==r?r():{})}(t,e,o);n.notify(i),sr("telemetry",i)}},l=gr,k(yr,{maxEventsPerPage:e.maxTelemetryEventsPerPage,sentEventCount:0}),{setContextProvider:function(t){r=t},observable:n,enabled:yr.telemetryEnabled}}function mr(t,e){v(o.debug,t,e),br(k({type:fr,message:t,status:"debug"},e))}function gr(t,e){br(k({type:fr,status:"error"},function(t){if(t instanceof Error){var e=Dt(t);return{error:{kind:e.name,stack:Xt(wr(e))},message:e.message}}return{error:{stack:qt},message:"".concat("Uncaught"," ").concat(B(t))}}(t),e))}function br(t){lr&&yr.sentEventCount<yr.maxEventsPerPage&&(yr.sentEventCount+=1,lr(t))}function wr(t){return t.stack=t.stack.filter((function(t){return!t.url||pr.some((function(e){return x(t.url,e)}))})),t}var _r={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function xr(t){return m(w(_r),t)}function Er(){var t,e=window;if(e.Zone&&(t=j(e,"MutationObserver"),e.MutationObserver&&t===e.MutationObserver)){var r=j(new e.MutationObserver(R),"originalInstance");t=r&&r.constructor}return t||(t=e.MutationObserver),t}function kr(t,e,r){document.readyState===e||"complete"===document.readyState?r():Tt(t,window,"complete"===e?"load":"DOMContentLoaded",r,{once:!0})}var Sr="initial_document",Or=[["document",function(t){return Sr===t}],["xhr",function(t){return"xmlhttprequest"===t}],["fetch",function(t){return"fetch"===t}],["beacon",function(t){return"beacon"===t}],["css",function(t,e){return/\.css$/i.test(e)}],["js",function(t,e){return/\.js$/i.test(e)}],["image",function(t,e){return m(["image","img","icon"],t)||null!==/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(e)}],["font",function(t,e){return null!==/\.(woff|eot|woff2|ttf)$/i.exec(e)}],["media",function(t,e){return m(["audio","video"],t)||null!==/\.(mp3|mp4)$/i.exec(e)}]];function Lr(t){var e=t.name;if(!function(t){try{return!!Ge(t)}catch(i){return!1}}(e))return mr('Failed to construct URL for "'.concat(t.name,'"')),"other";for(var r=function(t){var e=Ge(t).pathname;return"/"===e[0]?e:"/".concat(e)}(e),n=0,o=Or;n<o.length;n++){var i=o[n],a=i[0];if((0,i[1])(t.initiatorType,r))return a}return"other"}function Ar(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=1;r<t.length;r+=1)if(t[r-1]>t[r])return!1;return!0}function jr(t){var e=Pr(t);if(e){var r=e.startTime,n=e.fetchStart,o=e.redirectStart,i=e.redirectEnd,a=e.domainLookupStart,c=e.domainLookupEnd,u=e.connectStart,s=e.secureConnectionStart,l=e.connectEnd,f=e.requestStart,h=e.responseStart,p={download:Cr(r,h,e.responseEnd),first_byte:Cr(r,f,h)};return l!==n&&(p.connect=Cr(r,u,l),Ar(u,s,l)&&(p.ssl=Cr(r,s,l))),c!==n&&(p.dns=Cr(r,a,c)),Tr(t)&&(p.redirect=Cr(r,o,i)),p}}function Pr(t){if(Ar(t.startTime,t.fetchStart,t.domainLookupStart,t.domainLookupEnd,t.connectStart,t.connectEnd,t.requestStart,t.responseStart,t.responseEnd)){if(!Tr(t))return t;var e=t.redirectStart,r=t.redirectEnd;if(e<t.startTime&&(e=t.startTime),r<t.startTime&&(r=t.fetchStart),Ar(t.startTime,e,r,t.fetchStart))return k({},t,{redirectEnd:r,redirectStart:e})}}function Tr(t){return t.fetchStart!==t.startTime}function Cr(t,e,r){return{duration:ht(gt(e,r)),start:ht(gt(t,e))}}function Nr(t){if(t.startTime<t.responseStart)return t.decodedBodySize}function Ir(t,e){return e&&!t.isIntakeUrl(e)}function Rr(t){return t.nodeType===Node.TEXT_NODE}function Fr(t){return t.nodeType===Node.ELEMENT_NODE}function Gr(t){return Fr(t)&&Boolean(t.shadowRoot)}function Dr(t){var e=t;return!!e.host&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&Fr(e.host)}function Hr(t,e){t.childNodes.forEach(e),Gr(t)&&e(t.shadowRoot)}function Ur(t){return Dr(t)?t.host:t.parentNode}var Mr;function Kr(t){var e=function(t){var e=t.querySelector("meta[name=dd-trace-id]"),r=t.querySelector("meta[name=dd-trace-time]");return Br(e&&e.content,r&&r.content)}(t)||function(t){var e=function(t){for(var e=0;e<t.childNodes.length;e+=1){if(r=Wr(t.childNodes[e]))return r}if(t.body)for(e=t.body.childNodes.length-1;e>=0;e-=1){var r,n=t.body.childNodes[e];if(r=Wr(n))return r;if(!Rr(n))break}}(t);if(!e)return;return Br(Et(e,"trace-id"),Et(e,"trace-time"))}(t);if(e&&!(e.traceTime<=pt()-12e4))return e.traceId}function Br(t,e){var r=e&&Number(e);if(t&&r)return{traceId:t,traceTime:r}}function Wr(t){if(t&&function(t){return t.nodeType===Node.COMMENT_NODE}(t)){var e=/^\s*DATADOG;(.*?)\s*$/.exec(t.data);if(e)return e[1]}}function Jr(){return void 0!==window.performance&&"getEntries"in performance}function Vr(t){return window.PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes(t)}function zr(t,e){if(function(t,e){kr(t,"interactive",(function(){var t,r={entryType:Mr.RESOURCE,initiatorType:Sr,traceId:Kr(document),toJSON:function(){return k({},t,{toJSON:void 0})}};if(Vr(Mr.NAVIGATION)&&performance.getEntriesByType(Mr.NAVIGATION).length>0){var n=performance.getEntriesByType(Mr.NAVIGATION)[0];t=k(n.toJSON(),r)}else{var o=Yr();t=k(o,{decodedBodySize:0,duration:o.responseEnd,name:window.location.href,startTime:0},r)}e(t)}))}(e,(function(r){qr(t,e,[r])})),Jr()){var r=performance.getEntries();P((function(){return qr(t,e,r)}))}if(window.PerformanceObserver){var n=d((function(r){return qr(t,e,r.getEntries())})),o=[Mr.RESOURCE,Mr.NAVIGATION,Mr.LONG_TASK,Mr.PAINT],i=[Mr.LARGEST_CONTENTFUL_PAINT,Mr.FIRST_INPUT,Mr.LAYOUT_SHIFT,Mr.EVENT];try{i.forEach((function(t){new window.PerformanceObserver(n).observe({type:t,buffered:!0,durationThreshold:40})}))}catch(a){o.push.apply(o,i)}new PerformanceObserver(n).observe({entryTypes:o}),Jr()&&"addEventListener"in performance&&Tt(e,performance,"resourcetimingbufferfull",(function(){performance.clearResourceTimings()}))}Vr(Mr.NAVIGATION)||function(t,e){function r(){e(k(Yr(),{entryType:Mr.NAVIGATION}))}kr(t,"complete",(function(){P(r)}))}(e,(function(r){qr(t,e,[r])})),Vr(Mr.FIRST_INPUT)||function(t,e){var r=pt(),n=!1,o=Ct(0,window,["click","mousedown","keydown","touchstart","pointerdown"],(function(e){if(e.cancelable){var r={entryType:Mr.FIRST_INPUT,processingStart:yt(),processingEnd:yt(),startTime:e.timeStamp,duration:0,name:""};"pointerdown"===e.type?i(t,r):a(r)}}),{passive:!0,capture:!0}).stop;function i(t,e){Ct(0,window,["pointerup","pointercancel"],(function(t){"pointerup"===t.type&&a(e)}),{once:!0})}function a(t){if(!n){n=!0,o();var i=t.processingStart-t.startTime;i>=0&&i<pt()-r&&e(t)}}}(e,(function(r){qr(t,e,[r])}))}function Yr(){var t={},e=performance.timing;for(var r in e)if(it(e[r])){var n=r,o=e[n];t[n]=0===o?0:wt(o)}return t}function qr(t,e,r){var n=r.filter((function(t){return ae(Mr,t.entryType)})).filter((function(t){return!function(t){return t.entryType===Mr.NAVIGATION&&t.loadEventEnd<=0}(t)&&!function(t,e){return e.entryType===Mr.RESOURCE&&!Ir(t,e.name)}(e,t)}));n.length&&t.notify(0,n)}!function(t){t.EVENT="event",t.FIRST_INPUT="first-input",t.LARGEST_CONTENTFUL_PAINT="largest-contentful-paint",t.LAYOUT_SHIFT="layout-shift",t.LONG_TASK="longtask",t.NAVIGATION="navigation",t.PAINT="paint",t.RESOURCE="resource"}(Mr||(Mr={}));var $r="agent",Zr="console",Xr="custom",Qr="source",tn="report";function en(t,e,r){var n=0,o=!1;return{isLimitReached:function(){if(0===n&&P((function(){n=0}),st),(n+=1)<=e||o)return o=!1,!1;if(n===e+1){o=!0;try{r({message:"Reached max number of ".concat(t,"s by minute: ").concat(e),source:$r,startClocks:vt()})}finally{o=!1}}return!0}}}function rn(){var t,e="string"===typeof(t=window._DATADOG_SYNTHETICS_PUBLIC_ID||Ot("datadog-synthetics-public-id"))?t:void 0,r=function(){var t=window._DATADOG_SYNTHETICS_RESULT_ID||Ot("datadog-synthetics-result-id");return"string"===typeof t?t:void 0}();if(e&&r)return{test_id:e,result_id:r,injected:At()}}function nn(t,e,r){var n=U(t),o=r(n);return _(e).forEach((function(e){var r=e[0],o=e[1],i=function(t,e){for(var r=t,n=0,o=e.split(".");n<o.length;n++){var i=o[n];if(!cn(r,i))return;r=r[i]}return r}(n,r),a=G(i);a===o?on(t,r,V(i)):"object"!==o||"undefined"!==a&&"null"!==a||on(t,r,{})})),o}function on(t,e,r){for(var n=t,o=e.split("."),i=0;i<o.length;i+=1){var a=o[i];if(!an(n))return;i!==o.length-1?n=n[a]:n[a]=r}}function an(t){return"object"===G(t)}function cn(t,e){return an(t)&&Object.prototype.hasOwnProperty.call(t,e)}var un,sn={"view.name":"string","view.url":"string","view.referrer":"string"},ln={context:"object"};function fn(t,e,r,n,o,i,a,c,s){var l,f;(l={}).view=sn,l.error=k({"error.message":"string","error.stack":"string","error.resource.url":"string","error.fingerprint":"string"},ln,sn),l.resource=k({"resource.url":"string"},ln,sn),l.action=k({"action.target.name":"string"},ln,sn),l.long_task=k({},ln,sn),un=l;var h=((f={}).error=en("error",t.eventRateLimiterThreshold,s),f.action=en("action",t.eventRateLimiterThreshold,s),f),p=rn(),d=function(){var t,e=null===(t=window.Cypress)||void 0===t?void 0:t.env("traceId");if("string"===typeof e)return{test_execution_id:e}}();e.subscribe(10,(function(s){var l,f=s.startTime,y=s.rawRumEvent,v=s.domainContext,m=s.savedCommonContext,g=s.customerContext,b=n.findView(f),w=o.findUrl(f),_=r.findTrackedSession(f);if(_&&b&&w){var x=m||c(),E=i.findActionId(f),k=M({_dd:{format_version:2,drift:Math.round(pt()-bt(_t(),performance.now())),session:{plan:_.plan},configuration:{session_sample_rate:nt(t.sessionSampleRate,3),session_replay_sample_rate:nt(t.sessionReplaySampleRate,3)},browser_sdk_version:Pt()?"4.50.1":void 0},application:{id:t.applicationId},date:dt(),service:b.service||t.service,version:b.version||t.version,source:"browser",session:{id:_.id,type:p?"synthetics":d?"ci_test":"user"},view:{id:b.id,name:b.name,url:w.url,referrer:w.referrer},action:(l=y,-1!==["error","resource","long_task"].indexOf(l.type)&&E?{id:E}:void 0),synthetics:p,ci_test:d,display:a.get()},y);k.context=M(x.context,g),"has_replay"in k.session||(k.session.has_replay=x.hasReplay),ce(x.user)||(k.usr=x.user),function(t,e,r,n){var o;if(e){var i=nn(t,un[t.type],(function(t){return e(t,r)}));if(!1===i&&"view"!==t.type)return!1;!1===i&&u.warn("Can't dismiss view events using beforeSend!")}var a=null===(o=n[t.type])||void 0===o?void 0:o.isLimitReached();return!a}(k,t.beforeSend,v,h)&&(ce(k.context)&&delete k.context,e.notify(11,k))}}))}var hn,pn=function(){function t(){this.callbacks={}}return t.prototype.notify=function(t,e){var r=this.callbacks[t];r&&r.forEach((function(t){return t(e)}))},t.prototype.subscribe=function(t,e){var r=this;return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),{unsubscribe:function(){r.callbacks[t]=r.callbacks[t].filter((function(t){return e!==t}))}}},t}(),dn=1/0,yn=function(){function t(t,e){var r=this;this.expireDelay=t,this.maxEntries=e,this.entries=[],this.clearOldValuesInterval=C((function(){return r.clearOldValues()}),6e4)}return t.prototype.add=function(t,e){var r=this,n={value:t,startTime:e,endTime:dn,remove:function(){var t=r.entries.indexOf(n);t>=0&&r.entries.splice(t,1)},close:function(t){n.endTime=t}};return this.maxEntries&&this.entries.length>=this.maxEntries&&this.entries.pop(),this.entries.unshift(n),n},t.prototype.find=function(t){void 0===t&&(t=dn);for(var e=0,r=this.entries;e<r.length;e++){var n=r[e];if(n.startTime<=t){if(t<=n.endTime)return n.value;break}}},t.prototype.closeActive=function(t){var e=this.entries[0];e&&e.endTime===dn&&e.close(t)},t.prototype.findAll=function(t,e){void 0===t&&(t=dn),void 0===e&&(e=0);var r=bt(t,e);return this.entries.filter((function(e){return e.startTime<=r&&t<=e.endTime})).map((function(t){return t.value}))},t.prototype.reset=function(){this.entries=[]},t.prototype.stop=function(){N(this.clearOldValuesInterval)},t.prototype.clearOldValues=function(){for(var t=yt()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<t;)this.entries.pop()},t}(),vn=fe;function mn(t,e,r){var n=t[e],o=r(n),i=function(){if("function"===typeof o)return o.apply(this,arguments)};return t[e]=i,{stop:function(){t[e]===i?t[e]=n:o=n}}}function gn(t,e,r){var n=r.before,o=r.after;return mn(t,e,(function(t){return function(){var e,r=arguments;return n&&y(n,this,r),"function"===typeof t&&(e=t.apply(this,r)),o&&y(o,this,r),e}}))}function bn(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e);if(!n||!n.set||!n.configurable)return{stop:R};var o=function(t,e){P((function(){r(t,e)}),0)},i=function(t){n.set.call(this,t),o(this,t)};return Object.defineProperty(t,e,{set:i}),{stop:function(){var r;(null===(r=Object.getOwnPropertyDescriptor(t,e))||void 0===r?void 0:r.set)===i?Object.defineProperty(t,e,n):o=R}}}var wn,_n=new WeakMap;function xn(t){return hn||(hn=function(t){var e=new $((function(){var r=gn(XMLHttpRequest.prototype,"open",{before:En}).stop,n=gn(XMLHttpRequest.prototype,"send",{before:function(){kn.call(this,t,e)}}).stop,o=gn(XMLHttpRequest.prototype,"abort",{before:Sn}).stop;return function(){r(),n(),o()}}));return e}(t)),hn}function En(t,e){_n.set(this,{state:"open",method:t,url:Re(String(e))})}function kn(t,e){var r=this,n=_n.get(this);if(n){var o=n;o.state="start",o.startTime=yt(),o.startClocks=vt(),o.isAborted=!1,o.xhr=this;var i=!1,a=gn(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&c()}}).stop,c=function(){if(u(),a(),!i){i=!0;var t=n;t.state="complete",t.duration=gt(o.startClocks.timeStamp,dt()),t.status=r.status,e.notify(ie(t))}},u=Tt(t,this,"loadend",c).stop;e.notify(o)}}function Sn(){var t=_n.get(this);t&&(t.isAborted=!0)}function On(){var t;return wn||(t=new $((function(){if(window.fetch)return mn(window,"fetch",(function(e){return function(r,n){var o,i=y(Ln,null,[t,r,n]);return i?(o=e.call(this,i.input,i.init),y(An,null,[t,o,i])):o=e.call(this,r,n),o}})).stop})),wn=t),wn}function Ln(t,e,r){var n=r&&r.method||e instanceof Request&&e.method||"GET",o=e instanceof Request?e.url:Re(String(e)),i={state:"start",init:r,input:e,method:n,startClocks:vt(),url:o};return t.notify(i),i}function An(t,e,r){var n=function(e){var n=r;n.state="resolve","stack"in e||e instanceof Error?(n.status=0,n.isAborted=e instanceof DOMException&&e.code===DOMException.ABORT_ERR,n.error=e):"status"in e&&(n.response=e,n.responseType=e.type,n.status=e.status,n.isAborted=!1),t.notify(n)};e.then(d(n),d(n))}var jn=1;function Pn(t,e,r){var n=function(t,e){return{clearTracingIfNeeded:er,traceFetch:function(r){return rr(t,r,e,(function(t){var e;if(r.input instanceof Request&&!(null===(e=r.init)||void 0===e?void 0:e.headers))r.input=new Request(r.input),Object.keys(t).forEach((function(e){r.input.headers.append(e,t[e])}));else{r.init=ie(r.init);var n=[];r.init.headers instanceof Headers?r.init.headers.forEach((function(t,e){n.push([e,t])})):Array.isArray(r.init.headers)?r.init.headers.forEach((function(t){n.push(t)})):r.init.headers&&Object.keys(r.init.headers).forEach((function(t){n.push([t,r.init.headers[t]])})),r.init.headers=n.concat(_(t))}}))},traceXhr:function(r,n){return rr(t,r,e,(function(t){Object.keys(t).forEach((function(e){n.setRequestHeader(e,t[e])}))}))}}}(e,r);!function(t,e,r){var n=xn(e).subscribe((function(n){var o=n;if(Ir(e,o.url))switch(o.state){case"start":r.traceXhr(o,o.xhr),o.requestIndex=Tn(),t.notify(5,{requestIndex:o.requestIndex,url:o.url});break;case"complete":r.clearTracingIfNeeded(o),t.notify(6,{duration:o.duration,method:o.method,requestIndex:o.requestIndex,spanId:o.spanId,startClocks:o.startClocks,status:o.status,traceId:o.traceId,traceSampled:o.traceSampled,type:"xhr",url:o.url,xhr:o.xhr})}}))}(t,e,n),function(t,e,r){var n=On().subscribe((function(n){var o=n;if(Ir(e,o.url))switch(o.state){case"start":r.traceFetch(o),o.requestIndex=Tn(),t.notify(5,{requestIndex:o.requestIndex,url:o.url});break;case"resolve":!function(t,e){var r=t.response&&function(t){try{return t.clone()}catch(e){return}}(t.response);r&&r.body?function(t,e,r){var n=t.getReader(),o=[],i=0;function a(){var t,a;if(n.cancel().catch(R),r.collectStreamBody){var c;if(1===o.length)c=o[0];else{c=new Uint8Array(i);var u=0;o.forEach((function(t){c.set(t,u),u+=t.length}))}t=c.slice(0,r.bytesLimit),a=c.length>r.bytesLimit}e(void 0,t,a)}!function t(){n.read().then(d((function(e){e.done?a():(r.collectStreamBody&&o.push(e.value),(i+=e.value.length)>r.bytesLimit?a():t())})),d((function(t){return e(t)})))}()}(r.body,(function(){e(gt(t.startClocks.timeStamp,dt()))}),{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:!1}):e(gt(t.startClocks.timeStamp,dt()))}(o,(function(e){r.clearTracingIfNeeded(o),t.notify(6,{duration:e,method:o.method,requestIndex:o.requestIndex,responseType:o.responseType,spanId:o.spanId,startClocks:o.startClocks,status:o.status,traceId:o.traceId,traceSampled:o.traceSampled,type:"fetch",url:o.url,response:o.response,init:o.init,input:o.input})}))}}))}(t,e,n)}function Tn(){var t=jn;return jn+=1,t}function Cn(t){var e=t.lifeCycle,r=t.isChildEvent,n=t.onChange,o=void 0===n?R:n,i={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},a=e.subscribe(11,(function(t){var e;if("view"!==t.type&&r(t))switch(t.type){case"error":i.errorCount+=1,o();break;case"action":i.actionCount+=1,t.action.frustration&&(i.frustrationCount+=t.action.frustration.type.length),o();break;case"long_task":i.longTaskCount+=1,o();break;case"resource":(null===(e=t._dd)||void 0===e?void 0:e.discarded)||(i.resourceCount+=1,o())}}));return{stop:function(){a.unsubscribe()},eventCounts:i}}var Nn=100;function In(t,e,r,n,o){var i=function(t,e,r){var n=new $((function(){var o,i=[],a=0;i.push(e.subscribe(s),t.subscribe(0,(function(t){t.some((function(t){return t.entryType===Mr.RESOURCE&&!Rn(r,t.name)}))&&s()})),t.subscribe(5,(function(t){Rn(r,t.url)||(void 0===o&&(o=t.requestIndex),a+=1,s())})),t.subscribe(6,(function(t){Rn(r,t.url)||void 0===o||t.requestIndex<o||(a-=1,s())})));var c,u=(c=s,gn(window,"open",{before:c})).stop;return function(){u(),i.forEach((function(t){return t.unsubscribe()}))};function s(){n.notify({isBusy:a>0})}}));return n}(t,e,r);return function(t,e,r){var n,o=!1,i=P(d((function(){return s({hadActivity:!1})})),100),a=void 0!==r?P(d((function(){return s({hadActivity:!0,end:dt()})})),r):void 0,c=t.subscribe((function(t){var e=t.isBusy;T(i),T(n);var r=dt();e||(n=P(d((function(){return s({hadActivity:!0,end:r})})),100))})),u=function(){o=!0,T(i),T(n),T(a),c.unsubscribe()};function s(t){o||(u(),e(t))}return{stop:u}}(i,n,o)}function Rn(t,e){return tr(t.excludedActivityUrls,e)}var Fn="data-dd-action-name";function Gn(t,e){return Dn(t,Fn)||e&&Dn(t,e)||Wn(t,e,Mn)||Wn(t,e,Kn)||""}function Dn(t,e){var r;if(function(){void 0===Un&&(Un="closest"in HTMLElement.prototype);return Un}())r=t.closest("[".concat(e,"]"));else for(var n=t;n;){if(n.hasAttribute(e)){r=n;break}n=n.parentElement}if(r)return Vn(Jn(r.getAttribute(e).trim()))}var Hn,Un,Mn=[function(t,e){if(function(){void 0===Hn&&(Hn="labels"in HTMLInputElement.prototype);return Hn}()){if("labels"in t&&t.labels&&t.labels.length>0)return zn(t.labels[0],e)}else if(t.id){var r=t.ownerDocument&&b(t.ownerDocument.querySelectorAll("label"),(function(e){return e.htmlFor===t.id}));return r&&zn(r,e)}},function(t){if("INPUT"===t.nodeName){var e=t,r=e.getAttribute("type");if("button"===r||"submit"===r||"reset"===r)return e.value}},function(t,e){if("BUTTON"===t.nodeName||"LABEL"===t.nodeName||"button"===t.getAttribute("role"))return zn(t,e)},function(t){return t.getAttribute("aria-label")},function(t,e){var r=t.getAttribute("aria-labelledby");if(r)return r.split(/\s+/).map((function(e){return function(t,e){return t.ownerDocument?t.ownerDocument.getElementById(e):null}(t,e)})).filter((function(t){return Boolean(t)})).map((function(t){return zn(t,e)})).join(" ")},function(t){return t.getAttribute("alt")},function(t){return t.getAttribute("name")},function(t){return t.getAttribute("title")},function(t){return t.getAttribute("placeholder")},function(t,e){if("options"in t&&t.options.length>0)return zn(t.options[0],e)}],Kn=[function(t,e){return zn(t,e)}],Bn=10;function Wn(t,e,r){for(var n=t,o=0;o<=Bn&&n&&"BODY"!==n.nodeName&&"HTML"!==n.nodeName&&"HEAD"!==n.nodeName;){for(var i=0,a=r;i<a.length;i++){var c=(0,a[i])(n,e);if("string"===typeof c){var u=c.trim();if(u)return Vn(Jn(u))}}if("FORM"===n.nodeName)break;n=n.parentElement,o+=1}}function Jn(t){return t.replace(/\s+/g," ")}function Vn(t){return t.length>100?"".concat(kt(t,100)," [...]"):t}function zn(t,e){if(!t.isContentEditable){if("innerText"in t){var r=t.innerText,n=function(e){for(var n=t.querySelectorAll(e),o=0;o<n.length;o+=1){var i=n[o];if("innerText"in i){var a=i.innerText;a&&a.trim().length>0&&(r=r.replace(a,""))}}};return(null!==ue&&void 0!==ue?ue:ue=Boolean(document.documentMode))&&n("script, style"),n("[".concat(Fn,"]")),e&&n("[".concat(e,"]")),r}return t.textContent}}var Yn,qn=[Fn,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"],$n=[to,function(t){if(t.id&&!Qn(t.id))return"#".concat(E(t.id))}],Zn=[to,function(t){if("BODY"===t.tagName)return;if(t.classList.length>0)for(var e=0;e<t.classList.length;e+=1){var r=t.classList[e];if(!Qn(r))return"".concat(E(t.tagName),".").concat(E(r))}},function(t){return E(t.tagName)}];function Xn(t,e){for(var r="",n=t;n&&"HTML"!==n.nodeName;){var o=ro(n,$n,no,e,r);if(o)return o;r=ro(n,Zn,oo,e,r)||io(eo(n),r),n=n.parentElement}return r}function Qn(t){return/[0-9]/.test(t)}function to(t,e){if(e&&(o=i(e)))return o;for(var r=0,n=qn;r<n.length;r++){var o;if(o=i(n[r]))return o}function i(e){if(t.hasAttribute(e))return"".concat(E(t.tagName),"[").concat(e,'="').concat(E(t.getAttribute(e)),'"]')}}function eo(t){for(var e=t.parentElement.firstElementChild,r=1;e&&e!==t;)e.tagName===t.tagName&&(r+=1),e=e.nextElementSibling;return"".concat(E(t.tagName),":nth-of-type(").concat(r,")")}function ro(t,e,r,n,o){for(var i=0,a=e;i<a.length;i++){var c=(0,a[i])(t,n);if(c){var u=io(c,o);if(r(t,u))return u}}}function no(t,e){return 1===t.ownerDocument.querySelectorAll(e).length}function oo(t,e){return 1===t.parentElement.querySelectorAll(function(){if(void 0===Yn)try{document.querySelector(":scope"),Yn=!0}catch(t){Yn=!1}return Yn}()?io(":scope",e):e).length}function io(t,e){return e?"".concat(t,">").concat(e):t}var ao=ut;function co(t,e){var r,n=[],o=0;function i(t){t.stopObservable.subscribe(a),n.push(t),T(r),r=P(c,ao)}function a(){1===o&&n.every((function(t){return t.isStopped()}))&&(o=2,e(n))}function c(){T(r),0===o&&(o=1,a())}return i(t),{tryAppend:function(t){return 0===o&&(n.length>0&&(e=n[n.length-1].event,r=t.event,!(e.target===r.target&&(a=e,u=r,Math.sqrt(Math.pow(a.clientX-u.clientX,2)+Math.pow(a.clientY-u.clientY,2))<=100)&&e.timeStamp-r.timeStamp<=ao))?(c(),!1):(i(t),!0));var e,r,a,u},stop:function(){c()}}}function uo(){var t=window.getSelection();return!t||t.isCollapsed}function so(t){return t.target instanceof Element&&!1!==t.isPrimary}function lo(t,e){if(function(t){if(t.some((function(t){return t.getUserActivity().selection})))return!1;for(var e=0;e<t.length-2;e+=1)if(t[e+3-1].event.timeStamp-t[e].event.timeStamp<=ut)return!0;return!1}(t))return e.addFrustration("rage_click"),t.some(ho)&&e.addFrustration("dead_click"),e.hasError&&e.addFrustration("error_click"),{isRage:!0};var r=t.some((function(t){return t.getUserActivity().selection}));return t.forEach((function(t){t.hasError&&t.addFrustration("error_click"),ho(t)&&!r&&t.addFrustration("dead_click")})),{isRage:!1}}var fo='input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),textarea,select,[contenteditable],[contenteditable] *,canvas,a[href],a[href] *';function ho(t){return!t.hasPageActivity&&!t.getUserActivity().input&&(e=t.event.target,r=fo,!(e.matches?e.matches(r):e.msMatchesSelector&&e.msMatchesSelector(r)));var e,r}function po(t,e,r){var n,o=new yn(3e5),i=new $;t.subscribe(8,(function(){o.reset()})),t.subscribe(4,u);var a=function(t,e){var r,n,o=e.onPointerDown,i=e.onPointerUp,a={selection:!1,input:!1},c=[Tt(t,window,"pointerdown",(function(t){so(t)&&(r=uo(),a={selection:!1,input:!1},n=o(t))}),{capture:!0}),Tt(t,window,"selectionchange",(function(){r&&uo()||(a.selection=!0)}),{capture:!0}),Tt(t,window,"pointerup",(function(t){if(so(t)&&n){var e=a;i(n,t,(function(){return e})),n=void 0}}),{capture:!0}),Tt(t,window,"input",(function(){a.input=!0}),{capture:!0})];return{stop:function(){c.forEach((function(t){return t.stop()}))}}}(r,{onPointerDown:function(n){return function(t,e,r,n,o){if(!t.trackFrustrations&&n.find())return;var i=(a=o,c=t.actionNameAttribute,u=a.target.getBoundingClientRect(),{type:"click",target:{width:Math.round(u.width),height:Math.round(u.height),selector:Xn(a.target,c)},position:{x:Math.round(a.clientX-u.left),y:Math.round(a.clientY-u.top)},name:Gn(a.target,c)});var a,c,u;if(!t.trackFrustrations&&!i.name)return;var s=!1;return In(e,r,t,(function(t){s=t.hadActivity}),Nn),{clickActionBase:i,hadActivityOnPointerDown:function(){return s}}}(r,t,e,o,n)},onPointerUp:function(n,a,u){var s=n.clickActionBase,l=n.hadActivityOnPointerDown;return function(t,e,r,n,o,i,a,c,u,s){var l=yo(e,n,u,a,c);t.trackFrustrations&&i(l);var f=In(e,r,t,(function(e){e.hadActivity&&e.end<l.startClocks.timeStamp?l.discard():(e.hadActivity?l.stop(e.end):s()?l.stop(l.startClocks.timeStamp):l.stop(),t.trackFrustrations||(e.hadActivity?l.validate():l.discard()))}),1e4).stop,h=e.subscribe(4,(function(t){var e=t.endClocks;l.stop(e.timeStamp)})),p=o.subscribe((function(){l.stop()}));l.stopObservable.subscribe((function(){h.unsubscribe(),f(),p.unsubscribe()}))}(r,t,e,o,i,c,s,a,u,l)}}).stop;return{stop:function(){u(),i.notify(),a()},actionContexts:{findActionId:function(t){return r.trackFrustrations?o.findAll(t):o.find(t)}}};function c(t){if(!n||!n.tryAppend(t)){var e=t.clone();n=co(t,(function(t){!function(t,e){var r=lo(t,e).isRage;r?(t.forEach((function(t){return t.discard()})),e.stop(dt()),e.validate(t.map((function(t){return t.event})))):(e.discard(),t.forEach((function(t){return t.validate()})))}(t,e)}))}}function u(){n&&n.stop()}}function yo(t,e,r,n,o){var i,a=xt(),c=vt(),u=e.add(a,c.relative),s=Cn({lifeCycle:t,isChildEvent:function(t){return void 0!==t.action&&(Array.isArray(t.action.id)?m(t.action.id,a):t.action.id===a)}}),l=0,f=[],h=new $;function p(t){0===l&&(l=1,(i=t)?u.close(wt(i)):u.remove(),s.stop(),h.notify())}return{event:o,stop:p,stopObservable:h,get hasError(){return s.eventCounts.errorCount>0},get hasPageActivity(){return void 0!==i},getUserActivity:r,addFrustration:function(t){f.push(t)},startClocks:c,isStopped:function(){return 1===l||2===l},clone:function(){return yo(t,e,r,n,o)},validate:function(e){if(p(),1===l){var r=s.eventCounts,u=r.resourceCount,h=r.errorCount,d=r.longTaskCount,y=k({type:"click",duration:i&&gt(c.timeStamp,i),startClocks:c,id:a,frustrationTypes:f,counts:{resourceCount:u,errorCount:h,longTaskCount:d},events:null!==e&&void 0!==e?e:[o],event:o},n);t.notify(1,y),l=2}},discard:function(){p(),l=2}}}function vo(t,e){var r=mo(t)?{action:{id:t.id,loading_time:ht(t.duration),frustration:{type:t.frustrationTypes},error:{count:t.counts.errorCount},long_task:{count:t.counts.longTaskCount},resource:{count:t.counts.resourceCount}},_dd:{action:{target:t.target,position:t.position}}}:void 0;return{customerContext:mo(t)?void 0:t.context,rawRumEvent:M({action:{id:xt(),target:{name:t.name},type:t.type},date:t.startClocks.timeStamp,type:"action",view:{in_foreground:e.isInActivePageStateAt(t.startClocks.relative)}},r),startTime:t.startClocks.relative,domainContext:mo(t)?{event:t.event,events:t.events}:{}}}function mo(t){return"custom"!==t.type}var go=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function bo(t){var e=function(t){return gn(window,"onerror",{before:function(e,r,n,o,i){var a;if(i instanceof Error)a=Dt(i);else{var c=[{url:r,column:o,line:n}],u=function(t){var e,r,n;"[object String]"==={}.toString.call(t)&&(r=(e=go.exec(t))[1],n=e[2]);return{name:r,message:n}}(e);a={name:u.name,message:u.message,stack:c}}t(a,null!==i&&void 0!==i?i:e)}})}(t).stop,r=function(t){return gn(window,"onunhandledrejection",{before:function(e){var r=e.reason||"Empty reason",n=Dt(r);t(n,r)}})}(t).stop;return{stop:function(){e(),r()}}}var wo={};function _o(t){var e=t.map((function(t){return wo[t]||(wo[t]=function(t){var e=new $((function(){var r=i[t];return i[t]=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];r.apply(console,n);var a=te();y((function(){e.notify(function(t,e,r){var n,i,a=t.map((function(t){return function(t){if("string"===typeof t)return V(t);if(t instanceof Error)return Qt(Dt(t));return B(V(t),void 0,2)}(t)})).join(" ");if(e===o.error){var c=b(t,(function(t){return t instanceof Error}));n=c?Xt(Dt(c)):void 0,i=Zt(c),a="console error: ".concat(a)}return{api:e,message:a,stack:n,handlingStack:r,fingerprint:i}}(n,t,a))}))},function(){i[t]=r}}));return e}(t)),wo[t]}));return Z.apply(void 0,e)}var xo="intervention",Eo="csp_violation";function ko(t,e){var r=[];m(e,Eo)&&r.push(function(t){var e=new $((function(){return Tt(t,document,"securitypolicyviolation",(function(t){e.notify(function(t){var e=Eo,r="'".concat(t.blockedURI,"' blocked by '").concat(t.effectiveDirective,"' directive");return{type:Eo,subtype:t.effectiveDirective,message:"".concat(e,": ").concat(r),stack:So(t.effectiveDirective,t.originalPolicy?"".concat(r,' of the policy "').concat(kt(t.originalPolicy,100,"..."),'"'):"no policy",t.sourceFile,t.lineNumber,t.columnNumber)}}(t))})).stop}));return e}(t));var n=e.filter((function(t){return t!==Eo}));return n.length&&r.push(function(t){var e=new $((function(){if(window.ReportingObserver){var r=d((function(t,r){return t.forEach((function(t){var r,n,o;e.notify((n=(r=t).type,o=r.body,{type:n,subtype:o.id,message:"".concat(n,": ").concat(o.message),stack:So(o.id,o.message,o.sourceFile,o.lineNumber,o.columnNumber)}))}))})),n=new window.ReportingObserver(r,{types:t,buffered:!0});return n.observe(),function(){n.disconnect()}}}));return e}(n)),Z.apply(void 0,r)}function So(t,e,r,n,o){return r?Xt({name:t,message:e,stack:[{func:"?",url:r,line:null!==n&&void 0!==n?n:void 0,column:null!==o&&void 0!==o?o:void 0}]}):void 0}function Oo(t,e,r,n){var i=new $;return function(t){var e=_o([o.error]).subscribe((function(e){return t.notify({startClocks:vt(),message:e.message,stack:e.stack,fingerprint:e.fingerprint,source:Zr,handling:"handled",handlingStack:e.handlingStack})}))}(i),function(t){bo((function(e,r){t.notify($t({stackTrace:e,originalError:r,startClocks:vt(),nonErrorPrefix:"Uncaught",source:Qr,handling:"unhandled"}))}))}(i),function(t,e){var r=ko(t,[Eo,xo]).subscribe((function(t){return e.notify({startClocks:vt(),message:t.message,stack:t.stack,type:t.subtype,source:tn,handling:"unhandled"})}))}(e,i),i.subscribe((function(e){return t.notify(12,{error:e})})),function(t,e,r){return t.subscribe(12,(function(n){var o=n.error,i=n.customerContext,a=n.savedCommonContext;t.notify(10,k({customerContext:i,savedCommonContext:a},function(t,e,r){var n={date:t.startClocks.timeStamp,error:{id:xt(),message:t.message,source:t.source,stack:t.stack,handling_stack:t.handlingStack,type:t.type,handling:t.handling,causes:t.causes,source_type:"browser",fingerprint:t.fingerprint},type:"error",view:{in_foreground:e.isInActivePageStateAt(t.startClocks.relative)}},o=r.findFeatureFlagEvaluations(t.startClocks.relative);o&&!ce(o)&&(n.feature_flags=o);return{rawRumEvent:n,startTime:t.startClocks.relative,domainContext:{error:t.originalError}}}(o,e,r)))})),{addError:function(e,r){var n=e.error,o=e.handlingStack,i=e.startClocks,a=e.context,c=$t({stackTrace:n instanceof Error?Dt(n):void 0,originalError:n,handlingStack:o,startClocks:i,nonErrorPrefix:"Provided",source:Xr,handling:"handled"});t.notify(12,{customerContext:a,savedCommonContext:r,error:c})}}}(t,r,n)}function Lo(t){if(performance&&"getEntriesByName"in performance){var e=performance.getEntriesByName(t.url,"resource");if(e.length&&"toJSON"in e[0]){var r=e.map((function(t){return t.toJSON()})).filter(Pr).filter((function(e){return r=e,n=t.startClocks.relative,o=Ao({startTime:t.startClocks.relative,duration:t.duration}),i=1,r.startTime>=n-i&&Ao(r)<=bt(o,i);var r,n,o,i}));return 1===r.length?r[0]:void 0}}}function Ao(t){return bt(t.startTime,t.duration)}function jo(t,e,r,n){t.subscribe(6,(function(o){t.notify(10,function(t,e,r,n){var o,i="xhr"===t.type?"xhr":"fetch",a=Lo(t),c=a?lt(a.startTime):t.startClocks,u=a?To(a):void 0,s=function(t,e){var r=t.traceSampled&&t.traceId&&t.spanId;if(!r)return;return{_dd:{span_id:t.spanId.toDecimalString(),trace_id:t.traceId.toDecimalString(),rule_psr:Co(e)}}}(t,e),l=No(r,c),f=function(t,e,r){var n;if(!ne(Yt.NO_RESOURCE_DURATION_FROZEN_STATE))return ht(r);var o=null===(n=t.findAll(e.relative,r))||void 0===n?void 0:n.some((function(t){return"frozen"===t.state}));return o?void 0:ht(r)}(n,c,t.duration),h=Io(n,c,null!==(o=null===a||void 0===a?void 0:a.duration)&&void 0!==o?o:t.duration),p=M({date:c.timeStamp,resource:{id:xt(),type:i,duration:f,method:t.method,status_code:t.status,url:t.url},type:"resource"},s,u,l,h);return{startTime:c.relative,rawRumEvent:p,domainContext:{performanceEntry:a&&a,xhr:t.xhr,response:t.response,requestInput:t.input,requestInit:t.init,error:t.error}}}(o,e,r,n))})),t.subscribe(0,(function(o){for(var i=0,a=o;i<a.length;i++){var c=a[i];c.entryType===Mr.RESOURCE&&("xmlhttprequest"!==(u=c).initiatorType&&"fetch"!==u.initiatorType)&&t.notify(10,Po(c,e,r,n))}var u}))}function Po(t,e,r,n){var o=Lr(t),i=To(t),a=lt(t.startTime),c=function(t,e){var r=t.traceId;if(!r)return;return{_dd:{trace_id:t.traceId,rule_psr:Co(e)}}}(t,e),u=No(r,a),s=Io(n,a,t.duration),l=M({date:a.timeStamp,resource:{id:xt(),type:o,url:t.name},type:"resource"},c,i,u,s);return{startTime:a.relative,rawRumEvent:l,domainContext:{performanceEntry:t}}}function To(t){return{resource:k({duration:(e=t,r=e.duration,n=e.startTime,o=e.responseEnd,ht(0===r&&n<o?gt(n,o):r)),size:Nr(t)},jr(t))};var e,r,n,o}function Co(t){return it(t.traceSampleRate)?t.traceSampleRate/100:void 0}function No(t,e){var r=t.findTrackedSession(e.relative);return{_dd:{discarded:!r||!r.resourceAllowed}}}function Io(t,e,r){if(ne(Yt.RESOURCE_PAGE_STATES))return{_dd:{page_states:t.findAll(e.relative,r),page_was_discarded:String(document.wasDiscarded)}}}function Ro(t,e){for(var r=[],n=0;n<t.length;n++){var o=t[n],i=t[n+1];if("active"===o.state){var a=o.start>=0?o.start:0,c=i?i.start:ht(e);r.push({start:a,duration:c-a})}}return r}var Fo;function Go(t,e,r,n){var o,i,a,c={},u=function(t,e){return{stop:t.subscribe(0,(function(t){for(var r=0,n=t;r<n.length;r++){var o=n[r];o.entryType===Mr.NAVIGATION&&e({domComplete:o.domComplete,domContentLoaded:o.domContentLoadedEventEnd,domInteractive:o.domInteractive,loadEvent:o.loadEventEnd,firstByte:o.responseStart>=0&&o.responseStart<=yt()?o.responseStart:void 0})}})).unsubscribe}}(t,(function(t){r(t.loadEvent),c.navigationTimings=t,n()})).stop,s=(void 0===o&&(o=window),"hidden"===document.visibilityState?i=0:(i=1/0,a=Ct(0,o,["pagehide","visibilitychange"],(function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||(i=t.timeStamp,a())}),{capture:!0}).stop),{get timeStamp(){return i},stop:function(){null===a||void 0===a||a()}}),l=function(t,e,r){return{stop:t.subscribe(0,(function(t){var n=b(t,(function(t){return t.entryType===Mr.PAINT&&"first-contentful-paint"===t.name&&t.startTime<e.timeStamp&&t.startTime<6e5}));n&&r(n.startTime)})).unsubscribe}}(t,s,(function(t){c.firstContentfulPaint=t,n()})).stop,f=function(t,e,r,n,o){var i=1/0,a=Ct(0,n,["pointerdown","keydown"],(function(t){i=t.timeStamp}),{capture:!0,once:!0}).stop,c=t.subscribe(0,(function(t){var n=function(t,e){for(var r=t.length-1;r>=0;r-=1){var n=t[r];if(e(n,r,t))return n}}(t,(function(t){return t.entryType===Mr.LARGEST_CONTENTFUL_PAINT&&t.startTime<i&&t.startTime<r.timeStamp&&t.startTime<6e5}));if(n){var a=void 0;ne(Yt.WEB_VITALS_ATTRIBUTION)&&n.element&&(a=Xn(n.element,e.actionNameAttribute)),o({value:n.startTime,targetSelector:a})}})).unsubscribe;return{stop:function(){a(),c()}}}(t,e,s,window,(function(t){c.largestContentfulPaint=t,n()})).stop,h=function(t,e,r,n){return{stop:t.subscribe(0,(function(t){var o=b(t,(function(t){return t.entryType===Mr.FIRST_INPUT&&t.startTime<r.timeStamp}));if(o){var i=gt(o.startTime,o.processingStart),a=void 0;ne(Yt.WEB_VITALS_ATTRIBUTION)&&o.target&&Fr(o.target)&&(a=Xn(o.target,e.actionNameAttribute)),n({delay:i>=0?i:0,time:o.startTime,targetSelector:a})}})).unsubscribe}}(t,e,s,(function(t){c.firstInput=t,n()})).stop;return{stop:function(){u(),l(),f(),h(),s.stop()},initialViewMetrics:c}}function Do(t,e,r){if(!Vr(Mr.LAYOUT_SHIFT))return{stop:R};var n=0;r({value:0});var o,i,a,c,u,s,l=(u=0,s=0,{update:function(t){var e,r;void 0===o||t.startTime-i>=ut||t.startTime-o>=5e3?(o=i=t.startTime,u=t.value,s=0,a=void 0):(u+=t.value,i=t.startTime),t.value>s&&(s=t.value,c=t.startTime,a=(null===(e=t.sources)||void 0===e?void 0:e.length)?null===(r=b(t.sources,(function(t){return!!t.node&&Fr(t.node)})))||void 0===r?void 0:r.node:void 0)},value:function(){return u},largestLayoutShiftTarget:function(){return a},largestLayoutShiftTime:function(){return c}});return{stop:e.subscribe(0,(function(e){for(var o=0,i=e;o<i.length;o++){var a=i[o];if(a.entryType===Mr.LAYOUT_SHIFT&&!a.hadRecentInput&&(l.update(a),l.value()>n)){var c=nt(n=l.value(),4),u=l.largestLayoutShiftTarget(),s=void 0;ne(Yt.WEB_VITALS_ATTRIBUTION)&&u&&(s=Xn(u,t.actionNameAttribute)),r({value:c,targetSelector:s})}}})).unsubscribe}}var Ho=0,Uo=1/0,Mo=0;var Ko,Bo=function(){return Fo?Ho:window.performance.interactionCount||0};function Wo(t,e,r,n){if(!(Vr(Mr.EVENT)&&window.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype)||!ne(Yt.INTERACTION_TO_NEXT_PAINT))return{getInteractionToNextPaint:function(){},stop:R};var o,i=function(t){"interactionCount"in performance||Fo||(Fo=new window.PerformanceObserver(d((function(t){t.getEntries().forEach((function(t){var e=t;e.interactionId&&(Uo=Math.min(Uo,e.interactionId),Mo=Math.max(Mo,e.interactionId),Ho=(Mo-Uo)/7+1)}))})))).observe({type:"event",buffered:!0,durationThreshold:0});var e="initial_load"===t?0:Bo();return{getViewInteractionCount:function(){return Bo()-e}}}(r).getViewInteractionCount,a=function(t){var e=[];function r(){e.sort((function(t,e){return e.duration-t.duration})).splice(10)}return{process:function(t){var n=e.findIndex((function(e){return t.interactionId===e.interactionId})),o=e[e.length-1];-1!==n?t.duration>e[n].duration&&(e[n]=t,r()):(e.length<10||t.duration>o.duration)&&(e.push(t),r())},estimateP98Interaction:function(){var r=Math.min(e.length-1,Math.floor(t()/50));return e[r]}}}(i),c=-1,u=!1;return{getInteractionToNextPaint:function(){return c>=0?{value:c,targetSelector:o}:i()?{value:0}:void 0},stop:n.subscribe(0,(function(r){for(var n,i=0,s=r;i<s.length;i++){var l=s[i];l.entryType!==Mr.EVENT&&l.entryType!==Mr.FIRST_INPUT||!l.interactionId||a.process(l)}var f=a.estimateP98Interaction();f&&((c=f.duration)>6e5&&!u&&(u=!0,mr("INP outlier",{inp:c,interaction:{timeFromViewStart:gt(e.relative,f.startTime),duration:f.duration,startTime:f.startTime,processingStart:f.processingStart,processingEnd:f.processingEnd,interactionId:f.interactionId,name:f.name,targetNodeName:null===(n=f.target)||void 0===n?void 0:n.nodeName}})),o=ne(Yt.WEB_VITALS_ATTRIBUTION)&&f.target&&Fr(f.target)?Xn(f.target,t.actionNameAttribute):void 0)})).unsubscribe}}function Jo(){var t,e=window.visualViewport;return t=e?e.pageLeft-e.offsetLeft:void 0!==window.scrollX?window.scrollX:window.pageXOffset||0,Math.round(t)}function Vo(){var t,e=window.visualViewport;return t=e?e.pageTop-e.offsetTop:void 0!==window.scrollY?window.scrollY:window.pageYOffset||0,Math.round(t)}function zo(t){return Ko||(Ko=function(t){var e=new $((function(){var r=I((function(){e.notify(Yo())}),200).throttled;return Tt(t,window,"resize",r,{capture:!0,passive:!0}).stop}));return e}(t)),Ko}function Yo(){var t=window.visualViewport;return t?{width:Number(t.width*t.scale),height:Number(t.height*t.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}var qo=ut;function $o(t,e,r,n){void 0===n&&(n=function(t,e){void 0===e&&(e=qo);var r=new $((function(){function n(){var t,e,n,o;r.notify((t=Vo(),e=Yo().height,n=Math.round((document.scrollingElement||document.documentElement).scrollHeight),o=Math.round(e+t),{scrollHeight:n,scrollDepth:o,scrollTop:t}))}if(window.ResizeObserver){var o=I(n,e,{leading:!1,trailing:!0}),i=document.scrollingElement||document.documentElement,a=new ResizeObserver(d(o.throttled));a.observe(i);var c=Tt(t,window,"scroll",o.throttled,{passive:!0});return function(){o.cancel(),a.unobserve(i),c.stop()}}}));return r}(t));var o=0,i=0,a=0,c=n.subscribe((function(t){var n=t.scrollDepth,c=t.scrollTop,u=t.scrollHeight,s=!1;if(n>o&&(o=n,s=!0),u>i){i=u;var l=yt();a=gt(e.relative,l),s=!0}s&&r({maxDepth:Math.min(o,i),maxDepthScrollTop:c,maxScrollHeight:i,maxScrollHeightTime:a})}));return{stop:function(){return c.unsubscribe()}}}function Zo(t,e,r,n,o,i){var a={},c=function(t,e,r,n,o,i){var a="initial_load"===n,c=!0,u=[];function s(){!c&&!a&&u.length>0&&i(Math.max.apply(Math,u))}return{stop:In(t,e,r,(function(t){c&&(c=!1,t.hadActivity&&u.push(gt(o.timeStamp,t.end)),s())})).stop,setLoadEvent:function(t){a&&(a=!1,u.push(t),s())}}}(t,e,r,o,i,(function(t){a.loadingTime=t,n()})),u=c.stop,s=c.setLoadEvent,l=$o(r,i,(function(t){a.scroll=t})).stop,f=Do(r,t,(function(t){a.cumulativeLayoutShift=t,n()})).stop,h=Wo(r,i,o,t),p=h.stop,d=h.getInteractionToNextPaint;return{stop:function(){u(),f(),l(),p()},setLoadEvent:s,getCommonViewMetrics:function(){return a.interactionToNextPaint=d(),a}}}var Xo=3e5,Qo=3e5;function ti(t,e,r,n,o,i,a){var c,s=new Set,l=f("initial_load",mt(),a);function f(o,i,a){var c=function(t,e,r,n,o,i,a){void 0===i&&(i=vt());var c,s,l,f,h=xt(),p=new $,d={},y=0,v=ie(n),m=!0;a&&(s=a.name,l=a.service,f=a.version);t.notify(2,{id:h,name:s,startClocks:i,service:l,version:f});var g=I(G,3e3,{leading:!1}),b=g.throttled,w=g.cancel,_=Zo(t,e,r,b,o,i),x=_.setLoadEvent,E=_.stop,k=_.getCommonViewMetrics,S="initial_load"===o?Go(t,r,x,b):{stop:R,initialViewMetrics:{}},O=S.stop,L=S.initialViewMetrics,A=function(t,e,r){var n=Cn({lifeCycle:t,isChildEvent:function(t){return t.view.id===e},onChange:r});return{stop:n.stop,eventCounts:n.eventCounts}}(t,h,b),j=A.stop,T=A.eventCounts,F=C(G,Xo);function G(){w(),y+=1;var e=void 0===c?dt():c.timeStamp;t.notify(3,{customTimings:d,documentVersion:y,id:h,name:s,service:l,version:f,loadingType:o,location:v,startClocks:i,commonViewMetrics:k(),initialViewMetrics:L,duration:gt(i.timeStamp,e),isActive:void 0===c,sessionIsActive:m,eventCounts:T})}return G(),{name:s,service:l,version:f,stopObservable:p,end:function(e){var r,n,o=this;void 0===e&&(e={}),c||(c=null!==(r=e.endClocks)&&void 0!==r?r:vt(),m=null===(n=e.sessionIsActive)||void 0===n||n,t.notify(4,{endClocks:c}),N(F),E(),G(),P((function(){o.stop()}),Qo))},stop:function(){O(),j(),p.notify()},addTiming:function(t,e){if(!c){var r=function(t){return t<31536e6}(e)?e:gt(i.timeStamp,e);d[function(t){var e=t.replace(/[^a-zA-Z0-9-_.@$]/g,"_");e!==t&&u.warn("Invalid timing name: ".concat(t,", sanitized to: ").concat(e));return e}(t)]=r,b()}}}}(e,r,n,t,o,i,a);return s.add(c),c.stopObservable.subscribe((function(){s.delete(c)})),c}return e.subscribe(8,(function(){l=f("route_change",void 0,{name:l.name,service:l.service,version:l.version})})),e.subscribe(7,(function(){l.end({sessionIsActive:!1})})),e.subscribe(9,(function(t){t.reason!==_r.UNLOADING&&t.reason!==_r.PAGEHIDE||l.end()})),i&&(c=function(t){return t.subscribe((function(t){var e,r,n,o,i=t.oldLocation,a=t.newLocation;r=a,(e=i).pathname===r.pathname&&(n=r.hash,o=n.substr(1),document.getElementById(o)||ei(r.hash)===ei(e.hash))||(l.end(),l=f("route_change"))}))}(o)),{addTiming:function(t,e){void 0===e&&(e=dt()),l.addTiming(t,e)},startView:function(t,e){l.end({endClocks:e}),l=f("route_change",e,t)},stop:function(){null===c||void 0===c||c.unsubscribe(),l.end(),s.forEach((function(t){return t.stop()}))}}}function ei(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}function ri(t,e,r,n,o,i,a,c,u){return t.subscribe(3,(function(r){return t.notify(10,function(t,e,r,n,o){var i,a,c,u,s,l,f,h,p,d,y,v,m,g,b=n.getReplayStats(t.id),w=r.findFeatureFlagEvaluations(t.startClocks.relative),_=ne(Yt.PAGE_STATES),x=o.findAll(t.startClocks.relative,t.duration),E={_dd:{document_version:t.documentVersion,replay_stats:b,page_states:_?x:void 0},date:t.startClocks.timeStamp,type:"view",view:{action:{count:t.eventCounts.actionCount},frustration:{count:t.eventCounts.frustrationCount},cumulative_layout_shift:null===(i=t.commonViewMetrics.cumulativeLayoutShift)||void 0===i?void 0:i.value,cumulative_layout_shift_target_selector:null===(a=t.commonViewMetrics.cumulativeLayoutShift)||void 0===a?void 0:a.targetSelector,first_byte:ht(null===(c=t.initialViewMetrics.navigationTimings)||void 0===c?void 0:c.firstByte),dom_complete:ht(null===(u=t.initialViewMetrics.navigationTimings)||void 0===u?void 0:u.domComplete),dom_content_loaded:ht(null===(s=t.initialViewMetrics.navigationTimings)||void 0===s?void 0:s.domContentLoaded),dom_interactive:ht(null===(l=t.initialViewMetrics.navigationTimings)||void 0===l?void 0:l.domInteractive),error:{count:t.eventCounts.errorCount},first_contentful_paint:ht(t.initialViewMetrics.firstContentfulPaint),first_input_delay:ht(null===(f=t.initialViewMetrics.firstInput)||void 0===f?void 0:f.delay),first_input_time:ht(null===(h=t.initialViewMetrics.firstInput)||void 0===h?void 0:h.time),first_input_target_selector:null===(p=t.initialViewMetrics.firstInput)||void 0===p?void 0:p.targetSelector,interaction_to_next_paint:ht(null===(d=t.commonViewMetrics.interactionToNextPaint)||void 0===d?void 0:d.value),interaction_to_next_paint_target_selector:null===(y=t.commonViewMetrics.interactionToNextPaint)||void 0===y?void 0:y.targetSelector,is_active:t.isActive,name:t.name,largest_contentful_paint:ht(null===(v=t.initialViewMetrics.largestContentfulPaint)||void 0===v?void 0:v.value),largest_contentful_paint_target_selector:null===(m=t.initialViewMetrics.largestContentfulPaint)||void 0===m?void 0:m.targetSelector,load_event:ht(null===(g=t.initialViewMetrics.navigationTimings)||void 0===g?void 0:g.loadEvent),loading_time:ni(ht(t.commonViewMetrics.loadingTime)),loading_type:t.loadingType,long_task:{count:t.eventCounts.longTaskCount},resource:{count:t.eventCounts.resourceCount},time_spent:ht(t.duration),in_foreground_periods:!_&&x?Ro(x,t.duration):void 0},feature_flags:w&&!ce(w)?w:void 0,display:t.commonViewMetrics.scroll?{scroll:{max_depth:t.commonViewMetrics.scroll.maxDepth,max_depth_scroll_top:t.commonViewMetrics.scroll.maxDepthScrollTop,max_scroll_height:t.commonViewMetrics.scroll.maxScrollHeight,max_scroll_height_time:ht(t.commonViewMetrics.scroll.maxScrollHeightTime)}}:void 0,session:{has_replay:!!b||void 0,is_active:!!t.sessionIsActive&&void 0},privacy:{replay_level:e.defaultPrivacyLevel}};ce(t.customTimings)||(E.view.custom_timings=function(t,e){for(var r={},n=0,o=Object.keys(t);n<o.length;n++){var i=o[n];r[i]=e(t[i])}return r}(t.customTimings,ht));return{rawRumEvent:E,startTime:t.startClocks.relative,domainContext:{location:t.location}}}(r,e,i,c,a))})),ti(r,t,n,e,o,!e.trackViewsManually,u)}function ni(t){return it(t)&&t<0?void 0:t}var oi=st,ii=fe,ai=[];function ci(t,e,r){var n=Ie(t.sessionStoreStrategyType,e,r);ai.push((function(){return n.stop()}));var o,i=new yn(ii);function a(){return{id:n.getSession().id,trackingType:n.getSession()[e]}}return ai.push((function(){return i.stop()})),n.renewObservable.subscribe((function(){i.add(a(),yt())})),n.expireObservable.subscribe((function(){i.closeActive(yt())})),n.expandOrRenewSession(),i.add(a(),mt().relative),o=Ct(0,window,["click","touchstart","keydown","scroll"],(function(){return n.expandOrRenewSession()}),{capture:!0,passive:!0}).stop,ai.push(o),function(t,e){var r=function(){"visible"===document.visibilityState&&e()},n=Tt(t,document,"visibilitychange",r).stop;ai.push(n);var o=C(r,oi);ai.push((function(){N(o)}))}(t,(function(){return n.expandSession()})),{findActiveSession:function(t){return i.find(t)},renewObservable:n.renewObservable,expireObservable:n.expireObservable,expire:n.expire}}function ui(t,e){var r=ci(t,"rum",(function(e){return function(t,e){var r;r=function(t){return"0"===t||"1"===t||"2"===t}(e)?e:rt(t.sessionSampleRate)?rt(t.sessionReplaySampleRate)?"1":"2":"0";return{trackingType:r,isTracked:si(r)}}(t,e)}));return r.expireObservable.subscribe((function(){e.notify(7)})),r.renewObservable.subscribe((function(){e.notify(8)})),{findTrackedSession:function(e){var n=r.findActiveSession(e);if(n&&si(n.trackingType)){var o="1"===n.trackingType?2:1;return{id:n.id,plan:o,sessionReplayAllowed:2===o,longTaskAllowed:void 0!==t.trackLongTasks?t.trackLongTasks:t.oldPlansBehavior&&2===o,resourceAllowed:void 0!==t.trackResources?t.trackResources:t.oldPlansBehavior&&2===o}}},expire:r.expire,expireObservable:r.expireObservable}}function si(t){return"2"===t||"1"===t}var li=function(){function t(t,e,r){var n=this;this.request=t,this.flushController=e,this.messageBytesLimit=r,this.pushOnlyBuffer=[],this.upsertBuffer={},this.flushSubscription=this.flushController.flushObservable.subscribe((function(t){return n.flush(t)}))}return t.prototype.add=function(t){this.addOrUpdate(t)},t.prototype.upsert=function(t,e){this.addOrUpdate(t,e)},t.prototype.stop=function(){this.flushSubscription.unsubscribe()},t.prototype.flush=function(t){var e=this.pushOnlyBuffer.concat(w(this.upsertBuffer));this.pushOnlyBuffer=[],this.upsertBuffer={};var r={data:e.join("\n"),bytesCount:t.bytesCount,flushReason:t.reason};xr(t.reason)?this.request.sendOnExit(r):this.request.send(r)},t.prototype.addOrUpdate=function(t,e){var r=this.process(t),n=r.processedMessage,o=r.messageBytesCount;o>=this.messageBytesLimit?u.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB.")):(this.hasMessageFor(e)&&this.remove(e),this.push(n,o,e))},t.prototype.process=function(t){var e=B(t);return{processedMessage:e,messageBytesCount:A(e)}},t.prototype.push=function(t,e,r){var n=this.flushController.messagesCount>0?1:0;this.flushController.notifyBeforeAddMessage(e+n),void 0!==r?this.upsertBuffer[r]=t:this.pushOnlyBuffer.push(t),this.flushController.notifyAfterAddMessage()},t.prototype.remove=function(t){var e=this.upsertBuffer[t];delete this.upsertBuffer[t];var r=A(e),n=this.flushController.messagesCount>1?1:0;this.flushController.notifyAfterRemoveMessage(r+n)},t.prototype.hasMessageFor=function(t){return void 0!==t&&void 0!==this.upsertBuffer[t]},t}(),fi=3145728,hi=ut;function pi(t,e,r,n,o){0===e.transportStatus&&0===e.queuedPayloads.size()&&e.bandwidthMonitor.canHandle(t)?yi(t,e,r,{onSuccess:function(){return vi(0,e,r,n,o)},onFailure:function(){e.queuedPayloads.enqueue(t),di(e,r,n,o)}}):e.queuedPayloads.enqueue(t)}function di(t,e,r,n){2===t.transportStatus&&P((function(){yi(t.queuedPayloads.first(),t,e,{onSuccess:function(){t.queuedPayloads.dequeue(),t.currentBackoffTime=hi,vi(1,t,e,r,n)},onFailure:function(){t.currentBackoffTime=Math.min(6e4,2*t.currentBackoffTime),di(t,e,r,n)}})}),t.currentBackoffTime)}function yi(t,e,r,n){var o=n.onSuccess,i=n.onFailure;e.bandwidthMonitor.add(t),r(t,(function(r){e.bandwidthMonitor.remove(t),!function(t){return"opaque"!==t.type&&(0===t.status&&!navigator.onLine||408===t.status||429===t.status||(e=t.status,e>=500));var e}(r)?(e.transportStatus=0,o()):(e.transportStatus=e.bandwidthMonitor.ongoingRequestCount>0?1:2,t.retry={count:t.retry?t.retry.count+1:1,lastFailureStatus:r.status},i())}))}function vi(t,e,r,n,o){0===t&&e.queuedPayloads.isFull()&&!e.queueFullReported&&(o({message:"Reached max ".concat(n," events size queued for upload: ").concat(3,"MiB"),source:$r,startClocks:vt()}),e.queueFullReported=!0);var i=e.queuedPayloads;for(e.queuedPayloads=mi();i.size()>0;)pi(i.dequeue(),e,r,n,o)}function mi(){var t=[];return{bytesCount:0,enqueue:function(e){this.isFull()||(t.push(e),this.bytesCount+=e.bytesCount)},first:function(){return t[0]},dequeue:function(){var e=t.shift();return e&&(this.bytesCount-=e.bytesCount),e},size:function(){return t.length},isFull:function(){return this.bytesCount>=fi}}}function gi(t,e,r,n){var o={transportStatus:0,currentBackoffTime:hi,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(t){return 0===this.ongoingRequestCount||this.ongoingByteCount+t.bytesCount<=81920&&this.ongoingRequestCount<32},add:function(t){this.ongoingRequestCount+=1,this.ongoingByteCount+=t.bytesCount},remove:function(t){this.ongoingRequestCount-=1,this.ongoingByteCount-=t.bytesCount}},queuedPayloads:mi(),queueFullReported:!1},i=function(n,o){return function(t,e,r,n,o){var i=function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(t){return!1}}()&&n.bytesCount<r;if(i){var a=e.build("fetch",n);fetch(a,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(d((function(t){return null===o||void 0===o?void 0:o({status:t.status,type:t.type})})),d((function(){var r=e.build("xhr",n);wi(t,r,n.data,o)})))}else{var c=e.build("xhr",n);wi(t,c,n.data,o)}}(t,e,r,n,o)};return{send:function(t){pi(t,o,i,e.endpointType,n)},sendOnExit:function(n){!function(t,e,r,n){var o=!!navigator.sendBeacon&&n.bytesCount<r;if(o)try{var i=e.build("beacon",n);if(navigator.sendBeacon(i,n.data))return}catch(c){!function(t){bi||(bi=!0,gr(t))}(c)}var a=e.build("xhr",n);wi(t,a,n.data)}(t,e,r,n)}}}var bi=!1;function wi(t,e,r,n){var o=new XMLHttpRequest;o.open("POST",e,!0),Tt(t,o,"loadend",(function(){null===n||void 0===n||n({status:o.status})}),{once:!0}),o.send(r)}function _i(t){var e,r=t.messagesLimit,n=t.bytesLimit,o=t.durationLimit,i=t.pageExitObservable,a=t.sessionExpireObservable,c=i.subscribe((function(t){return h(t.reason)})),u=a.subscribe((function(){return h("session_expire")})),s=new $((function(){return function(){c.unsubscribe(),u.unsubscribe()}})),l=0,f=0;function h(t){if(0!==f){var e=f,r=l;f=0,l=0,p(),s.notify({reason:t,messagesCount:e,bytesCount:r})}}function p(){T(e),e=void 0}return{flushObservable:s,get messagesCount(){return f},notifyBeforeAddMessage:function(t){l+t>=n&&h("bytes_limit"),f+=1,l+=t,void 0===e&&(e=P((function(){h("duration_limit")}),o))},notifyAfterAddMessage:function(){f>=r?h("messages_limit"):l>=n&&h("bytes_limit")},notifyAfterRemoveMessage:function(t){l-=t,0===(f-=1)&&p()}}}function xi(t,e,r,n,o,i){var a=t.replica,c=function(t,e,r,n,o,i){var a=u(t,e.endpoint),c=r&&u(t,r.endpoint);function u(t,e){return new li(gi(t,e,t.batchBytesLimit,n),_i({messagesLimit:t.batchMessagesLimit,bytesLimit:t.batchBytesLimit,durationLimit:t.flushTimeout,pageExitObservable:o,sessionExpireObservable:i}),t.messageBytesLimit)}return{flushObservable:a.flushController.flushObservable,add:function(t,e){void 0===e&&(e=!0),a.add(t),c&&e&&c.add(r.transformMessage?r.transformMessage(t):t)},upsert:function(t,e){a.upsert(t,e),c&&c.upsert(r.transformMessage?r.transformMessage(t):t,e)},stop:function(){a.stop(),null===c||void 0===c||c.stop()}}}(t,{endpoint:t.rumEndpointBuilder},a&&{endpoint:a.rumEndpointBuilder,transformMessage:function(t){return M(t,{application:{id:a.applicationId}})}},n,o,i);return e.subscribe(11,(function(t){"view"===t.type?c.upsert(t,t.view.id):c.add(t)})),r.subscribe((function(e){return c.add(e,function(t){return t.site===Me}(t))})),c}var Ei=fe;function ki(t,e){var r=ie(e),n=new $((function(){var e=function(t,e){var r=gn(history,"pushState",{after:e}).stop,n=gn(history,"replaceState",{after:e}).stop,o=Tt(t,window,"popstate",e).stop;return{stop:function(){r(),n(),o()}}}(t,o).stop,r=function(t,e){return Tt(t,window,"hashchange",e)}(t,o).stop;return function(){e(),r()}}));function o(){if(r.href!==e.href){var t=ie(e);n.notify({newLocation:t,oldLocation:r}),r=t}}return n}var Si=fe;var Oi,Li,Ai;function ji(){0!==Oi.batchCount&&(mr("Customer data measures",Oi),Ci())}function Pi(t,e){t.sum+=e,t.min=Math.min(t.min,e),t.max=Math.max(t.max,e)}function Ti(t,e){t.sum+=e.sum,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)}function Ci(){Oi={batchCount:0,batchBytesCount:{min:1/0,max:0,sum:0},batchMessagesCount:{min:1/0,max:0,sum:0},globalContextBytes:{min:1/0,max:0,sum:0},userContextBytes:{min:1/0,max:0,sum:0},featureFlagBytes:{min:1/0,max:0,sum:0}}}function Ni(){Ai=!1,Li={globalContextBytes:{min:1/0,max:0,sum:0},userContextBytes:{min:1/0,max:0,sum:0},featureFlagBytes:{min:1/0,max:0,sum:0}}}var Ii=fe;function Ri(t,e){void 0===e&&(e=500);var r,n=new yn(Ii,4e3);i(Fi(),yt());var o=Ct(0,window,["pageshow","focus","blur","visibilitychange","resume","freeze","pagehide"],(function(t){t.isTrusted&&i(function(t){if("freeze"===t.type)return"frozen";if("pagehide"===t.type)return t.persisted?"frozen":"terminated";return Fi()}(t),t.timeStamp)}),{capture:!0}).stop;function i(t,e){void 0===e&&(e=yt()),t!==r&&(r=t,n.closeActive(e),n.add({state:r,startTime:e},e))}return{findAll:function(t,r){var o=n.findAll(t,r);if(0!==o.length){for(var i=[],a=Math.max(0,o.length-e),c=o.length-1;c>=a;c--){var u=o[c],s=gt(t,u.startTime);i.push({state:u.state,start:ht(s)})}return i}},isInActivePageStateAt:function(t){var e=n.find(t);return void 0!==e&&"active"===e.state},addPageState:i,stop:function(){o(),n.stop()}}}function Fi(){return"hidden"===document.visibilityState?"hidden":document.hasFocus()?"active":"passive"}function Gi(t,e){var r=e.session,n=e.viewContext,o=e.errorType,i=r?r.id:"no-session-id",a=[];void 0!==o&&a.push("error-type=".concat(o)),n&&(a.push("seed=".concat(n.id)),a.push("from=".concat(n.startClocks.timeStamp)));var c,u,s,l=(u=(c=t).site,s=c.subdomain||function(t){switch(t.site){case Ke:case Be:return"app";case Me:return"dd";default:return}}(c),"https://".concat(s?"".concat(s,"."):"").concat(u)),f="/rum/replay/sessions/".concat(i);return"".concat(l).concat(f,"?").concat(a.join("&"))}var Di=2,Hi=3,Ui=4,Mi=6,Ki=7,Bi=8,Wi=9,Ji=0,Vi=1,zi=2,Yi=3,qi=4,$i=11,Zi=0,Xi=1,Qi=2,ta=3,ea=4,ra=5,na=6,oa=7,ia=8,aa=0,ca=1,ua=2,sa=3,la=4,fa=5,ha=6,pa=7,da=9,ya=0,va=1;function ma(t,e){return{data:k({source:t},e),type:Hi,timestamp:dt()}}var ga={IGNORE:"ignore",HIDDEN:"hidden",ALLOW:Ze.ALLOW,MASK:Ze.MASK,MASK_USER_INPUT:Ze.MASK_USER_INPUT},ba="data-dd-privacy",wa="hidden",_a="***",xa={INPUT:!0,OUTPUT:!0,TEXTAREA:!0,SELECT:!0,OPTION:!0,DATALIST:!0,OPTGROUP:!0};function Ea(t,e){var r=Ur(t),n=r?Ea(r,e):e;return ka(Sa(t),n)}function ka(t,e){switch(e){case ga.HIDDEN:case ga.IGNORE:return e}switch(t){case ga.ALLOW:case ga.MASK:case ga.MASK_USER_INPUT:case ga.HIDDEN:case ga.IGNORE:return t;default:return e}}function Sa(t){if(Fr(t)){var e=t.getAttribute(ba);if("BASE"===t.tagName)return ga.ALLOW;if("INPUT"===t.tagName){var r=t;if("password"===r.type||"email"===r.type||"tel"===r.type)return ga.MASK;if("hidden"===r.type)return ga.MASK;var n=r.getAttribute("autocomplete");if(n&&0===n.indexOf("cc-"))return ga.MASK}return e===wa||t.classList.contains("dd-privacy-hidden")?ga.HIDDEN:"mask"===e||t.classList.contains("dd-privacy-mask")?ga.MASK:"mask-user-input"===e||t.classList.contains("dd-privacy-mask-user-input")?ga.MASK_USER_INPUT:"allow"===e||t.classList.contains("dd-privacy-allow")?ga.ALLOW:function(t){if("SCRIPT"===t.nodeName)return!0;if("LINK"===t.nodeName){var e=o("rel");return/preload|prefetch/i.test(e)&&"script"===o("as")||"shortcut icon"===e||"icon"===e}if("META"===t.nodeName){var r=o("name"),n=(e=o("rel"),o("property"));return/^msapplication-tile(image|color)$/.test(r)||"application-name"===r||"icon"===e||"apple-touch-icon"===e||"shortcut icon"===e||"keywords"===r||"description"===r||/^(og|twitter|fb):/.test(n)||/^(og|twitter):/.test(r)||"pinterest"===r||"robots"===r||"googlebot"===r||"bingbot"===r||t.hasAttribute("http-equiv")||"author"===r||"generator"===r||"framework"===r||"publisher"===r||"progid"===r||/^article:/.test(n)||/^product:/.test(n)||"google-site-verification"===r||"yandex-verification"===r||"csrf-token"===r||"p:domain_verify"===r||"verify-v1"===r||"verification"===r||"shopify-checkout-api-token"===r}function o(e){return(t.getAttribute(e)||"").toLowerCase()}return!1}(t)?ga.IGNORE:void 0}}function Oa(t,e){switch(e){case ga.MASK:case ga.HIDDEN:case ga.IGNORE:return!0;case ga.MASK_USER_INPUT:return Rr(t)?La(t.parentNode):La(t);default:return!1}}function La(t){if(!t||t.nodeType!==t.ELEMENT_NODE)return!1;var e=t;if("INPUT"===e.tagName)switch(e.type){case"button":case"color":case"reset":case"submit":return!1}return!!xa[e.tagName]}function Aa(t,e,r){var n,o=null===(n=t.parentElement)||void 0===n?void 0:n.tagName,i=t.textContent||"";if(!e||i.trim()){if("SCRIPT"===o)i=_a;else if(r===ga.HIDDEN)i=_a;else if(Oa(t,r))if("DATALIST"===o||"SELECT"===o||"OPTGROUP"===o){if(!i.trim())return}else i="OPTION"===o?_a:i.replace(/\S/g,"x");return i}}var ja=new WeakMap;function Pa(t){return ja.has(t)}function Ta(t){return ja.get(t)}function Ca(t,e){var r=t.tagName,n=t.value;if(Oa(t,e)){var o=t.type;if("INPUT"===r&&("button"===o||"submit"===o||"reset"===o))return n;if(!n||"OPTION"===r)return;return _a}return"OPTION"===r||"SELECT"===r?t.value:"INPUT"===r||"TEXTAREA"===r?n:void 0}var Na=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,Ia=/^[A-Za-z]+:|^\/\//,Ra=/^data:.*,/i;function Fa(t,e){return t.replace(Na,(function(t,r,n,o,i,a){var c=n||i||a;if(!e||!c||Ia.test(c)||Ra.test(c))return t;var u=r||o||"";return"url(".concat(u).concat(function(t,e){try{return Ge(t,e).href}catch(r){return t}}(c,e)).concat(u,")")}))}var Ga=/[^a-z1-6-_]/;function Da(t){var e=t.toLowerCase().trim();return Ga.test(e)?"div":e}function Ha(t){if(void 0!==t&&0!==t.length)return t.map((function(t){var e=t.cssRules||t.rules;return{cssRules:Array.from(e,(function(t){return t.cssText})),disabled:t.disabled||void 0,media:t.media.length>0?Array.from(t.media):void 0}}))}function Ua(t,e,r,n){if(e===ga.HIDDEN)return null;var o=t.getAttribute(r);if(e===ga.MASK&&r!==ba&&!qn.includes(r)&&r!==n.actionNameAttribute){var i=t.tagName;switch(r){case"title":case"alt":case"placeholder":return _a}if(("IMG"===i||"SOURCE"===i)&&("src"===r||"srcset"===r))return"data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==";if("A"===i&&"href"===r)return _a;if(o&&x(r,"data-"))return _a}return o&&"string"===typeof o&&o.length>1e5&&"data:"===o.slice(0,5)?"data:truncated":o}function Ma(t){if(!t)return null;var e;try{e=t.rules||t.cssRules}catch(r){}return e?Fa(Array.from(e,(null!==le&&void 0!==le?le:le=/^((?!chrome|android).)*safari/i.test(navigator.userAgent))?Ka:Ba).join(""),t.href):null}function Ka(t){if(function(t){return"selectorText"in t}(t)&&t.selectorText.includes(":")){return t.cssText.replace(/(\[[\w-]+[^\\])(:[^\]]+\])/g,"$1\\$2")}return Ba(t)}function Ba(t){return function(t){return"styleSheet"in t}(t)&&Ma(t.styleSheet)||t.cssText}function Wa(t,e){var r=function(t,e){switch(t.nodeType){case t.DOCUMENT_NODE:return function(t,e){return{type:Ji,childNodes:Va(t,e),adoptedStyleSheets:Ha(t.adoptedStyleSheets)}}(t,e);case t.DOCUMENT_FRAGMENT_NODE:return function(t,e){var r=Dr(t);r&&e.serializationContext.shadowRootsController.addShadowRoot(t);return{type:$i,childNodes:Va(t,e),isShadowRoot:r,adoptedStyleSheets:r?Ha(t.adoptedStyleSheets):void 0}}(t,e);case t.DOCUMENT_TYPE_NODE:return{type:Vi,name:(r=t).name,publicId:r.publicId,systemId:r.systemId};case t.ELEMENT_NODE:return function(t,e){var r,n=Da(t.tagName),o=(a=t,"svg"===a.tagName||a instanceof SVGElement||void 0),i=ka(Sa(t),e.parentNodePrivacyLevel);var a;if(i===ga.HIDDEN){var c=t.getBoundingClientRect(),u=c.width,s=c.height;return{type:zi,tagName:n,attributes:(r={rr_width:"".concat(u,"px"),rr_height:"".concat(s,"px")},r[ba]=wa,r),childNodes:[],isSVG:o}}if(i===ga.IGNORE)return;var l=function(t,e,r){var n;if(e===ga.HIDDEN)return{};for(var o={},i=Da(t.tagName),a=t.ownerDocument,c=0;c<t.attributes.length;c+=1){var u=t.attributes.item(c).name,s=Ua(t,e,u,r.configuration);null!==s&&(o[u]=s)}if(t.value&&("textarea"===i||"select"===i||"option"===i||"input"===i)){var l=Ca(t,e);void 0!==l&&(o.value=l)}if("option"===i&&e===ga.ALLOW){var f=t;f.selected&&(o.selected=f.selected)}if("link"===i){var h,p=Array.from(a.styleSheets).find((function(e){return e.href===t.href}));(h=Ma(p))&&p&&!ne(Yt.DISABLE_REPLAY_INLINE_CSS)&&(o._cssText=h)}"style"===i&&t.sheet&&(h=Ma(t.sheet))&&(o._cssText=h);var d,y,v=t;if("input"!==i||"radio"!==v.type&&"checkbox"!==v.type||(e===ga.ALLOW?o.checked=!!v.checked:Oa(v,e)&&delete o.checked),"audio"===i||"video"===i){var m=t;o.rr_mediaState=m.paused?"paused":"played"}var g=r.serializationContext;switch(g.status){case 0:d=Math.round(t.scrollTop),y=Math.round(t.scrollLeft),(d||y)&&g.elementsScrollPositions.set(t,{scrollTop:d,scrollLeft:y});break;case 1:g.elementsScrollPositions.has(t)&&(d=(n=g.elementsScrollPositions.get(t)).scrollTop,y=n.scrollLeft)}return y&&(o.rr_scrollLeft=y),d&&(o.rr_scrollTop=d),o}(t,i,e),f=[];if(function(t){return t.childNodes.length>0||Gr(t)}(t)&&"style"!==n){f=Va(t,e.parentNodePrivacyLevel===i&&e.ignoreWhiteSpace===("head"===n)?e:k({},e,{parentNodePrivacyLevel:i,ignoreWhiteSpace:"head"===n}))}return{type:zi,tagName:n,attributes:l,childNodes:f,isSVG:o}}(t,e);case t.TEXT_NODE:return function(t,e){var r=Aa(t,e.ignoreWhiteSpace||!1,e.parentNodePrivacyLevel);if(void 0===r)return;return{type:Yi,textContent:r}}(t,e);case t.CDATA_SECTION_NODE:return{type:qi,textContent:""}}var r}(t,e);if(!r)return null;var n=Ta(t)||Ja++,o=r;return o.id=n,function(t,e){ja.set(t,e)}(t,n),e.serializedNodeIds&&e.serializedNodeIds.add(n),o}var Ja=1;function Va(t,e){var r=[];return Hr(t,(function(t){var n=Wa(t,e);n&&r.push(n)})),r}function za(t,e,r){return Wa(t,{serializationContext:r,parentNodePrivacyLevel:e.defaultPrivacyLevel,configuration:e})}function Ya(t){return Boolean(t.changedTouches)}function qa(t){return!0===t.composed&&Gr(t.target)?t.composedPath()[0]:t.target}var $a=function(t,e){var r=window.visualViewport,n={layoutViewportX:t,layoutViewportY:e,visualViewportX:t,visualViewportY:e};return r?(!function(t){return Math.abs(t.pageTop-t.offsetTop-window.scrollY)>25||Math.abs(t.pageLeft-t.offsetLeft-window.scrollX)>25}(r)?(n.visualViewportX=Math.round(t-r.offsetLeft),n.visualViewportY=Math.round(e-r.offsetTop)):(n.layoutViewportX=Math.round(t+r.offsetLeft),n.layoutViewportY=Math.round(e+r.offsetTop)),n):n},Za=function(t){return{scale:t.scale,offsetLeft:t.offsetLeft,offsetTop:t.offsetTop,pageLeft:t.pageLeft,pageTop:t.pageTop,height:t.height,width:t.width}};function Xa(t){var e=Ya(t)?t.changedTouches[0]:t,r=e.clientX,n=e.clientY;if(window.visualViewport){var o=$a(r,n);r=o.visualViewportX,n=o.visualViewportY}if(Number.isFinite(r)&&Number.isFinite(n))return{x:r,y:n};t.isTrusted&&mr("mouse/touch event without x/y")}var Qa;var tc=((Qa={}).pointerup=aa,Qa.mousedown=ca,Qa.click=ua,Qa.contextmenu=sa,Qa.dblclick=la,Qa.focus=fa,Qa.blur=ha,Qa.touchstart=pa,Qa.touchend=da,Qa);function ec(t,e,r){void 0===r&&(r=document);var n,o=t.defaultPrivacyLevel,i=new WeakMap,a=r!==document,c=Ct(0,r,a?["change"]:["input","change"],(function(t){var e=qa(t);(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&s(e)}),{capture:!0,passive:!0}).stop;if(a)n=R;else{var u=[bn(HTMLInputElement.prototype,"value",s),bn(HTMLInputElement.prototype,"checked",s),bn(HTMLSelectElement.prototype,"value",s),bn(HTMLTextAreaElement.prototype,"value",s),bn(HTMLSelectElement.prototype,"selectedIndex",s)];n=function(){u.forEach((function(t){return t.stop()}))}}return function(){n(),c()};function s(t){var e=Ea(t,o);if(e!==ga.HIDDEN){var r,n=t.type;if("radio"===n||"checkbox"===n){if(Oa(t,e))return;r={isChecked:t.checked}}else{var i=Ca(t,e);if(void 0===i)return;r={text:i}}l(t,r);var a,c,u=t.name;"radio"===n&&u&&t.checked&&(a=document.querySelectorAll('input[type="radio"][name="'.concat(E(u),'"]')),c=function(e){e!==t&&l(e,{isChecked:!1})},Array.prototype.forEach.call(a,c))}}function l(t,r){if(Pa(t)){var n=i.get(t);n&&n.text===r.text&&n.isChecked===r.isChecked||(i.set(t,r),e(k({id:Ta(t)},r)))}}}function rc(t){for(var e=[],r=t;r.parentRule;){var n=Array.from(r.parentRule.cssRules).indexOf(r);e.unshift(n),r=r.parentRule}if(r.parentStyleSheet){var o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);return e.unshift(o),e}}function nc(t){var e=R,r=[];function n(){e(),t(r),r=[]}return{addMutations:function(t){0===r.length&&(e=function(t,e){if(window.requestIdleCallback&&window.cancelIdleCallback){var r=window.requestIdleCallback(d(t),e);return function(){return window.cancelIdleCallback(r)}}var n=window.requestAnimationFrame(d(t));return function(){return window.cancelAnimationFrame(n)}}(n,{timeout:100})),r.push.apply(r,t)},flush:n,stop:function(){e()}}}function oc(t,e,r,n){var o=Er();if(!o)return{stop:R,flush:R};var i=nc((function(n){!function(t,e,r,n){t.filter((function(t){return"childList"===t.type})).forEach((function(t){t.removedNodes.forEach((function(t){ic(t,n.removeShadowRoot)}))}));var o=t.filter((function(t){return t.target.isConnected&&function(t){for(var e=t;e;){if(!Pa(e)&&!Dr(e))return!1;e=Ur(e)}return!0}(t.target)&&Ea(t.target,r.defaultPrivacyLevel)!==ga.HIDDEN})),i=function(t,e,r){for(var n=new Set,o=new Map,i=function(t){t.addedNodes.forEach((function(t){n.add(t)})),t.removedNodes.forEach((function(e){n.has(e)||o.set(e,t.target),n.delete(e)}))},a=0,c=t;a<c.length;a++){i(c[a])}var u=Array.from(n);s=u,s.sort((function(t,e){var r=t.compareDocumentPosition(e);return r&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:r&Node.DOCUMENT_POSITION_CONTAINS||r&Node.DOCUMENT_POSITION_FOLLOWING?1:r&Node.DOCUMENT_POSITION_PRECEDING?-1:0}));var s;for(var l=new Set,f=[],h=0,p=u;h<p.length;h++){var d=p[h];if(!b(d)){var y=Ea(d.parentNode,e.defaultPrivacyLevel);if(y!==ga.HIDDEN&&y!==ga.IGNORE){var v=Wa(d,{serializedNodeIds:l,parentNodePrivacyLevel:y,serializationContext:{status:2,shadowRootsController:r},configuration:e});if(v){var m=Ur(d);f.push({nextId:w(d),parentId:Ta(m),node:v})}}}}var g=[];return o.forEach((function(t,e){Pa(e)&&g.push({parentId:Ta(t),id:Ta(e)})})),{adds:f,removes:g,hasBeenSerialized:b};function b(t){return Pa(t)&&l.has(Ta(t))}function w(t){for(var e=t.nextSibling;e;){if(Pa(e))return Ta(e);e=e.nextSibling}return null}}(o.filter((function(t){return"childList"===t.type})),r,n),a=i.adds,c=i.removes,u=i.hasBeenSerialized,s=function(t,e){for(var r,n=[],o=new Set,i=t.filter((function(t){return!o.has(t.target)&&(o.add(t.target),!0)})),a=0,c=i;a<c.length;a++){var u=c[a];if(u.target.textContent!==u.oldValue){var s=Ea(Ur(u.target),e.defaultPrivacyLevel);s!==ga.HIDDEN&&s!==ga.IGNORE&&n.push({id:Ta(u.target),value:null!==(r=Aa(u.target,!1,s))&&void 0!==r?r:null})}}return n}(o.filter((function(t){return"characterData"===t.type&&!u(t.target)})),r),l=function(t,e){for(var r=[],n=new Map,o=t.filter((function(t){var e=n.get(t.target);return!(null===e||void 0===e?void 0:e.has(t.attributeName))&&(e?e.add(t.attributeName):n.set(t.target,new Set([t.attributeName])),!0)})),i=new Map,a=0,c=o;a<c.length;a++){var u=c[a];if(u.target.getAttribute(u.attributeName)!==u.oldValue){var s=Ea(u.target,e.defaultPrivacyLevel),l=Ua(u.target,s,u.attributeName,e),f=void 0;if("value"===u.attributeName){var h=Ca(u.target,s);if(void 0===h)continue;f=h}else f="string"===typeof l?l:null;var p=i.get(u.target);p||(p={id:Ta(u.target),attributes:{}},r.push(p),i.set(u.target,p)),p.attributes[u.attributeName]=f}}return r}(o.filter((function(t){return"attributes"===t.type&&!u(t.target)})),r);if(!s.length&&!l.length&&!c.length&&!a.length)return;e({adds:a,removes:c,texts:s,attributes:l})}(n.concat(a.takeRecords()),t,e,r)})),a=new o(d(i.addMutations));return a.observe(n,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:function(){a.disconnect(),i.stop()},flush:function(){i.flush()}}}function ic(t,e){Gr(t)&&e(t.shadowRoot),Hr(t,(function(t){return ic(t,e)}))}function ac(t,e){var r,n,o,i,a,c=function(){var t=new WeakMap,e=1;return{getIdForEvent:function(r){return t.has(r)||t.set(r,e++),t.get(r)}}}(),u=oc(e.mutationCb,e.configuration,e.shadowRootsController,document),s=(r=e.mousemoveCb,n=I((function(t){var e=qa(t);if(Pa(e)){var n=Xa(t);if(!n)return;var o={id:Ta(e),timeOffset:0,x:n.x,y:n.y};r([o],Ya(t)?na:Xi)}}),50,{trailing:!1}).throttled,Ct(0,document,["mousemove","touchmove"],n,{capture:!0,passive:!0}).stop),l=function(t,e,r){return Ct(0,document,Object.keys(tc),(function(n){var o=qa(n);if(Ea(o,t.defaultPrivacyLevel)!==ga.HIDDEN&&Pa(o)){var i,a=Ta(o),c=tc[n.type];if(c!==ha&&c!==fa){var u=Xa(n);if(!u)return;i={id:a,type:c,x:u.x,y:u.y}}else i={id:a,type:c};var s=k({id:r.getIdForEvent(n)},ma(Qi,i));e(s)}}),{capture:!0,passive:!0}).stop}(t,e.mouseInteractionCb,c),f=function(t,e,r,n){var o=I((function(t){var o=qa(t);if(o&&Ea(o,r)!==ga.HIDDEN&&Pa(o)){var i=Ta(o),a=o===document?{scrollTop:Vo(),scrollLeft:Jo()}:{scrollTop:Math.round(o.scrollTop),scrollLeft:Math.round(o.scrollLeft)};n.set(o,a),e({id:i,x:a.scrollLeft,y:a.scrollTop})}}),100).throttled;return Tt(t,document,"scroll",o,{capture:!0,passive:!0}).stop}(t,e.scrollCb,e.configuration.defaultPrivacyLevel,e.elementsScrollPositions),h=function(t,e){return zo(t).subscribe(e).unsubscribe}(t,e.viewportResizeCb),p=ec(t,e.inputCb),d=(o=e.mediaInteractionCb,i=e.configuration.defaultPrivacyLevel,Ct(0,document,["play","pause"],(function(t){var e=qa(t);e&&Ea(e,i)!==ga.HIDDEN&&Pa(e)&&o({id:Ta(e),type:"play"===t.type?ya:va})}),{capture:!0,passive:!0}).stop),y=function(t){function e(t,e){t&&Pa(t.ownerNode)&&e(Ta(t.ownerNode))}var r=[gn(CSSStyleSheet.prototype,"insertRule",{before:function(r,n){e(this,(function(e){return t({id:e,adds:[{rule:r,index:n}]})}))}}),gn(CSSStyleSheet.prototype,"deleteRule",{before:function(r){e(this,(function(e){return t({id:e,removes:[{index:r}]})}))}})];function n(n){r.push(gn(n.prototype,"insertRule",{before:function(r,n){var o=this;e(this.parentStyleSheet,(function(e){var i=rc(o);i&&(i.push(n||0),t({id:e,adds:[{rule:r,index:i}]}))}))}}),gn(n.prototype,"deleteRule",{before:function(r){var n=this;e(this.parentStyleSheet,(function(e){var o=rc(n);o&&(o.push(r),t({id:e,removes:[{index:o}]}))}))}}))}return"undefined"!==typeof CSSGroupingRule?n(CSSGroupingRule):(n(CSSMediaRule),n(CSSSupportsRule)),function(){return r.forEach((function(t){return t.stop()}))}}(e.styleSheetCb),v=(a=e.focusCb,Ct(0,window,["focus","blur"],(function(){a({has_focus:document.hasFocus()})})).stop),m=function(t,e){var r=window.visualViewport;if(!r)return R;var n=I((function(){e(Za(r))}),200,{trailing:!1}),o=n.throttled,i=n.cancel,a=Ct(0,r,["resize","scroll"],o,{capture:!0,passive:!0}).stop;return function(){a(),i()}}(0,e.visualViewportResizeCb),g=function(t,e,r){return t.subscribe(10,(function(t){var n,o,i;"action"===t.rawRumEvent.type&&"click"===t.rawRumEvent.action.type&&(null===(o=null===(n=t.rawRumEvent.action.frustration)||void 0===n?void 0:n.type)||void 0===o?void 0:o.length)&&"events"in t.domainContext&&(null===(i=t.domainContext.events)||void 0===i?void 0:i.length)&&e({timestamp:t.rawRumEvent.date,type:Wi,data:{frustrationTypes:t.rawRumEvent.action.frustration.type,recordIds:t.domainContext.events.map((function(t){return r.getIdForEvent(t)}))}})})).unsubscribe}(e.lifeCycle,e.frustrationCb,c);return{flush:function(){u.flush()},stop:function(){u.stop(),s(),l(),f(),h(),p(),d(),y(),v(),m(),g()}}}function cc(t){var e=t.emit,r=t.configuration;if(!e)throw new Error("emit function is required");var n,o=(n=new WeakMap,{set:function(t,e){(t!==document||document.scrollingElement)&&n.set(t===document?document.scrollingElement:t,e)},get:function(t){return n.get(t)},has:function(t){return n.has(t)}}),i=function(t){e(ma(Zi,t))},a=function(t){return e(ma(ra,t))},c=function(t,e){var r=e.mutationCb,n=e.inputCb,o=new Map,i={addShadowRoot:function(e){var a=oc(r,t,i,e),c=a.stop,u=a.flush,s=ec(t,n,e);o.set(e,{flush:u,stop:function(){c(),s()}})},removeShadowRoot:function(t){var e=o.get(t);e&&(e.stop(),o.delete(t))},stop:function(){o.forEach((function(t){return(0,t.stop)()}))},flush:function(){o.forEach((function(t){return(0,t.flush)()}))}};return i}(r,{mutationCb:i,inputCb:a}),u=function(t,n){void 0===t&&(t=dt()),void 0===n&&(n={status:0,elementsScrollPositions:o,shadowRootsController:c});var i=Yo(),a=i.width,u=i.height;e({data:{height:u,href:window.location.href,width:a},type:Ui,timestamp:t}),e({data:{has_focus:document.hasFocus()},type:Mi,timestamp:t}),e({data:{node:za(document,r,n),initialOffset:{left:Jo(),top:Vo()}},type:Di,timestamp:t}),window.visualViewport&&e({data:Za(window.visualViewport),type:Bi,timestamp:t})};u();var s=ac(r,{lifeCycle:t.lifeCycle,configuration:r,elementsScrollPositions:o,inputCb:a,mediaInteractionCb:function(t){return e(ma(oa,t))},mouseInteractionCb:function(t){return e(t)},mousemoveCb:function(t,r){return e(ma(r,{positions:t}))},mutationCb:i,scrollCb:function(t){return e(ma(ta,t))},styleSheetCb:function(t){return e(ma(ia,t))},viewportResizeCb:function(t){return e(ma(ea,t))},frustrationCb:function(t){return e(t)},focusCb:function(t){return e({data:t,type:Mi,timestamp:dt()})},visualViewportResizeCb:function(t){e({data:t,type:Bi,timestamp:dt()})},shadowRootsController:c}),l=s.stop,f=s.flush;function h(){c.flush(),f()}return{stop:function(){c.stop(),l()},takeSubsequentFullSnapshot:function(t){h(),u(t,{shadowRootsController:c,status:1,elementsScrollPositions:o})},flushMutations:h,shadowRootsController:c}}var uc;function sc(t){return lc(t).segments_count}function lc(t){var e;return uc||(uc=new Map),uc.has(t)?e=uc.get(t):(e={records_count:0,segments_count:0,segments_total_raw_size:0},uc.set(t,e),uc.size>10&&function(){if(!uc)return;if(uc.keys)uc.delete(uc.keys().next().value);else{var t=!0;uc.forEach((function(e,r){t&&(uc.delete(r),t=!1)}))}}()),e}var fc=function(){function t(t,e,r){this.encoder=t;var n=e.view.id;this.metadata=k({start:1/0,end:-1/0,creation_reason:r,records_count:0,has_full_snapshot:!1,index_in_view:sc(n),source:"browser"},e),function(t){lc(t).segments_count+=1}(n)}return t.prototype.addRecord=function(t,e){var r;this.metadata.start=Math.min(this.metadata.start,t.timestamp),this.metadata.end=Math.max(this.metadata.end,t.timestamp),this.metadata.records_count+=1,(r=this.metadata).has_full_snapshot||(r.has_full_snapshot=t.type===Di),sr("record",{record:t,segment:this.metadata}),lc(this.metadata.view.id).records_count+=1;var n=1===this.metadata.records_count?'{"records":[':",";this.encoder.write(n+JSON.stringify(t),e)},t.prototype.flush=function(t){var e=this;if(0===this.metadata.records_count)throw new Error("Empty segment flushed");this.encoder.write("],".concat(JSON.stringify(this.metadata).slice(1),"\n"),(function(){var r,n;r=e.metadata.view.id,n=e.encoder.rawBytesCount,lc(r).segments_total_raw_size+=n,t(e.metadata)})),this.encoder.reset()},t}(),hc=6e4;function pc(t,e,r,n,o,i){return function(t,e,r,n){var o={status:0,nextSegmentCreationReason:"init"},i=t.subscribe(2,(function(){c("view_change")})).unsubscribe,a=t.subscribe(9,(function(t){c(t.reason)})).unsubscribe;function c(t){1===o.status&&(o.segment.flush((function(e){var o=function(t,e,r){var n=new FormData;n.append("segment",new Blob([t],{type:"application/octet-stream"}),"".concat(e.session.id,"-").concat(e.start));var o=k({raw_segment_size:r,compressed_segment_size:t.byteLength},e),i=JSON.stringify(o);return n.append("event",new Blob([i],{type:"application/json"})),{data:n,bytesCount:t.byteLength}}(n.encodedBytes,e,n.rawBytesCount);xr(t)?r.sendOnExit(o):r.send(o)})),T(o.expirationTimeoutId)),o="stop"!==t?{status:0,nextSegmentCreationReason:t}:{status:2}}return{addRecord:function(t){if(2!==o.status){if(0===o.status){var r=e();if(!r)return;o={status:1,segment:new fc(n,r,o.nextSegmentCreationReason),expirationTimeoutId:P((function(){c("segment_duration_limit")}),3e4)}}var i=o.segment;i.addRecord(t,(function(){1===o.status&&o.segment===i&&n.encodedBytesCount>hc&&c("segment_bytes_limit")}))}},stop:function(){c("stop"),i(),a()}}}(t,(function(){return function(t,e,r){var n=e.findTrackedSession(),o=r.findView();if(!n||!o)return;return{application:{id:t},session:{id:n.id},view:{id:o.id}}}(e.applicationId,r,n)}),o,i)}function dc(){return"function"===typeof Array.from&&"function"===typeof CSSSupportsRule&&"function"===typeof URL.createObjectURL&&"forEach"in NodeList.prototype}function yc(t,e,r,n){var o=e.findTrackedSession(),i=function(t,e){if(!dc())return"browser-not-supported";if(!t)return"rum-not-tracked";if(!t.sessionReplayAllowed)return"incorrect-session-plan";if(!e)return"replay-not-started"}(o,n);return Gi(t,{viewContext:r.findView(),errorType:i,session:o})}function vc(t,e,r){var n,o=0,i=[],a=0,c=[],u=Tt(t,e,"message",(function(t){var e=t.data;if("wrote"===e.type&&e.streamId===r){var a=c.shift();a&&a.id===e.id?(0===e.id?(o=e.additionalBytesCount,i=[e.result]):(o+=e.additionalBytesCount,i.push(e.result)),n=e.trailer,a.callback()):(u(),mr("Worker responses received out of order."))}})).stop;return{get encodedBytes(){return i.length?function(t){for(var e=t.reduce((function(t,e){return t+e.length}),0),r=new Uint8Array(e),n=0,o=0,i=t;o<i.length;o++){var a=i[o];r.set(a,n),n+=a.length}return r}(i.concat(n)):new Uint8Array(0)},get encodedBytesCount(){return i.length?i.reduce((function(t,e){return t+e.length}),0)+n.length:0},get rawBytesCount(){return o},write:function(t,n){e.postMessage({action:"write",id:a,data:t,streamId:r}),c.push({id:a,callback:n}),a+=1},reset:function(){e.postMessage({action:"reset",streamId:r}),a=0},stop:function(){u()}}}function mc(t){return new Worker(t.workerUrl||URL.createObjectURL(new Blob(['!function(){"use strict";function t(t){for(var e=t.reduce((function(t,e){return t+e.length}),0),a=new Uint8Array(e),n=0,r=0,i=t;r<i.length;r++){var s=i[r];a.set(s,n),n+=s.length}return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,n=286,r=30,i=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);e(o);var d=new Array(60);e(d);var u=new Array(512);e(u);var f=new Array(256);e(f);var c=new Array(29);e(c);var p,g,w,v=new Array(r);function b(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(v);var y=function(t){return t<256?u[t]:u[256+(t>>>7)]},k=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},z=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,k(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},x=function(t,e,a){z(t,a[2*e],a[2*e+1])},A=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},E=function(t,e,a){var n,r,s=new Array(16),_=0;for(n=1;n<=i;n++)s[n]=_=_+a[n-1]<<1;for(r=0;r<=e;r++){var h=t[2*r+1];0!==h&&(t[2*r]=A(s[h]++,h))}},Z=function(t){var e;for(e=0;e<n;e++)t.dyn_ltree[2*e]=0;for(e=0;e<r;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},U=function(t){t.bi_valid>8?k(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},R=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&S(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!S(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},L=function(t,e,n){var r,i,h,l,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?x(t,i,e):(h=f[i],x(t,h+a+1,e),0!==(l=s[h])&&(i-=c[h],z(t,i,l)),r--,h=y(r),x(t,h,n),0!==(l=_[h])&&(r-=v[h],z(t,r,l)))}while(o<t.last_lit);x(t,256,e)},F=function(t,e){var a,n,r,s=e.dyn_tree,_=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<l;a++)0!==s[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):s[2*a+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=o<2?++o:0)]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=_[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;a>=1;a--)R(t,s,a);r=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],R(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,s[2*r]=s[2*a]+s[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,s[2*a+1]=s[2*n+1]=r,t.heap[1]=r++,R(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,s,_,h,l=e.dyn_tree,o=e.max_code,d=e.stat_desc.static_tree,u=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;s<=i;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(s=l[2*l[2*(n=t.heap[a])+1]+1]+1)>p&&(s=p,g++),l[2*n+1]=s,n>o||(t.bl_count[s]++,_=0,n>=c&&(_=f[n-c]),h=l[2*n],t.opt_len+=h*(s+_),u&&(t.static_len+=h*(d[2*n+1]+_)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)(r=t.heap[--a])>o||(l[2*r+1]!==s&&(t.opt_len+=(s-l[2*r+1])*l[2*r],l[2*r+1]=s),n--)}}(t,e),E(s,o,t.bl_count)},T=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++_<h&&r===s||(_<l?t.bl_tree[2*r]+=_:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):_<=10?t.bl_tree[34]++:t.bl_tree[36]++,_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4))},I=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++_<h&&r===s)){if(_<l)do{x(t,r,t.bl_tree)}while(0!=--_);else 0!==r?(r!==i&&(x(t,r,t.bl_tree),_--),x(t,16,t.bl_tree),z(t,_-3,2)):_<=10?(x(t,17,t.bl_tree),z(t,_-3,3)):(x(t,18,t.bl_tree),z(t,_-11,7));_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4)}},N=!1,O=function(t,e,a,n){z(t,0+(n?1:0),3),function(t,e,a,n){U(t),n&&(k(t,a),k(t,~a)),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a,!0)},D=function(t,e,n,r){var i,s,_=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),F(t,t.l_desc),F(t,t.d_desc),_=function(t){var e;for(T(t,t.dyn_ltree,t.l_desc.max_code),T(t,t.dyn_dtree,t.d_desc.max_code),F(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?O(t,e,n,r):4===t.strategy||s===i?(z(t,2+(r?1:0),3),L(t,o,d)):(z(t,4+(r?1:0),3),function(t,e,a,n){var r;for(z(t,e-257,5),z(t,a-1,5),z(t,n-4,4),r=0;r<n;r++)z(t,t.bl_tree[2*l[r]+1],3);I(t,t.dyn_ltree,e-1),I(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,_+1),L(t,t.dyn_ltree,t.dyn_dtree)),Z(t),r&&U(t)},B={_tr_init:function(t){N||(!function(){var t,e,a,l,m,y=new Array(16);for(a=0,l=0;l<28;l++)for(c[l]=a,t=0;t<1<<s[l];t++)f[a++]=l;for(f[a-1]=l,m=0,l=0;l<16;l++)for(v[l]=m,t=0;t<1<<_[l];t++)u[m++]=l;for(m>>=7;l<r;l++)for(v[l]=m<<7,t=0;t<1<<_[l]-7;t++)u[256+m++]=l;for(e=0;e<=i;e++)y[e]=0;for(t=0;t<=143;)o[2*t+1]=8,t++,y[8]++;for(;t<=255;)o[2*t+1]=9,t++,y[9]++;for(;t<=279;)o[2*t+1]=7,t++,y[7]++;for(;t<=287;)o[2*t+1]=8,t++,y[8]++;for(E(o,287,y),t=0;t<r;t++)d[2*t+1]=5,d[2*t]=A(t,5);p=new b(o,s,257,n,i),g=new b(d,_,0,r,i),w=new b(new Array(0),h,0,19,7)}(),N=!0),t.l_desc=new m(t.dyn_ltree,p),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,Z(t)},_tr_stored_block:O,_tr_flush_block:D,_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+a+1)]++,t.dyn_dtree[2*y(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){z(t,2,3),x(t,256,o),function(t){16===t.bi_valid?(k(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},C=function(t,e,a,n){for(var r=65535&t|0,i=t>>>16&65535|0,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16|0},H=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),M=function(t,e,a,n){var r=H,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},Y={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},K={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},P=B._tr_init,j=B._tr_stored_block,G=B._tr_flush_block,X=B._tr_tally,W=B._tr_align,q=K.Z_NO_FLUSH,J=K.Z_PARTIAL_FLUSH,Q=K.Z_FULL_FLUSH,V=K.Z_FINISH,$=K.Z_BLOCK,tt=K.Z_OK,et=K.Z_STREAM_END,at=K.Z_STREAM_ERROR,nt=K.Z_DATA_ERROR,rt=K.Z_BUF_ERROR,it=K.Z_DEFAULT_COMPRESSION,st=K.Z_FILTERED,_t=K.Z_HUFFMAN_ONLY,ht=K.Z_RLE,lt=K.Z_FIXED,ot=K.Z_DEFAULT_STRATEGY,dt=K.Z_UNKNOWN,ut=K.Z_DEFLATED,ft=258,ct=262,pt=103,gt=113,wt=666,vt=function(t,e){return t.msg=Y[e],e},bt=function(t){return(t<<1)-(t>4?9:0)},mt=function(t){for(var e=t.length;--e>=0;)t[e]=0},yt=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},kt=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},zt=function(t,e){G(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,kt(t.strm)},xt=function(t,e){t.pending_buf[t.pending++]=e},At=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Et=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,_=t.nice_match,h=t.strstart>t.w_size-ct?t.strstart-(t.w_size-ct):0,l=t.window,o=t.w_mask,d=t.prev,u=t.strstart+ft,f=l[i+s-1],c=l[i+s];t.prev_length>=t.good_match&&(r>>=2),_>t.lookahead&&(_=t.lookahead);do{if(l[(a=e)+s]===c&&l[a+s-1]===f&&l[a]===l[i]&&l[++a]===l[i+1]){i+=2,a++;do{}while(l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&i<u);if(n=ft-(u-i),i=u-ft,n>s){if(t.match_start=e,s=n,n>=_)break;f=l[i+s-1],c=l[i+s]}}}while((e=d[e&o])>h&&0!=--r);return s<=t.lookahead?s:t.lookahead},Zt=function(t){var e,a,n,r,i,s,_,h,l,o,d=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-ct)){t.window.set(t.window.subarray(d,d+d),0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--a);e=a=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--a);r+=d}if(0===t.strm.avail_in)break;if(s=t.strm,_=t.window,h=t.strstart+t.lookahead,l=r,o=void 0,(o=s.avail_in)>l&&(o=l),a=0===o?0:(s.avail_in-=o,_.set(s.input.subarray(s.next_in,s.next_in+o),h),1===s.state.wrap?s.adler=C(s.adler,_,o,h):2===s.state.wrap&&(s.adler=M(s.adler,_,o,h)),s.next_in+=o,s.total_in+=o,o),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=yt(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=yt(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ct&&0!==t.strm.avail_in)},Ut=function(t,e){for(var a,n;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a)),t.match_length>=3)if(n=X(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=yt(t,t.ins_h,t.window[t.strstart+1]);else n=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2},St=function(t,e){for(var a,n,r;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a),t.match_length<=5&&(t.strategy===st||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=X(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(zt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=X(t,0,t.window[t.strstart-1]))&&zt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=X(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2};function Rt(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var Lt=[new Rt(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Zt(t),0===t.lookahead&&e===q)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,zt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-ct&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(zt(t,!1),t.strm.avail_out),1)})),new Rt(4,4,8,4,Ut),new Rt(4,5,16,8,Ut),new Rt(4,6,32,32,Ut),new Rt(4,4,16,16,St),new Rt(8,16,32,32,St),new Rt(8,16,128,128,St),new Rt(8,32,128,256,St),new Rt(32,128,258,1024,St),new Rt(32,258,258,4096,St)];function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ut,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Tt=function(t){if(!t||!t.state)return vt(t,at);t.total_in=t.total_out=0,t.data_type=dt;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:gt,t.adler=2===e.wrap?0:1,e.last_flush=q,P(e),tt},It=function(t){var e,a=Tt(t);return a===tt&&((e=t.state).window_size=2*e.w_size,mt(e.head),e.max_lazy_match=Lt[e.level].max_lazy,e.good_match=Lt[e.level].good_length,e.nice_match=Lt[e.level].nice_length,e.max_chain_length=Lt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),a},Nt=function(t,e,a,n,r,i){if(!t)return at;var s=1;if(e===it&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||a!==ut||n<8||n>15||e<0||e>9||i<0||i>lt)return vt(t,at);8===n&&(n=9);var _=new Ft;return t.state=_,_.strm=t,_.wrap=s,_.gzhead=null,_.w_bits=n,_.w_size=1<<_.w_bits,_.w_mask=_.w_size-1,_.hash_bits=r+7,_.hash_size=1<<_.hash_bits,_.hash_mask=_.hash_size-1,_.hash_shift=~~((_.hash_bits+3-1)/3),_.window=new Uint8Array(2*_.w_size),_.head=new Uint16Array(_.hash_size),_.prev=new Uint16Array(_.w_size),_.lit_bufsize=1<<r+6,_.pending_buf_size=4*_.lit_bufsize,_.pending_buf=new Uint8Array(_.pending_buf_size),_.d_buf=1*_.lit_bufsize,_.l_buf=3*_.lit_bufsize,_.level=e,_.strategy=i,_.method=a,It(t)},Ot={deflateInit:function(t,e){return Nt(t,e,ut,15,8,ot)},deflateInit2:Nt,deflateReset:It,deflateResetKeep:Tt,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?at:(t.state.gzhead=e,tt):at},deflate:function(t,e){var a,n;if(!t||!t.state||e>$||e<0)return t?vt(t,at):at;var r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===wt&&e!==V)return vt(t,0===t.avail_out?rt:at);r.strm=t;var i=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,xt(r,31),xt(r,139),xt(r,8),r.gzhead?(xt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),xt(r,255&r.gzhead.time),xt(r,r.gzhead.time>>8&255),xt(r,r.gzhead.time>>16&255),xt(r,r.gzhead.time>>24&255),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(xt(r,255&r.gzhead.extra.length),xt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=M(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,3),r.status=gt);else{var s=ut+(r.w_bits-8<<4)<<8;s|=(r.strategy>=_t||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=gt,At(r,s),0!==r.strstart&&(At(r,t.adler>>>16),At(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending!==r.pending_buf_size));)xt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.status=pt)}else r.status=pt;if(r.status===pt&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&kt(t),r.pending+2<=r.pending_buf_size&&(xt(r,255&t.adler),xt(r,t.adler>>8&255),t.adler=0,r.status=gt)):r.status=gt),0!==r.pending){if(kt(t),0===t.avail_out)return r.last_flush=-1,tt}else if(0===t.avail_in&&bt(e)<=bt(i)&&e!==V)return vt(t,rt);if(r.status===wt&&0!==t.avail_in)return vt(t,rt);if(0!==t.avail_in||0!==r.lookahead||e!==q&&r.status!==wt){var _=r.strategy===_t?function(t,e){for(var a;;){if(0===t.lookahead&&(Zt(t),0===t.lookahead)){if(e===q)return 1;break}if(t.match_length=0,a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):r.strategy===ht?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=ft){if(Zt(t),t.lookahead<=ft&&e===q)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+ft;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=ft-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=X(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):Lt[r.level].func(r,e);if(3!==_&&4!==_||(r.status=wt),1===_||3===_)return 0===t.avail_out&&(r.last_flush=-1),tt;if(2===_&&(e===J?W(r):e!==$&&(j(r,0,0,!1),e===Q&&(mt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),kt(t),0===t.avail_out))return r.last_flush=-1,tt}return e!==V?tt:r.wrap<=0?et:(2===r.wrap?(xt(r,255&t.adler),xt(r,t.adler>>8&255),xt(r,t.adler>>16&255),xt(r,t.adler>>24&255),xt(r,255&t.total_in),xt(r,t.total_in>>8&255),xt(r,t.total_in>>16&255),xt(r,t.total_in>>24&255)):(At(r,t.adler>>>16),At(r,65535&t.adler)),kt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?tt:et)},deflateEnd:function(t){if(!t||!t.state)return at;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==pt&&e!==gt&&e!==wt?vt(t,at):(t.state=null,e===gt?vt(t,nt):tt)},deflateSetDictionary:function(t,e){var a=e.length;if(!t||!t.state)return at;var n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return at;if(1===r&&(t.adler=C(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(mt(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,_=t.next_in,h=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,Zt(n);n.lookahead>=3;){var l=n.strstart,o=n.lookahead-2;do{n.ins_h=yt(n,n.ins_h,n.window[l+3-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++}while(--o);n.strstart=l,n.lookahead=2,Zt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=_,t.input=h,t.avail_in=s,n.wrap=r,tt},deflateInfo:"pako deflate (from Nodeca project)"};for(var Dt=new Uint8Array(256),Bt=0;Bt<256;Bt++)Dt[Bt]=Bt>=252?6:Bt>=248?5:Bt>=240?4:Bt>=224?3:Bt>=192?2:1;Dt[254]=Dt[254]=1;var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ht=Object.prototype.toString,Mt=K.Z_NO_FLUSH,Yt=K.Z_SYNC_FLUSH,Kt=K.Z_FULL_FLUSH,Pt=K.Z_FINISH,jt=K.Z_OK,Gt=K.Z_STREAM_END,Xt=K.Z_DEFAULT_COMPRESSION,Wt=K.Z_DEFAULT_STRATEGY,qt=K.Z_DEFLATED;function Jt(){this.options={level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt};var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;var e=Ot.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==jt)throw new Error(Y[e]);if(t.header&&Ot.deflateSetHeader(this.strm,t.header),t.dictionary){var a;if(a="[object ArrayBuffer]"===Ht.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=Ot.deflateSetDictionary(this.strm,a))!==jt)throw new Error(Y[e]);this._dict_set=!0}}function Qt(t,e,a){try{t.postMessage({type:"errored",error:e,streamId:a})}catch(n){t.postMessage({type:"errored",error:String(e),streamId:a})}}function Vt(t){var e=t.strm.adler;return new Uint8Array([3,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e])}Jt.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?Pt:Mt,"[object ArrayBuffer]"===Ht.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(n===Yt||n===Kt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if((a=Ot.deflate(r,n))===Gt)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=Ot.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===jt;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===jt&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,_=t.length;i<_;i++){var h=t[i];r.set(h,s),s+=h.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(e){void 0===e&&(e=self);try{var a=new Map;e.addEventListener("message",(function(n){try{var r=function(e,a){switch(a.action){case"init":return{type:"initialized",version:"4.50.1"};case"write":var n=e.get(a.streamId);n||(n=new Jt,e.set(a.streamId,n));var r=n.chunks.length,i=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var e,a,n,r,i,s=t.length,_=0;for(r=0;r<s;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),_+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(_),i=0,r=0;i<_;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e}(a.data);return n.push(i,K.Z_SYNC_FLUSH),{type:"wrote",id:a.id,streamId:a.streamId,result:t(n.chunks.slice(r)),trailer:Vt(n),additionalBytesCount:i.length};case"reset":e.delete(a.streamId)}}(a,n.data);r&&e.postMessage(r)}catch(t){Qt(e,t,n.data&&"streamId"in n.data?n.data.streamId:void 0)}}))}catch(t){Qt(e,t)}}()}();'])))}var gc={status:0};function bc(t,e,r,n){switch(void 0===n&&(n=mc),0===gc.status&&function(t,e,r){void 0===r&&(r=mc);try{var n=r(t),o=Tt(t,n,"error",(function(r){_c(t,e,r)})).stop,i=Tt(t,n,"message",(function(r){var n,o=r.data;"errored"===o.type?_c(t,e,o.error,o.streamId):"initialized"===o.type&&(n=o.version,1===gc.status&&(gc={status:3,worker:gc.worker,stop:gc.stop,version:n}))})).stop;n.postMessage({action:"init"}),P((function(){return function(t){1===gc.status&&(u.error("".concat(t," failed to start: a timeout occurred while initializing the Worker")),gc.initializationFailureCallbacks.forEach((function(t){return t()})),gc={status:2})}(e)}),1e4),gc={status:1,worker:n,stop:function(){o(),i()},initializationFailureCallbacks:[]}}catch(a){_c(t,e,a)}}(t,e,n),gc.status){case 1:return gc.initializationFailureCallbacks.push(r),gc.worker;case 3:return gc.worker}}function wc(){return gc.status}function _c(t,e,r,n){if(1===gc.status||0===gc.status){if(u.error("".concat(e," failed to start: an error occurred while creating the Worker:"),r),r instanceof Event||r instanceof Error&&(m(i=r.message,"Content Security Policy")||m(i,"requires 'TrustedScriptURL'"))){var o=void 0;o=t.workerUrl?"Please make sure the Worker URL ".concat(t.workerUrl," is correct and CSP is correctly configured."):"Please make sure CSP is correctly configured.",u.error("".concat(o," See documentation at https://docs.datadoghq.com/integrations/content_security_policy_logs/#use-csp-with-real-user-monitoring-and-session-replay"))}else gr(r);1===gc.status&&gc.initializationFailureCallbacks.forEach((function(t){return t()})),gc={status:2}}else gr(r,{worker_version:3===gc.status&&gc.version,stream_id:n});var i}var xc,Ec,kc,Sc,Oc=function(t,e,r){var n=(void 0===r?{}:r).ignoreInitIfSyntheticsWillInjectRum,o=void 0===n||n,i=!1,a=tt(2),c=tt(1),s=function(){},l=function(){},f=R,h=function(){},v=new et,m=function(t,e){void 0===e&&(e=dt()),v.add((function(){return m(t,e)}))},g=function(t,e){void 0===e&&(e=vt()),v.add((function(){return g(t,e)}))},b=function(t,r){void 0===r&&(r=cr(a,c,e)),v.add((function(){return b(t,r)}))},w=function(t,r){void 0===r&&(r=cr(a,c,e)),v.add((function(){return w(t,r)}))},_=function(t,e){v.add((function(){return _(t,e)}))};function x(r,n,o){if(r.storeContextsAcrossPages){var i=a.getContext();(a=Rt(n,"rum",2)).setContext(M(a.getContext(),i));var u=c.getContext();(c=Rt(n,"rum",1)).setContext(M(c.getContext(),u))}var l=t(r,n,e,a,c,o);h=function(){return e.getSessionReplayLink(n,l.session,l.viewContexts)},g=l.startView,b=l.addAction,w=l.addError,m=l.addTiming,_=l.addFeatureFlagEvaluation,s=l.getInternalContext,f=l.stopSession,v.drain(),e.onRumStart(l.lifeCycle,n,l.session,l.viewContexts)}var E,S,O=d((function(t){var e="object"===ur(t)?t:{name:t};g(e)}));return E={init:d((function(t){if(t){if(l=function(){return U(t)},!o||!At()){var e=Pt();if(e&&(t=function(t){return k({},t,{applicationId:"00000000-aaaa-0000-aaaa-000000000000",clientToken:"empty",sessionSampleRate:100})}(t)),function(t){return!i||(t.silentMultipleInit||u.error("DD_RUM is already initialized."),!1)}(t)){var r=ir(t);if(r)if(e||r.sessionStoreStrategyType){if(r.trackViewsManually){var n=v;v=new et,g=function(e){x(t,r,e)},n.drain()}else x(t,r);i=!0}else u.warn("No storage available for session. We will not send any data.")}}}else u.error("Missing configuration")})),addRumGlobalContext:d((function(t,e){return a.add(t,e)})),setGlobalContextProperty:d((function(t,e){return a.setContextProperty(t,e)})),removeRumGlobalContext:d((function(t){return a.remove(t)})),removeGlobalContextProperty:d((function(t){return a.removeContextProperty(t)})),getRumGlobalContext:d((function(){return a.get()})),getGlobalContext:d((function(){return a.getContext()})),setRumGlobalContext:d((function(t){return a.set(t)})),setGlobalContext:d((function(t){return a.setContext(t)})),clearGlobalContext:d((function(){return a.clearContext()})),getInternalContext:d((function(t){return s(t)})),getInitConfiguration:d((function(){return l()})),addAction:d((function(t,e){b({name:V(t),context:V(e),startClocks:vt(),type:"custom"})})),addError:function(t,e){var r=te();y((function(){w({error:t,handlingStack:r,context:V(e),startClocks:vt()})}))},addTiming:d((function(t,e){m(V(t),e)})),setUser:d((function(t){(function(t){var e="object"===G(t);return e||u.error("Unsupported user:",t),e})(t)&&c.setContext(ee(t))})),getUser:d((function(){return c.getContext()})),setUserProperty:d((function(t,e){var r,n=ee((r={},r[t]=e,r))[t];c.setContextProperty(t,n)})),removeUserProperty:d((function(t){return c.removeContextProperty(t)})),removeUser:d((function(){return c.clearContext()})),clearUser:d((function(){return c.clearContext()})),startView:O,stopSession:d((function(){f()})),startSessionReplayRecording:d(e.start),stopSessionReplayRecording:d(e.stop),addFeatureFlagEvaluation:d((function(t,e){_(V(t),V(e))})),getSessionReplayLink:d((function(){return h()}))},S=k({version:"4.50.1",onReady:function(t){t()}},E),Object.defineProperty(S,"_setDebug",{get:function(){return p},enumerable:!1}),S}((function(t,e,r,n,o,i){var a=[],c=new pn;c.subscribe(11,(function(t){return sr("rum",t)}));var u=function(t){var e=vr("browser-rum-sdk",t);if(Pt()){var r=jt();e.observable.subscribe((function(t){return r.send("internal_telemetry",t)}))}return e}(e);u.setContextProvider((function(){var t,r;return{application:{id:e.applicationId},session:{id:null===(t=p.findTrackedSession())||void 0===t?void 0:t.id},view:{id:null===(r=w.findView())||void 0===r?void 0:r.id},action:{id:E.findActionId()}}}));var s=function(t){c.notify(12,{error:t}),mr("Error reported to customer",{"error.message":t.message})},l=function(t,e){if(void 0===e&&(e=A),!ne(Yt.FEATURE_FLAGS))return{findFeatureFlagEvaluations:function(){},getFeatureFlagBytesCount:function(){return 0},addFeatureFlagEvaluation:R,stop:R};var r=new yn(Si),n=0,o=!1;t.subscribe(4,(function(t){var e=t.endClocks;r.closeActive(e.relative)})),t.subscribe(2,(function(t){var e=t.startClocks;r.add({},e.relative),n=0}));var i=I((function(t){n=e(B(t)),o||(o=Q(n,0))}),200),a=i.throttled;return{findFeatureFlagEvaluations:function(t){return r.find(t)},getFeatureFlagBytesCount:function(){return r.find()?n:0},addFeatureFlagEvaluation:function(t,e){var n=r.find();n&&(n[t]=e,a(n))},stop:i.cancel}}(c),f=function(t){var e=new $((function(){var r=ne(Yt.PAGEHIDE),n=Ct(0,window,["visibilitychange","freeze","pagehide"],(function(t){"pagehide"===t.type&&r?e.notify({reason:_r.PAGEHIDE}):"visibilitychange"===t.type&&"hidden"===document.visibilityState?e.notify({reason:_r.HIDDEN}):"freeze"===t.type&&e.notify({reason:_r.FROZEN})}),{capture:!0}).stop,o=R;return r||(o=Tt(t,window,"beforeunload",(function(){e.notify({reason:_r.UNLOADING})})).stop),function(){n(),o()}}));return e}(e),h=f.subscribe((function(t){c.notify(9,t)}));a.push((function(){return h.unsubscribe()}));var p=Pt()?function(){var t={id:"00000000-aaaa-0000-aaaa-000000000000",plan:1,sessionReplayAllowed:!1,longTaskAllowed:!0,resourceAllowed:!0};return{findTrackedSession:function(){return t},expire:R,expireObservable:new $}}():ui(e,c);if(Pt())!function(t){var e=jt();t.subscribe(11,(function(t){e.send("rum",t)}))}(c);else{var y=xi(e,c,u.observable,s,f,p.expireObservable);a.push((function(){return y.stop()})),function(t,e,r,n,o,i,a){e.enabled&&rt(t.customerDataTelemetrySampleRate)&&(Ci(),Ni(),r.subscribe(11,(function(t){Ai=!0,Pi(Li.globalContextBytes,ce(n.get())?0:n.getBytesCount()),Pi(Li.userContextBytes,ce(o.get())?0:o.getBytesCount());var e=i.findFeatureFlagEvaluations(),r=m(["view","error"],t.type)&&e&&!ce(e);Pi(Li.featureFlagBytes,r?i.getFeatureFlagBytesCount():0)})),a.subscribe((function(t){var e=t.bytesCount,r=t.messagesCount;Ai&&(Oi.batchCount+=1,Pi(Oi.batchBytesCount,e),Pi(Oi.batchMessagesCount,r),Ti(Oi.globalContextBytes,Li.globalContextBytes),Ti(Oi.userContextBytes,Li.userContextBytes),Ti(Oi.featureFlagBytes,Li.featureFlagBytes),Ni())})),C(ji,1e4))}(e,u,c,n,o,l,y.flushObservable)}var v=function(){var t=Er(),e=new $((function(){if(t){var r=new t(d((function(){return e.notify()})));return r.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),function(){return r.disconnect()}}}));return e}(),g=ki(e,location),b=function(t,e,r,n,o,i,a,c){var u=function(t){var e=new yn(vn);return t.subscribe(2,(function(t){e.add(function(t){return{service:t.service,version:t.version,id:t.id,name:t.name,startClocks:t.startClocks}}(t),t.startClocks.relative)})),t.subscribe(4,(function(t){var r=t.endClocks;e.closeActive(r.relative)})),t.subscribe(8,(function(){e.reset()})),{findView:function(t){return e.find(t)},stop:function(){e.stop()}}}(t),s=function(t,e,r){var n,o=new yn(Ei);t.subscribe(4,(function(t){var e=t.endClocks;o.closeActive(e.relative)})),t.subscribe(2,(function(t){var e=t.startClocks,i=r.href;o.add(a({url:i,referrer:n||document.referrer}),e.relative),n=i}));var i=e.subscribe((function(t){var e=t.newLocation,r=o.find();if(r){var n=yt();o.closeActive(n),o.add(a({url:e.href,referrer:r.referrer}),n)}}));function a(t){return{url:t.url,referrer:t.referrer}}return{findUrl:function(t){return o.find(t)},stop:function(){i.unsubscribe(),o.stop()}}}(t,o,r),l=Ri(),f=function(t,e,r,n){t.subscribe(1,(function(e){return t.notify(10,vo(e,n))}));var o={findActionId:R};return r.trackUserInteractions&&(o=po(t,e,r).actionContexts),{addAction:function(e,r){t.notify(10,k({savedCommonContext:r},vo(e,n)))},actionContexts:o}}(t,i,e,l),h=f.addAction,p=f.actionContexts,d=function(t){var e=Yo();return{get:function(){return{viewport:e}},stop:zo(t).subscribe((function(t){e=t})).unsubscribe}}(e);return fn(e,t,n,u,s,p,d,a,c),{viewContexts:u,pageStateHistory:l,urlContexts:s,addAction:h,actionContexts:p,stop:function(){d.stop(),l.stop(),s.stop(),u.stop(),l.stop()}}}(c,e,location,p,g,v,(function(){return cr(n,o,r)}),s),w=b.viewContexts,_=b.pageStateHistory,x=b.urlContexts,E=b.actionContexts,S=b.addAction,O=b.stop;a.push(O),function(t){yr.telemetryConfigurationEnabled&&br({type:hr,configuration:t})}(function(t){var e,r,n=function(t){var e,r,n=null!==(e=t.proxy)&&void 0!==e?e:t.proxyUrl;return{session_sample_rate:null!==(r=t.sessionSampleRate)&&void 0!==r?r:t.sampleRate,telemetry_sample_rate:t.telemetrySampleRate,telemetry_configuration_sample_rate:t.telemetryConfigurationSampleRate,use_before_send:!!t.beforeSend,use_cross_site_session_cookie:t.useCrossSiteSessionCookie,use_secure_session_cookie:t.useSecureSessionCookie,use_proxy:void 0!==n?!!n:void 0,silent_multiple_init:t.silentMultipleInit,track_session_across_subdomains:t.trackSessionAcrossSubdomains,track_resources:t.trackResources,track_long_task:t.trackLongTasks,allow_fallback_to_local_storage:!!t.allowFallbackToLocalStorage,store_contexts_across_pages:!!t.storeContextsAcrossPages}}(t);return k({premium_sample_rate:t.premiumSampleRate,replay_sample_rate:t.replaySampleRate,session_replay_sample_rate:t.sessionReplaySampleRate,trace_sample_rate:null!==(e=t.traceSampleRate)&&void 0!==e?e:t.tracingSampleRate,action_name_attribute:t.actionNameAttribute,use_allowed_tracing_origins:Array.isArray(t.allowedTracingOrigins)&&t.allowedTracingOrigins.length>0,use_allowed_tracing_urls:Array.isArray(t.allowedTracingUrls)&&t.allowedTracingUrls.length>0,selected_tracing_propagators:ar(t),default_privacy_level:t.defaultPrivacyLevel,use_excluded_activity_urls:Array.isArray(t.excludedActivityUrls)&&t.excludedActivityUrls.length>0,use_worker_url:!!t.workerUrl,track_frustrations:t.trackFrustrations,track_views_manually:t.trackViewsManually,track_user_interactions:null!==(r=t.trackUserInteractions)&&void 0!==r?r:t.trackInteractions},n)}(t)),function(t,e){t.subscribe(0,(function(r){for(var n=0,o=r;n<o.length;n++){var i=o[n];if(i.entryType!==Mr.LONG_TASK)break;var a=e.findTrackedSession(i.startTime);if(!a||!a.longTaskAllowed)break;var c=lt(i.startTime),u={date:c.timeStamp,long_task:{id:xt(),duration:ht(i.duration)},type:"long_task",_dd:{discarded:!1}};t.notify(10,{rawRumEvent:u,startTime:c.relative,domainContext:{performanceEntry:i.toJSON()}})}}))}(c,p),jo(c,e,p,_);var L=ri(c,e,location,v,g,l,_,r,i),j=L.addTiming,P=L.startView,T=L.stop;a.push(T);var N=Oo(c,e,_,l).addError;Pn(c,e,p),zr(c,e);var F=function(t,e,r,n,o){return{get:function(i){var a=r.findView(i),c=o.findUrl(i),u=e.findTrackedSession(i);if(u&&a&&c){var s=n.findActionId(i);return{application_id:t,session_id:u.id,user_action:s?{id:s}:void 0,view:{id:a.id,name:a.name,referrer:c.referrer,url:c.url}}}}}}(e.applicationId,p,w,E,x);return{addAction:S,addError:N,addTiming:j,addFeatureFlagEvaluation:l.addFeatureFlagEvaluation,startView:P,lifeCycle:c,viewContexts:w,session:p,stopSession:function(){return p.expire()},getInternalContext:F.get,stop:function(){a.forEach((function(t){return t()}))}}}),function(t,e){if(Pt()||!dc())return{start:R,stop:R,getReplayStats:function(){},onRumStart:R,isRecording:function(){return!1},getSessionReplayLink:function(){}};var r={status:0},n=function(){r={status:1}},o=function(){r={status:0}};return{start:function(){return n()},stop:function(){return o()},getSessionReplayLink:function(t,e,n){return yc(t,e,n,0!==r.status)},onRumStart:function(i,a,c,u){i.subscribe(7,(function(){2!==r.status&&3!==r.status||(o(),r={status:1})})),i.subscribe(8,(function(){1===r.status&&n()})),n=function(){var n=c.findTrackedSession();n&&n.sessionReplayAllowed?2!==r.status&&3!==r.status&&(r={status:2},kr(a,"interactive",(function(){if(2===r.status){var n=bc(a,"Datadog Session Replay",(function(){o()}),e);if(n){var s=t(i,a,c,u,vc(a,n,1)).stop;r={status:3,stopRecording:s}}else r={status:0}}}))):r={status:1}},o=function(){0!==r.status&&(3===r.status&&r.stopRecording(),r={status:0})},1===r.status&&n()},isRecording:function(){return 3===wc()&&3===r.status},getReplayStats:function(t){return 3===wc()?function(t){return null===uc||void 0===uc?void 0:uc.get(t)}(t):void 0}}}((function(t,e,r,n,o,i){var a=i||gi(e,e.sessionReplayEndpointBuilder,hc,(function(e){t.notify(12,{error:e}),mr("Error reported to customer",{"error.message":e.message})})),c=pc(t,e,r,n,a,o),u=c.addRecord,s=c.stop,l=cc({emit:u,configuration:e,lifeCycle:t}),f=l.stop,h=l.takeSubsequentFullSnapshot,p=l.flushMutations,d=t.subscribe(4,(function(){p(),u({timestamp:dt(),type:Ki})})).unsubscribe,y=t.subscribe(2,(function(t){h(t.startClocks.timeStamp)})).unsubscribe;return{stop:function(){d(),y(),f(),s()}}})));xc=O(),kc=Oc,Sc=xc[Ec="DD_RUM"],xc[Ec]=kc,Sc&&Sc.q&&Sc.q.forEach((function(t){return s(t,"onReady callback threw an error:")()})),r(55);var Lc,Ac=r(57);document.querySelectorAll("[data-cta]").forEach((function(t){t.addEventListener("click",n)})),(Lc=document.head.querySelector("meta[name=datadog_env]"))&&Oc.init({applicationId:"8d0573c0-bd1e-4e85-8615-4aa8866c6da1",clientToken:"pube58af6c0c13a54fc2cf8820e04dbe22c",site:"us5.datadoghq.com",service:"landing-pages",sampleRate:100,premiumSampleRate:0,trackInteractions:!0,trackResources:!0,allowedTracingUrls:[/^https:\/\/([a-zA-Z0-9-]+\.)*sittercity\.com(\/|$)/],env:Lc.content}),window.analytics?Ac.initGrowthbook():window.addEventListener("segmentLoaded",Ac.initGrowthbook)},function(t,e,r){"use strict";r.r(e),r.d(e,"compactDecrypt",(function(){return jn})),r.d(e,"flattenedDecrypt",(function(){return _n})),r.d(e,"generalDecrypt",(function(){return Fn})),r.d(e,"GeneralEncrypt",(function(){return Ro})),r.d(e,"compactVerify",(function(){return si})),r.d(e,"flattenedVerify",(function(){return ei})),r.d(e,"generalVerify",(function(){return vi})),r.d(e,"jwtVerify",(function(){return Ii})),r.d(e,"jwtDecrypt",(function(){return Ki})),r.d(e,"CompactEncrypt",(function(){return qi})),r.d(e,"FlattenedEncrypt",(function(){return _o})),r.d(e,"CompactSign",(function(){return ya})),r.d(e,"FlattenedSign",(function(){return sa})),r.d(e,"GeneralSign",(function(){return Oa})),r.d(e,"SignJWT",(function(){return Wa})),r.d(e,"EncryptJWT",(function(){return nc})),r.d(e,"calculateJwkThumbprint",(function(){return sc})),r.d(e,"calculateJwkThumbprintUri",(function(){return fc})),r.d(e,"EmbeddedJWK",(function(){return bc})),r.d(e,"createLocalJWKSet",(function(){return Mc})),r.d(e,"createRemoteJWKSet",(function(){return ou})),r.d(e,"jwksCache",(function(){return ru})),r.d(e,"experimental_jwksCache",(function(){return iu})),r.d(e,"UnsecuredJWT",(function(){return pu})),r.d(e,"exportPKCS8",(function(){return to})),r.d(e,"exportSPKI",(function(){return Xn})),r.d(e,"exportJWK",(function(){return ro})),r.d(e,"importSPKI",(function(){return xr})),r.d(e,"importPKCS8",(function(){return Or})),r.d(e,"importX509",(function(){return kr})),r.d(e,"importJWK",(function(){return Ar})),r.d(e,"decodeProtectedHeader",(function(){return bu})),r.d(e,"decodeJwt",(function(){return wu})),r.d(e,"errors",(function(){return n})),r.d(e,"generateKeyPair",(function(){return Nu})),r.d(e,"generateSecret",(function(){return Du})),r.d(e,"base64url",(function(){return o})),r.d(e,"cryptoRuntime",(function(){return Uu}));var n={};r.r(n),r.d(n,"JOSEError",(function(){return M})),r.d(n,"JWTClaimValidationFailed",(function(){return K})),r.d(n,"JWTExpired",(function(){return B})),r.d(n,"JOSEAlgNotAllowed",(function(){return W})),r.d(n,"JOSENotSupported",(function(){return J})),r.d(n,"JWEDecryptionFailed",(function(){return V})),r.d(n,"JWEInvalid",(function(){return z})),r.d(n,"JWSInvalid",(function(){return Y})),r.d(n,"JWTInvalid",(function(){return q})),r.d(n,"JWKInvalid",(function(){return $})),r.d(n,"JWKSInvalid",(function(){return Z})),r.d(n,"JWKSNoMatchingKey",(function(){return X})),r.d(n,"JWKSMultipleMatchingKeys",(function(){return Q})),r.d(n,"JWKSTimeout",(function(){return tt})),r.d(n,"JWSSignatureVerificationFailed",(function(){return et}));var o={};r.r(o),r.d(o,"encode",(function(){return du})),r.d(o,"decode",(function(){return yu}));var i=crypto,a=function(t){return t instanceof CryptoKey};function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(){u=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:A(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d="suspendedStart",y="suspendedYield",v="executing",m="completed",g={};function b(){}function w(){}function _(){}var x={};f(x,a,(function(){return this}));var E=Object.getPrototypeOf,k=E&&E(E(N([])));k&&k!==r&&n.call(k,a)&&(x=k);var S=_.prototype=b.prototype=Object.create(x);function O(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,u){var s=p(t[o],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==c(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function A(e,r,n){var o=d;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?m:y,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(c(e)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,f(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},O(L.prototype),f(L.prototype,s,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(S),f(S,l,"Generator"),f(S,a,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function s(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var l=function(){var t,e=(t=u().mark((function t(e,r){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="SHA-".concat(e.slice(-3)),t.t0=Uint8Array,t.next=4,i.subtle.digest(n,r);case 4:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}(),f=l;function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function p(){p=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:A(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",y="suspendedYield",v="executing",m="completed",g={};function b(){}function w(){}function _(){}var x={};s(x,a,(function(){return this}));var E=Object.getPrototypeOf,k=E&&E(E(N([])));k&&k!==r&&n.call(k,a)&&(x=k);var S=_.prototype=b.prototype=Object.create(x);function O(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==h(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function A(e,r,n){var o=d;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?m:y,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(h(e)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=s(_,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},O(L.prototype),s(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(S),s(S,u,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function d(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var y=new TextEncoder,v=new TextDecoder,m=Math.pow(2,32);function g(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=e.reduce((function(t,e){return t+e.length}),0),o=new Uint8Array(n),i=0,a=0,c=e;a<c.length;a++){var u=c[a];o.set(u,i),i+=u.length}return o}function b(t,e){return g(y.encode(t),new Uint8Array([0]),e)}function w(t,e,r){if(e<0||e>=m)throw new RangeError("value must be >= 0 and <= ".concat(m-1,". Received ").concat(e));t.set([e>>>24,e>>>16,e>>>8,255&e],r)}function _(t){var e=Math.floor(t/m),r=t%m,n=new Uint8Array(8);return w(n,e,0),w(n,r,4),n}function x(t){var e=new Uint8Array(4);return w(e,t),e}function E(t){return g(x(t.length),t)}function k(t,e,r){return S.apply(this,arguments)}function S(){var t;return t=p().mark((function t(e,r,n){var o,i,a,c;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=Math.ceil((r>>3)/32),i=new Uint8Array(32*o),a=0;case 3:if(!(a<o)){t.next=17;break}return(c=new Uint8Array(4+e.length+n.length)).set(x(a+1)),c.set(e,4),c.set(n,4+e.length),t.t0=i,t.next=11,f("sha256",c);case 11:t.t1=t.sent,t.t2=32*a,t.t0.set.call(t.t0,t.t1,t.t2);case 14:a++,t.next=3;break;case 17:return t.abrupt("return",i.slice(0,r>>3));case 18:case"end":return t.stop()}}),t)})),S=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){d(i,n,o,a,c,"next",t)}function c(t){d(i,n,o,a,c,"throw",t)}a(void 0)}))},S.apply(this,arguments)}var O=function(t){var e=t;"string"===typeof e&&(e=y.encode(e));for(var r=[],n=0;n<e.length;n+=32768)r.push(String.fromCharCode.apply(null,e.subarray(n,n+32768)));return btoa(r.join(""))},L=function(t){return O(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},A=function(t){for(var e=atob(t),r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r},j=function(t){var e=t;e instanceof Uint8Array&&(e=v.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return A(e)}catch(r){throw new TypeError("The input to be decoded is not correctly encoded.")}};function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function T(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,N(n.key),n)}}function C(t,e,r){return e&&T(t.prototype,e),r&&T(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function N(t){var e=function(t,e){if("object"!=P(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P(e)?e:e+""}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e,r){return e=U(e),function(t,e){if(e&&("object"==P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,D()?Reflect.construct(e,r||[],U(t).constructor):e.apply(t,r))}function F(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}function G(t){var e="function"==typeof Map?new Map:void 0;return G=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(D())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&H(o,r.prototype),o}(t,arguments,U(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),H(r,t)},G(t)}function D(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(D=function(){return!!t})()}function H(t,e){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},H(t,e)}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U(t)}var M=function(t){function e(t,r){var n,o;return I(this,e),(o=R(this,e,[t,r])).code="ERR_JOSE_GENERIC",o.name=o.constructor.name,null===(n=Error.captureStackTrace)||void 0===n||n.call(Error,o,o.constructor),o}return F(e,t),C(e)}(G(Error));M.code="ERR_JOSE_GENERIC";var K=function(t){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unspecified",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unspecified";return I(this,e),(n=R(this,e,[t,{cause:{claim:o,reason:i,payload:r}}])).code="ERR_JWT_CLAIM_VALIDATION_FAILED",n.claim=o,n.reason=i,n.payload=r,n}return F(e,t),C(e)}(M);K.code="ERR_JWT_CLAIM_VALIDATION_FAILED";var B=function(t){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unspecified",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unspecified";return I(this,e),(n=R(this,e,[t,{cause:{claim:o,reason:i,payload:r}}])).code="ERR_JWT_EXPIRED",n.claim=o,n.reason=i,n.payload=r,n}return F(e,t),C(e)}(M);B.code="ERR_JWT_EXPIRED";var W=function(t){function e(){var t;return I(this,e),(t=R(this,e,arguments)).code="ERR_JOSE_ALG_NOT_ALLOWED",t}return F(e,t),C(e)}(M);W.code="ERR_JOSE_ALG_NOT_ALLOWED";var J=function(t){function e(){var t;return I(this,e),(t=R(this,e,arguments)).code="ERR_JOSE_NOT_SUPPORTED",t}return F(e,t),C(e)}(M);J.code="ERR_JOSE_NOT_SUPPORTED";var V=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"decryption operation failed",n=arguments.length>1?arguments[1]:void 0;return I(this,e),(t=R(this,e,[r,n])).code="ERR_JWE_DECRYPTION_FAILED",t}return F(e,t),C(e)}(M);V.code="ERR_JWE_DECRYPTION_FAILED";var z=function(t){function e(){var t;return I(this,e),(t=R(this,e,arguments)).code="ERR_JWE_INVALID",t}return F(e,t),C(e)}(M);z.code="ERR_JWE_INVALID";var Y=function(t){function e(){var t;return I(this,e),(t=R(this,e,arguments)).code="ERR_JWS_INVALID",t}return F(e,t),C(e)}(M);Y.code="ERR_JWS_INVALID";var q=function(t){function e(){var t;return I(this,e),(t=R(this,e,arguments)).code="ERR_JWT_INVALID",t}return F(e,t),C(e)}(M);q.code="ERR_JWT_INVALID";var $=function(t){function e(){var t;return I(this,e),(t=R(this,e,arguments)).code="ERR_JWK_INVALID",t}return F(e,t),C(e)}(M);$.code="ERR_JWK_INVALID";var Z=function(t){function e(){var t;return I(this,e),(t=R(this,e,arguments)).code="ERR_JWKS_INVALID",t}return F(e,t),C(e)}(M);Z.code="ERR_JWKS_INVALID";var X=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"no applicable key found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;return I(this,e),(t=R(this,e,[r,n])).code="ERR_JWKS_NO_MATCHING_KEY",t}return F(e,t),C(e)}(M);X.code="ERR_JWKS_NO_MATCHING_KEY";var Q=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"multiple matching keys found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;return I(this,e),(t=R(this,e,[r,n])).code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",t}return F(e,t),C(e)}(M);Symbol.asyncIterator,Q.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";var tt=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"request timed out",n=arguments.length>1?arguments[1]:void 0;return I(this,e),(t=R(this,e,[r,n])).code="ERR_JWKS_TIMEOUT",t}return F(e,t),C(e)}(M);tt.code="ERR_JWKS_TIMEOUT";var et=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"signature verification failed",n=arguments.length>1?arguments[1]:void 0;return I(this,e),(t=R(this,e,[r,n])).code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",t}return F(e,t),C(e)}(M);et.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";var rt=i.getRandomValues.bind(i);function nt(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new J("Unsupported JWE Algorithm: ".concat(t))}}var ot=function(t,e){if(e.length<<3!==nt(t))throw new z("Invalid Initialization Vector length")},it=function(t,e){var r=t.byteLength<<3;if(r!==e)throw new z("Invalid Content Encryption Key length. Expected ".concat(e," bits, got ").concat(r," bits"))},at=function(t,e){if(!(t instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(e instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(t.length!==e.length)throw new TypeError("Input buffers must have the same length");for(var r=t.length,n=0,o=-1;++o<r;)n|=t[o]^e[o];return 0===n};function ct(t){return new TypeError("CryptoKey does not support this operation, its ".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"algorithm.name"," must be ").concat(t))}function ut(t,e){return t.name===e}function st(t){return parseInt(t.name.slice(4),10)}function lt(t,e){if(e.length&&!e.some((function(e){return t.usages.includes(e)}))){var r="CryptoKey does not support this operation, its usages must include ";if(e.length>2){var n=e.pop();r+="one of ".concat(e.join(", "),", or ").concat(n,".")}else 2===e.length?r+="one of ".concat(e[0]," or ").concat(e[1],"."):r+="".concat(e[0],".");throw new TypeError(r)}}function ft(t,e){switch(e){case"HS256":case"HS384":case"HS512":if(!ut(t.algorithm,"HMAC"))throw ct("HMAC");var r=parseInt(e.slice(2),10);if(st(t.algorithm.hash)!==r)throw ct("SHA-".concat(r),"algorithm.hash");break;case"RS256":case"RS384":case"RS512":if(!ut(t.algorithm,"RSASSA-PKCS1-v1_5"))throw ct("RSASSA-PKCS1-v1_5");var n=parseInt(e.slice(2),10);if(st(t.algorithm.hash)!==n)throw ct("SHA-".concat(n),"algorithm.hash");break;case"PS256":case"PS384":case"PS512":if(!ut(t.algorithm,"RSA-PSS"))throw ct("RSA-PSS");var o=parseInt(e.slice(2),10);if(st(t.algorithm.hash)!==o)throw ct("SHA-".concat(o),"algorithm.hash");break;case"EdDSA":if("Ed25519"!==t.algorithm.name&&"Ed448"!==t.algorithm.name)throw ct("Ed25519 or Ed448");break;case"Ed25519":if(!ut(t.algorithm,"Ed25519"))throw ct("Ed25519");break;case"ES256":case"ES384":case"ES512":if(!ut(t.algorithm,"ECDSA"))throw ct("ECDSA");var i=function(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(e);if(t.algorithm.namedCurve!==i)throw ct(i,"algorithm.namedCurve");break;default:throw new TypeError("CryptoKey does not support this operation")}for(var a=arguments.length,c=new Array(a>2?a-2:0),u=2;u<a;u++)c[u-2]=arguments[u];lt(t,c)}function ht(t,e){switch(e){case"A128GCM":case"A192GCM":case"A256GCM":if(!ut(t.algorithm,"AES-GCM"))throw ct("AES-GCM");var r=parseInt(e.slice(1,4),10);if(t.algorithm.length!==r)throw ct(r,"algorithm.length");break;case"A128KW":case"A192KW":case"A256KW":if(!ut(t.algorithm,"AES-KW"))throw ct("AES-KW");var n=parseInt(e.slice(1,4),10);if(t.algorithm.length!==n)throw ct(n,"algorithm.length");break;case"ECDH":switch(t.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw ct("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!ut(t.algorithm,"PBKDF2"))throw ct("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(!ut(t.algorithm,"RSA-OAEP"))throw ct("RSA-OAEP");var o=parseInt(e.slice(9),10)||1;if(st(t.algorithm.hash)!==o)throw ct("SHA-".concat(o),"algorithm.hash");break;default:throw new TypeError("CryptoKey does not support this operation")}for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];lt(t,a)}function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function dt(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];if((n=n.filter(Boolean)).length>2){var i=n.pop();t+="one of type ".concat(n.join(", "),", or ").concat(i,".")}else 2===n.length?t+="one of type ".concat(n[0]," or ").concat(n[1],"."):t+="of type ".concat(n[0],".");if(null==e)t+=" Received ".concat(e);else if("function"===typeof e&&e.name)t+=" Received function ".concat(e.name);else if("object"===pt(e)&&null!=e){var a;null!==(a=e.constructor)&&void 0!==a&&a.name&&(t+=" Received an instance of ".concat(e.constructor.name))}return t}var yt=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return dt.apply(void 0,["Key must be ",t].concat(r))};function vt(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return dt.apply(void 0,["Key for the ".concat(t," algorithm must be "),e].concat(n))}var mt=function(t){return!!a(t)||"KeyObject"===(null===t||void 0===t?void 0:t[Symbol.toStringTag])},gt=["CryptoKey"];function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function wt(){wt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==bt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(bt(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function _t(t){return function(t){if(Array.isArray(t))return xt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return xt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Et(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function kt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Et(i,n,o,a,c,"next",t)}function c(t){Et(i,n,o,a,c,"throw",t)}a(void 0)}))}}function St(t,e,r,n,o,i){return Ot.apply(this,arguments)}function Ot(){return(Ot=kt(wt().mark((function t(e,r,n,o,a,c){var u,s,l,f,h,p,d;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r instanceof Uint8Array){t.next=2;break}throw new TypeError(yt(r,"Uint8Array"));case 2:return u=parseInt(e.slice(1,4),10),t.next=5,i.subtle.importKey("raw",r.subarray(u>>3),"AES-CBC",!1,["decrypt"]);case 5:return s=t.sent,t.next=8,i.subtle.importKey("raw",r.subarray(0,u>>3),{hash:"SHA-".concat(u<<1),name:"HMAC"},!1,["sign"]);case 8:return l=t.sent,f=g(c,o,n,_(c.length<<3)),t.t0=Uint8Array,t.next=13,i.subtle.sign("HMAC",l,f);case 13:t.t1=t.sent.slice(0,u>>3),h=new t.t0(t.t1);try{p=at(a,h)}catch(y){}if(p){t.next=18;break}throw new V;case 18:return t.prev=18,t.t2=Uint8Array,t.next=22,i.subtle.decrypt({iv:o,name:"AES-CBC"},s,n);case 22:t.t3=t.sent,d=new t.t2(t.t3),t.next=28;break;case 26:t.prev=26,t.t4=t.catch(18);case 28:if(d){t.next=30;break}throw new V;case 30:return t.abrupt("return",d);case 31:case"end":return t.stop()}}),t,null,[[18,26]])})))).apply(this,arguments)}function Lt(t,e,r,n,o,i){return At.apply(this,arguments)}function At(){return(At=kt(wt().mark((function t(e,r,n,o,a,c){var u;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r instanceof Uint8Array)){t.next=6;break}return t.next=3,i.subtle.importKey("raw",r,"AES-GCM",!1,["decrypt"]);case 3:u=t.sent,t.next=8;break;case 6:ht(r,e,"decrypt"),u=r;case 8:return t.prev=8,t.t0=Uint8Array,t.next=12,i.subtle.decrypt({additionalData:c,iv:o,name:"AES-GCM",tagLength:128},u,g(n,a));case 12:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 16:throw t.prev=16,t.t2=t.catch(8),new V;case 19:case"end":return t.stop()}}),t,null,[[8,16]])})))).apply(this,arguments)}var jt=function(){var t=kt(wt().mark((function t(e,r,n,o,i,c){return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a(r)||r instanceof Uint8Array){t.next=2;break}throw new TypeError(yt.apply(void 0,[r].concat(_t(gt),["Uint8Array"])));case 2:if(o){t.next=4;break}throw new z("JWE Initialization Vector missing");case 4:if(i){t.next=6;break}throw new z("JWE Authentication Tag missing");case 6:ot(e,o),t.t0=e,t.next="A128CBC-HS256"===t.t0||"A192CBC-HS384"===t.t0||"A256CBC-HS512"===t.t0?10:"A128GCM"===t.t0||"A192GCM"===t.t0||"A256GCM"===t.t0?12:14;break;case 10:return r instanceof Uint8Array&&it(r,parseInt(e.slice(-3),10)),t.abrupt("return",St(e,r,n,o,i,c));case 12:return r instanceof Uint8Array&&it(r,parseInt(e.slice(1,4),10)),t.abrupt("return",Lt(e,r,n,o,i,c));case 14:throw new J("Unsupported JWE Content Encryption Algorithm");case 15:case"end":return t.stop()}}),t)})));return function(e,r,n,o,i,a){return t.apply(this,arguments)}}(),Pt=jt;function Tt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Ct(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ct(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Nt=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,o=e.filter(Boolean);if(0===o.length||1===o.length)return!0;var i,a=Tt(o);try{for(a.s();!(i=a.n()).done;){var c=i.value,u=Object.keys(c);if(n&&0!==n.size)for(var s=0,l=u;s<l.length;s++){var f=l[s];if(n.has(f))return!1;n.add(f)}else n=new Set(u)}}catch(h){a.e(h)}finally{a.f()}return!0};function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Rt(t){if("object"!==It(e=t)||null===e||"[object Object]"!==Object.prototype.toString.call(t))return!1;var e;if(null===Object.getPrototypeOf(t))return!0;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}var Ft=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function Gt(t){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(t)}function Dt(){Dt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Gt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Gt(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ht(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ut(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ht(i,n,o,a,c,"next",t)}function c(t){Ht(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Mt(t){return function(t){if(Array.isArray(t))return Kt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Kt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Bt(t,e){if(t.algorithm.length!==parseInt(e.slice(1,4),10))throw new TypeError("Invalid key size for alg: ".concat(e))}function Wt(t,e,r){if(a(t))return ht(t,e,r),t;if(t instanceof Uint8Array)return i.subtle.importKey("raw",t,"AES-KW",!0,[r]);throw new TypeError(yt.apply(void 0,[t].concat(Mt(gt),["Uint8Array"])))}var Jt=function(){var t=Ut(Dt().mark((function t(e,r,n){var o,a,c;return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Wt(r,e,"wrapKey");case 2:return Bt(a=t.sent,e),t.next=6,(o=i.subtle).importKey.apply(o,["raw",n].concat(Mt(Ft)));case 6:return c=t.sent,t.t0=Uint8Array,t.next=10,i.subtle.wrapKey("raw",c,a,"AES-KW");case 10:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 12:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),Vt=function(){var t=Ut(Dt().mark((function t(e,r,n){var o,a,c;return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Wt(r,e,"unwrapKey");case 2:return Bt(a=t.sent,e),t.next=6,(o=i.subtle).unwrapKey.apply(o,["raw",n,a,"AES-KW"].concat(Mt(Ft)));case 6:return c=t.sent,t.t0=Uint8Array,t.next=10,i.subtle.exportKey("raw",c);case 10:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 12:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();function zt(t){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt(t)}function Yt(){Yt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==zt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(zt(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function qt(t){return function(t){if(Array.isArray(t))return $t(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return $t(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$t(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Zt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Xt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Zt(i,n,o,a,c,"next",t)}function c(t){Zt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Qt(t,e,r,n){return te.apply(this,arguments)}function te(){return te=Xt(Yt().mark((function t(e,r,n,o){var c,u,s,l,f,h=arguments;return Yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=h.length>4&&void 0!==h[4]?h[4]:new Uint8Array(0),u=h.length>5&&void 0!==h[5]?h[5]:new Uint8Array(0),a(e)){t.next=4;break}throw new TypeError(yt.apply(void 0,[e].concat(qt(gt))));case 4:if(ht(e,"ECDH"),a(r)){t.next=7;break}throw new TypeError(yt.apply(void 0,[r].concat(qt(gt))));case 7:return ht(r,"ECDH","deriveBits"),s=g(E(y.encode(n)),E(c),E(u),x(o)),l="X25519"===e.algorithm.name?256:"X448"===e.algorithm.name?448:Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3,t.t0=Uint8Array,t.next=13,i.subtle.deriveBits({name:e.algorithm.name,public:e},r,l);case 13:return t.t1=t.sent,f=new t.t0(t.t1),t.abrupt("return",k(f,o,s));case 16:case"end":return t.stop()}}),t)}))),te.apply(this,arguments)}function ee(t){return re.apply(this,arguments)}function re(){return(re=Xt(Yt().mark((function t(e){return Yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a(e)){t.next=2;break}throw new TypeError(yt.apply(void 0,[e].concat(qt(gt))));case 2:return t.abrupt("return",i.subtle.generateKey(e.algorithm,!0,["deriveBits"]));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ne(t){if(!a(t))throw new TypeError(yt.apply(void 0,[t].concat(qt(gt))));return["P-256","P-384","P-521"].includes(t.algorithm.namedCurve)||"X25519"===t.algorithm.name||"X448"===t.algorithm.name}function oe(t){if(!(t instanceof Uint8Array)||t.length<8)throw new z("PBES2 Salt Input must be 8 or more octets")}function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function ae(){ae=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ie(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ie(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ce(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ue(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ce(i,n,o,a,c,"next",t)}function c(t){ce(i,n,o,a,c,"throw",t)}a(void 0)}))}}function se(t){return function(t){if(Array.isArray(t))return le(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return le(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function fe(t,e){if(t instanceof Uint8Array)return i.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits"]);if(a(t))return ht(t,e,"deriveBits","deriveKey"),t;throw new TypeError(yt.apply(void 0,[t].concat(se(gt),["Uint8Array"])))}function he(t,e,r,n){return pe.apply(this,arguments)}function pe(){return(pe=ue(ae().mark((function t(e,r,n,o){var a,c,u,s,l;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return oe(e),a=b(r,e),c=parseInt(r.slice(13,16),10),u={hash:"SHA-".concat(r.slice(8,11)),iterations:n,name:"PBKDF2",salt:a},s={length:c,name:"AES-KW"},t.next=7,fe(o,r);case 7:if(!(l=t.sent).usages.includes("deriveBits")){t.next=14;break}return t.t0=Uint8Array,t.next=12,i.subtle.deriveBits(u,l,c);case 12:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 14:if(!l.usages.includes("deriveKey")){t.next=16;break}return t.abrupt("return",i.subtle.deriveKey(u,l,s,!1,["wrapKey","unwrapKey"]));case 16:throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"');case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var de=function(){var t=ue(ae().mark((function t(e,r,n){var o,i,a,c,u=arguments;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=u.length>3&&void 0!==u[3]?u[3]:2048,i=u.length>4&&void 0!==u[4]?u[4]:rt(new Uint8Array(16)),t.next=4,he(i,e,o,r);case 4:return a=t.sent,t.next=7,Jt(e.slice(-6),a,n);case 7:return c=t.sent,t.abrupt("return",{encryptedKey:c,p2c:o,p2s:L(i)});case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),ye=function(){var t=ue(ae().mark((function t(e,r,n,o,i){var a;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,he(i,e,o,r);case 2:return a=t.sent,t.abrupt("return",Vt(e.slice(-6),a,n));case 4:case"end":return t.stop()}}),t)})));return function(e,r,n,o,i){return t.apply(this,arguments)}}();function ve(t){switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new J("alg ".concat(t," is not supported either by JOSE or your javascript runtime"))}}var me=function(t,e){if(t.startsWith("RS")||t.startsWith("PS")){var r=e.algorithm.modulusLength;if("number"!==typeof r||r<2048)throw new TypeError("".concat(t," requires key modulusLength to be 2048 bits or larger"))}};function ge(t){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(t)}function be(){be=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ge(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ge(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function we(t){return function(t){if(Array.isArray(t))return _e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return _e(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_e(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function xe(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ee(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){xe(i,n,o,a,c,"next",t)}function c(t){xe(i,n,o,a,c,"throw",t)}a(void 0)}))}}var ke=function(){var t=Ee(be().mark((function t(e,r,n){var o,c;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a(r)){t.next=2;break}throw new TypeError(yt.apply(void 0,[r].concat(we(gt))));case 2:if(ht(r,e,"encrypt","wrapKey"),me(e,r),!r.usages.includes("encrypt")){t.next=10;break}return t.t0=Uint8Array,t.next=8,i.subtle.encrypt(ve(e),r,n);case 8:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 10:if(!r.usages.includes("wrapKey")){t.next=19;break}return t.next=13,(o=i.subtle).importKey.apply(o,["raw",n].concat(we(Ft)));case 13:return c=t.sent,t.t2=Uint8Array,t.next=17,i.subtle.wrapKey("raw",c,r,ve(e));case 17:return t.t3=t.sent,t.abrupt("return",new t.t2(t.t3));case 19:throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation');case 20:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),Se=function(){var t=Ee(be().mark((function t(e,r,n){var o,c;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a(r)){t.next=2;break}throw new TypeError(yt.apply(void 0,[r].concat(we(gt))));case 2:if(ht(r,e,"decrypt","unwrapKey"),me(e,r),!r.usages.includes("decrypt")){t.next=10;break}return t.t0=Uint8Array,t.next=8,i.subtle.decrypt(ve(e),r,n);case 8:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 10:if(!r.usages.includes("unwrapKey")){t.next=19;break}return t.next=13,(o=i.subtle).unwrapKey.apply(o,["raw",n,r,ve(e)].concat(we(Ft)));case 13:return c=t.sent,t.t2=Uint8Array,t.next=17,i.subtle.exportKey("raw",c);case 17:return t.t3=t.sent,t.abrupt("return",new t.t2(t.t3));case 19:throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation');case 20:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();function Oe(t){return Rt(t)&&"string"===typeof t.kty}function Le(t){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(t)}function Ae(){Ae=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Le(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Le(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function je(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?je(Object(r),!0).forEach((function(e){Te(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Te(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Le(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Le(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ce(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ne(t){var e,r;switch(t.kty){case"RSA":switch(t.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:"SHA-".concat(t.alg.slice(-3))},r=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:"SHA-".concat(t.alg.slice(-3))},r=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:"SHA-".concat(parseInt(t.alg.slice(-3),10)||1)},r=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new J('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(t.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},r=t.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},r=t.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},r=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:t.crv},r=t.d?["deriveBits"]:[];break;default:throw new J('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(t.alg){case"Ed25519":e={name:"Ed25519"},r=t.d?["sign"]:["verify"];break;case"EdDSA":e={name:t.crv},r=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:t.crv},r=t.d?["deriveBits"]:[];break;default:throw new J('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new J('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:r}}var Ie=function(){var t,e=(t=Ae().mark((function t(e){var r,n,o,a,c,u,s,l;return Ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.alg){t.next=2;break}throw new TypeError('"alg" argument is required when "jwk.alg" is not present');case 2:return a=Ne(e),c=a.algorithm,u=a.keyUsages,s=[c,null!==(r=e.ext)&&void 0!==r&&r,null!==(n=e.key_ops)&&void 0!==n?n:u],delete(l=Pe({},e)).alg,delete l.use,t.abrupt("return",(o=i.subtle).importKey.apply(o,["jwk",l].concat(s)));case 8:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ce(i,n,o,a,c,"next",t)}function c(t){Ce(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),Re=Ie;function Fe(t){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fe(t)}function Ge(){Ge=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Fe(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Fe(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function De(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function He(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?De(Object(r),!0).forEach((function(e){Ue(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ue(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Fe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fe(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Me(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var Ke,Be,We=function(t){return j(t)},Je=function(t){return"KeyObject"===(null===t||void 0===t?void 0:t[Symbol.toStringTag])},Ve=function(){var t,e=(t=Ge().mark((function t(e,r,n,o){var i,a,c,u=arguments;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=u.length>4&&void 0!==u[4]&&u[4],null===(a=e.get(r))||void 0===a||!a[o]){t.next=4;break}return t.abrupt("return",a[o]);case 4:return t.next=6,Re(He(He({},n),{},{alg:o}));case 6:return c=t.sent,i&&Object.freeze(r),a?a[o]=c:e.set(r,Ue({},o,c)),t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Me(i,n,o,a,c,"next",t)}function c(t){Me(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r,n,o){return e.apply(this,arguments)}}(),ze={normalizePublicKey:function(t,e){if(Je(t)){var r=t.export({format:"jwk"});return delete r.d,delete r.dp,delete r.dq,delete r.p,delete r.q,delete r.qi,r.k?We(r.k):(Be||(Be=new WeakMap),Ve(Be,t,r,e))}return Oe(t)?t.k?j(t.k):(Be||(Be=new WeakMap),Ve(Be,t,t,e,!0)):t},normalizePrivateKey:function(t,e){if(Je(t)){var r=t.export({format:"jwk"});return r.k?We(r.k):(Ke||(Ke=new WeakMap),Ve(Ke,t,r,e))}return Oe(t)?t.k?j(t.k):(Ke||(Ke=new WeakMap),Ve(Ke,t,t,e,!0)):t}};function Ye(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new J("Unsupported JWE Algorithm: ".concat(t))}}var qe=function(t){return rt(new Uint8Array(Ye(t)>>3))},$e=function(t,e){var r=(t.match(/.{1,64}/g)||[]).join("\n");return"-----BEGIN ".concat(e,"-----\n").concat(r,"\n-----END ").concat(e,"-----")};function Ze(t){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(t)}function Xe(){Xe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ze(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ze(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Qe(t){return function(t){if(Array.isArray(t))return tr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return tr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function er(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function rr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){er(i,n,o,a,c,"next",t)}function c(t){er(i,n,o,a,c,"throw",t)}a(void 0)}))}}var nr=function(){var t=rr(Xe().mark((function t(e,r,n){return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a(n)){t.next=2;break}throw new TypeError(yt.apply(void 0,[n].concat(Qe(gt))));case 2:if(n.extractable){t.next=4;break}throw new TypeError("CryptoKey is not extractable");case 4:if(n.type===e){t.next=6;break}throw new TypeError("key is not a ".concat(e," key"));case 6:return t.t0=$e,t.t1=O,t.t2=Uint8Array,t.next=11,i.subtle.exportKey(r,n);case 11:return t.t3=t.sent,t.t4=new t.t2(t.t3),t.t5=(0,t.t1)(t.t4),t.t6="".concat(e.toUpperCase()," KEY"),t.abrupt("return",(0,t.t0)(t.t5,t.t6));case 16:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),or=function(t){return nr("public","spki",t)},ir=function(t){return nr("private","pkcs8",t)},ar=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;0===r&&(e.unshift(e.length),e.unshift(6));var n=t.indexOf(e[0],r);if(-1===n)return!1;var o=t.subarray(n,n+e.length);return o.length===e.length&&(o.every((function(t,r){return t===e[r]}))||ar(t,e,n+1))},cr=function(t){switch(!0){case ar(t,[42,134,72,206,61,3,1,7]):return"P-256";case ar(t,[43,129,4,0,34]):return"P-384";case ar(t,[43,129,4,0,35]):return"P-521";case ar(t,[43,101,110]):return"X25519";case ar(t,[43,101,111]):return"X448";case ar(t,[43,101,112]):return"Ed25519";case ar(t,[43,101,113]):return"Ed448";default:throw new J("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},ur=function(){var t=rr(Xe().mark((function t(e,r,n,o,a){var c,u,s,l,f,h;return Xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=new Uint8Array(atob(n.replace(e,"")).split("").map((function(t){return t.charCodeAt(0)}))),f="spki"===r,t.t0=o,t.next="PS256"===t.t0||"PS384"===t.t0||"PS512"===t.t0?5:"RS256"===t.t0||"RS384"===t.t0||"RS512"===t.t0?8:"RSA-OAEP"===t.t0||"RSA-OAEP-256"===t.t0||"RSA-OAEP-384"===t.t0||"RSA-OAEP-512"===t.t0?11:"ES256"===t.t0?14:"ES384"===t.t0?17:"ES512"===t.t0?20:"ECDH-ES"===t.t0||"ECDH-ES+A128KW"===t.t0||"ECDH-ES+A192KW"===t.t0||"ECDH-ES+A256KW"===t.t0?23:"Ed25519"===t.t0?27:"EdDSA"===t.t0?30:33;break;case 5:return u={name:"RSA-PSS",hash:"SHA-".concat(o.slice(-3))},s=f?["verify"]:["sign"],t.abrupt("break",34);case 8:return u={name:"RSASSA-PKCS1-v1_5",hash:"SHA-".concat(o.slice(-3))},s=f?["verify"]:["sign"],t.abrupt("break",34);case 11:return u={name:"RSA-OAEP",hash:"SHA-".concat(parseInt(o.slice(-3),10)||1)},s=f?["encrypt","wrapKey"]:["decrypt","unwrapKey"],t.abrupt("break",34);case 14:return u={name:"ECDSA",namedCurve:"P-256"},s=f?["verify"]:["sign"],t.abrupt("break",34);case 17:return u={name:"ECDSA",namedCurve:"P-384"},s=f?["verify"]:["sign"],t.abrupt("break",34);case 20:return u={name:"ECDSA",namedCurve:"P-521"},s=f?["verify"]:["sign"],t.abrupt("break",34);case 23:return h=cr(l),u=h.startsWith("P-")?{name:"ECDH",namedCurve:h}:{name:h},s=f?[]:["deriveBits"],t.abrupt("break",34);case 27:return u={name:"Ed25519"},s=f?["verify"]:["sign"],t.abrupt("break",34);case 30:return u={name:cr(l)},s=f?["verify"]:["sign"],t.abrupt("break",34);case 33:throw new J('Invalid or unsupported "alg" (Algorithm) value');case 34:return t.abrupt("return",i.subtle.importKey(r,l,u,null!==(c=null===a||void 0===a?void 0:a.extractable)&&void 0!==c&&c,s));case 35:case"end":return t.stop()}}),t)})));return function(e,r,n,o,i){return t.apply(this,arguments)}}(),sr=function(t,e,r){return ur(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",t,e,r)},lr=function(t,e,r){return ur(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",t,e,r)};function fr(t){for(var e=[],r=0;r<t.length;){var n=hr(t.subarray(r));e.push(n),r+=n.byteLength}return e}function hr(t){var e=0,r=31&t[0];if(e++,31===r){for(r=0;t[e]>=128;)r=128*r+t[e]-128,e++;r=128*r+t[e]-128,e++}var n=0;if(t[e]<128)n=t[e],e++;else{if(128===n){for(n=0;0!==t[e+n]||0!==t[e+n+1];){if(n>t.byteLength)throw new TypeError("invalid indefinite form length");n++}var o=e+n+2;return{byteLength:o,contents:t.subarray(e,e+n),raw:t.subarray(0,o)}}var i=127&t[e];e++,n=0;for(var a=0;a<i;a++)n=256*n+t[e],e++}var c=e+n;return{byteLength:c,contents:t.subarray(e,c),raw:t.subarray(0,c)}}function pr(t){var e,r=t.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),n=A(r);return $e((e=fr(fr(hr(n).contents)[0].contents),O(e[160===e[0].raw[0]?6:5].raw)),"PUBLIC KEY")}var dr=function(t,e,r){var n;try{n=pr(t)}catch(o){throw new TypeError("Failed to parse the X.509 certificate",{cause:o})}return lr(n,e,r)};function yr(t){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yr(t)}function vr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function mr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vr(Object(r),!0).forEach((function(e){gr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function gr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=yr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function br(){br=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==yr(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(yr(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function wr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function _r(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){wr(i,n,o,a,c,"next",t)}function c(t){wr(i,n,o,a,c,"throw",t)}a(void 0)}))}}function xr(t,e,r){return Er.apply(this,arguments)}function Er(){return(Er=_r(br().mark((function t(e,r,n){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"===typeof e&&0===e.indexOf("-----BEGIN PUBLIC KEY-----")){t.next=2;break}throw new TypeError('"spki" must be SPKI formatted string');case 2:return t.abrupt("return",lr(e,r,n));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function kr(t,e,r){return Sr.apply(this,arguments)}function Sr(){return(Sr=_r(br().mark((function t(e,r,n){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"===typeof e&&0===e.indexOf("-----BEGIN CERTIFICATE-----")){t.next=2;break}throw new TypeError('"x509" must be X.509 formatted string');case 2:return t.abrupt("return",dr(e,r,n));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Or(t,e,r){return Lr.apply(this,arguments)}function Lr(){return(Lr=_r(br().mark((function t(e,r,n){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"===typeof e&&0===e.indexOf("-----BEGIN PRIVATE KEY-----")){t.next=2;break}throw new TypeError('"pkcs8" must be PKCS#8 formatted string');case 2:return t.abrupt("return",sr(e,r,n));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ar(t,e){return jr.apply(this,arguments)}function jr(){return(jr=_r(br().mark((function t(e,r){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Rt(e)){t.next=2;break}throw new TypeError("JWK must be an object");case 2:r||(r=e.alg),t.t0=e.kty,t.next="oct"===t.t0?6:"RSA"===t.t0?9:"EC"===t.t0||"OKP"===t.t0?11:12;break;case 6:if("string"===typeof e.k&&e.k){t.next=8;break}throw new TypeError('missing "k" (Key Value) Parameter value');case 8:return t.abrupt("return",j(e.k));case 9:if(!("oth"in e)||void 0===e.oth){t.next=11;break}throw new J('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case 11:return t.abrupt("return",Re(mr(mr({},e),{},{alg:r})));case 12:throw new J('Unsupported "kty" (Key Type) Parameter value');case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pr(t){return function(t){if(Array.isArray(t))return Tr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Tr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Cr=function(t){return null===t||void 0===t?void 0:t[Symbol.toStringTag]},Nr=function(t,e,r){var n,o;if(void 0!==e.use&&"sig"!==e.use)throw new TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==e.key_ops&&!0!==(null===(n=(o=e.key_ops).includes)||void 0===n?void 0:n.call(o,r)))throw new TypeError("Invalid key for this operation, when present its key_ops must include ".concat(r));if(void 0!==e.alg&&e.alg!==t)throw new TypeError("Invalid key for this operation, when present its alg must be ".concat(t));return!0},Ir=function(t,e,r,n){if(!(e instanceof Uint8Array)){if(n&&Oe(e)){if(function(t){return Oe(t)&&"oct"===t.kty&&"string"===typeof t.k}(e)&&Nr(t,e,r))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!mt(e))throw new TypeError(vt.apply(void 0,[t,e].concat(Pr(gt),["Uint8Array",n?"JSON Web Key":null])));if("secret"!==e.type)throw new TypeError("".concat(Cr(e),' instances for symmetric algorithms must be of type "secret"'))}};function Rr(t,e,r,n){e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?Ir(e,r,n,t):function(t,e,r,n){if(n&&Oe(e))switch(r){case"sign":if(function(t){return"oct"!==t.kty&&"string"===typeof t.d}(e)&&Nr(t,e,r))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(function(t){return"oct"!==t.kty&&"undefined"===typeof t.d}(e)&&Nr(t,e,r))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!mt(e))throw new TypeError(vt.apply(void 0,[t,e].concat(Pr(gt),[n?"JSON Web Key":null])));if("secret"===e.type)throw new TypeError("".concat(Cr(e),' instances for asymmetric algorithms must not be of type "secret"'));if("sign"===r&&"public"===e.type)throw new TypeError("".concat(Cr(e),' instances for asymmetric algorithm signing must be of type "private"'));if("decrypt"===r&&"public"===e.type)throw new TypeError("".concat(Cr(e),' instances for asymmetric algorithm decryption must be of type "private"'));if(e.algorithm&&"verify"===r&&"private"===e.type)throw new TypeError("".concat(Cr(e),' instances for asymmetric algorithm verifying must be of type "public"'));if(e.algorithm&&"encrypt"===r&&"private"===e.type)throw new TypeError("".concat(Cr(e),' instances for asymmetric algorithm encryption must be of type "public"'))}(e,r,n,t)}var Fr=Rr.bind(void 0,!1),Gr=Rr.bind(void 0,!0);function Dr(t){return Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dr(t)}function Hr(){Hr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Dr(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Dr(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ur(t){return function(t){if(Array.isArray(t))return Mr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Mr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Kr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Br(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Kr(i,n,o,a,c,"next",t)}function c(t){Kr(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Wr(t,e,r,n,o){return Jr.apply(this,arguments)}function Jr(){return(Jr=Br(Hr().mark((function t(e,r,n,o,a){var c,u,s,l,f,h;return Hr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n instanceof Uint8Array){t.next=2;break}throw new TypeError(yt(n,"Uint8Array"));case 2:return c=parseInt(e.slice(1,4),10),t.next=5,i.subtle.importKey("raw",n.subarray(c>>3),"AES-CBC",!1,["encrypt"]);case 5:return u=t.sent,t.next=8,i.subtle.importKey("raw",n.subarray(0,c>>3),{hash:"SHA-".concat(c<<1),name:"HMAC"},!1,["sign"]);case 8:return s=t.sent,t.t0=Uint8Array,t.next=12,i.subtle.encrypt({iv:o,name:"AES-CBC"},u,r);case 12:return t.t1=t.sent,l=new t.t0(t.t1),f=g(a,o,l,_(a.length<<3)),t.t2=Uint8Array,t.next=18,i.subtle.sign("HMAC",s,f);case 18:return t.t3=t.sent.slice(0,c>>3),h=new t.t2(t.t3),t.abrupt("return",{ciphertext:l,tag:h,iv:o});case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Vr(t,e,r,n,o){return zr.apply(this,arguments)}function zr(){return(zr=Br(Hr().mark((function t(e,r,n,o,a){var c,u,s,l;return Hr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n instanceof Uint8Array)){t.next=6;break}return t.next=3,i.subtle.importKey("raw",n,"AES-GCM",!1,["encrypt"]);case 3:c=t.sent,t.next=8;break;case 6:ht(n,e,"encrypt"),c=n;case 8:return t.t0=Uint8Array,t.next=11,i.subtle.encrypt({additionalData:a,iv:o,name:"AES-GCM",tagLength:128},c,r);case 11:return t.t1=t.sent,u=new t.t0(t.t1),s=u.slice(-16),l=u.slice(0,-16),t.abrupt("return",{ciphertext:l,tag:s,iv:o});case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Yr=function(){var t=Br(Hr().mark((function t(e,r,n,o,i){return Hr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a(n)||n instanceof Uint8Array){t.next=2;break}throw new TypeError(yt.apply(void 0,[n].concat(Ur(gt),["Uint8Array"])));case 2:o?ot(e,o):o=rt(new Uint8Array(nt(e)>>3)),t.t0=e,t.next="A128CBC-HS256"===t.t0||"A192CBC-HS384"===t.t0||"A256CBC-HS512"===t.t0?6:"A128GCM"===t.t0||"A192GCM"===t.t0||"A256GCM"===t.t0?8:10;break;case 6:return n instanceof Uint8Array&&it(n,parseInt(e.slice(-3),10)),t.abrupt("return",Wr(e,r,n,o,i));case 8:return n instanceof Uint8Array&&it(n,parseInt(e.slice(1,4),10)),t.abrupt("return",Vr(e,r,n,o,i));case 10:throw new J("Unsupported JWE Content Encryption Algorithm");case 11:case"end":return t.stop()}}),t)})));return function(e,r,n,o,i){return t.apply(this,arguments)}}(),qr=Yr;function $r(t){return $r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$r(t)}function Zr(){Zr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==$r(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError($r(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Xr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Qr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Xr(i,n,o,a,c,"next",t)}function c(t){Xr(i,n,o,a,c,"throw",t)}a(void 0)}))}}function tn(t,e,r,n){return en.apply(this,arguments)}function en(){return(en=Qr(Zr().mark((function t(e,r,n,o){var i,a;return Zr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.slice(0,7),t.next=3,qr(i,n,r,o,new Uint8Array(0));case 3:return a=t.sent,t.abrupt("return",{encryptedKey:a.ciphertext,iv:L(a.iv),tag:L(a.tag)});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function rn(t,e,r,n,o){return nn.apply(this,arguments)}function nn(){return(nn=Qr(Zr().mark((function t(e,r,n,o,i){var a;return Zr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.slice(0,7),t.abrupt("return",Pt(a,r,n,o,i,new Uint8Array(0)));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function on(t){return on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},on(t)}function an(){an=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==on(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(on(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function cn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function un(){var t;return t=an().mark((function t(e,r,n,o,i){var a,c,u,s,l,f,h,p,d;return an().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Fr(e,r,"decrypt"),t.next=3,null===(a=ze.normalizePrivateKey)||void 0===a?void 0:a.call(ze,r,e);case 3:if(t.t0=t.sent,t.t0){t.next=6;break}t.t0=r;case 6:r=t.t0,t.t1=e,t.next="dir"===t.t1?10:"ECDH-ES"===t.t1?13:"ECDH-ES+A128KW"===t.t1||"ECDH-ES+A192KW"===t.t1||"ECDH-ES+A256KW"===t.t1?15:"RSA1_5"===t.t1||"RSA-OAEP"===t.t1||"RSA-OAEP-256"===t.t1||"RSA-OAEP-384"===t.t1||"RSA-OAEP-512"===t.t1?50:"PBES2-HS256+A128KW"===t.t1||"PBES2-HS384+A192KW"===t.t1||"PBES2-HS512+A256KW"===t.t1?53:"A128KW"===t.t1||"A192KW"===t.t1||"A256KW"===t.t1?70:"A128GCMKW"===t.t1||"A192GCMKW"===t.t1||"A256GCMKW"===t.t1?73:94;break;case 10:if(void 0===n){t.next=12;break}throw new z("Encountered unexpected JWE Encrypted Key");case 12:return t.abrupt("return",r);case 13:if(void 0===n){t.next=15;break}throw new z("Encountered unexpected JWE Encrypted Key");case 15:if(Rt(o.epk)){t.next=17;break}throw new z('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');case 17:if(ne(r)){t.next=19;break}throw new J("ECDH with the provided key is not allowed or not supported by your javascript runtime");case 19:return t.next=21,Ar(o.epk,e);case 21:if(c=t.sent,void 0===o.apu){t.next=32;break}if("string"===typeof o.apu){t.next=25;break}throw new z('JOSE Header "apu" (Agreement PartyUInfo) invalid');case 25:t.prev=25,u=j(o.apu),t.next=32;break;case 29:throw t.prev=29,t.t2=t.catch(25),new z("Failed to base64url decode the apu");case 32:if(void 0===o.apv){t.next=42;break}if("string"===typeof o.apv){t.next=35;break}throw new z('JOSE Header "apv" (Agreement PartyVInfo) invalid');case 35:t.prev=35,s=j(o.apv),t.next=42;break;case 39:throw t.prev=39,t.t3=t.catch(35),new z("Failed to base64url decode the apv");case 42:return t.next=44,Qt(c,r,"ECDH-ES"===e?o.enc:e,"ECDH-ES"===e?Ye(o.enc):parseInt(e.slice(-5,-2),10),u,s);case 44:if(l=t.sent,"ECDH-ES"!==e){t.next=47;break}return t.abrupt("return",l);case 47:if(void 0!==n){t.next=49;break}throw new z("JWE Encrypted Key missing");case 49:return t.abrupt("return",Vt(e.slice(-6),l,n));case 50:if(void 0!==n){t.next=52;break}throw new z("JWE Encrypted Key missing");case 52:return t.abrupt("return",Se(e,r,n));case 53:if(void 0!==n){t.next=55;break}throw new z("JWE Encrypted Key missing");case 55:if("number"===typeof o.p2c){t.next=57;break}throw new z('JOSE Header "p2c" (PBES2 Count) missing or invalid');case 57:if(f=(null===i||void 0===i?void 0:i.maxPBES2Count)||1e4,!(o.p2c>f)){t.next=60;break}throw new z('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');case 60:if("string"===typeof o.p2s){t.next=62;break}throw new z('JOSE Header "p2s" (PBES2 Salt) missing or invalid');case 62:t.prev=62,h=j(o.p2s),t.next=69;break;case 66:throw t.prev=66,t.t4=t.catch(62),new z("Failed to base64url decode the p2s");case 69:return t.abrupt("return",ye(e,r,n,o.p2c,h));case 70:if(void 0!==n){t.next=72;break}throw new z("JWE Encrypted Key missing");case 72:return t.abrupt("return",Vt(e,r,n));case 73:if(void 0!==n){t.next=75;break}throw new z("JWE Encrypted Key missing");case 75:if("string"===typeof o.iv){t.next=77;break}throw new z('JOSE Header "iv" (Initialization Vector) missing or invalid');case 77:if("string"===typeof o.tag){t.next=79;break}throw new z('JOSE Header "tag" (Authentication Tag) missing or invalid');case 79:t.prev=79,p=j(o.iv),t.next=86;break;case 83:throw t.prev=83,t.t5=t.catch(79),new z("Failed to base64url decode the iv");case 86:t.prev=86,d=j(o.tag),t.next=93;break;case 90:throw t.prev=90,t.t6=t.catch(86),new z("Failed to base64url decode the tag");case 93:return t.abrupt("return",rn(e,r,n,p,d));case 94:throw new J('Invalid or unsupported "alg" (JWE Algorithm) header value');case 95:case"end":return t.stop()}}),t,null,[[25,29],[35,39],[62,66],[79,83],[86,90]])})),un=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){cn(i,n,o,a,c,"next",t)}function c(t){cn(i,n,o,a,c,"throw",t)}a(void 0)}))},un.apply(this,arguments)}var sn=function(t,e,r,n,o){return un.apply(this,arguments)};function ln(t){return function(t){if(Array.isArray(t))return hn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||fn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(t,e){if(t){if("string"==typeof t)return hn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hn(t,e):void 0}}function hn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var pn=function(t,e,r,n,o){if(void 0!==o.crit&&void 0===(null===n||void 0===n?void 0:n.crit))throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some((function(t){return"string"!==typeof t||0===t.length})))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');var i;i=void 0!==r?new Map([].concat(ln(Object.entries(r)),ln(e.entries()))):e;var a,c=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=fn(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(n.crit);try{for(c.s();!(a=c.n()).done;){var u=a.value;if(!i.has(u))throw new J('Extension Header Parameter "'.concat(u,'" is not recognized'));if(void 0===o[u])throw new t('Extension Header Parameter "'.concat(u,'" is missing'));if(i.get(u)&&void 0===n[u])throw new t('Extension Header Parameter "'.concat(u,'" MUST be integrity protected'))}}catch(s){c.e(s)}finally{c.f()}return new Set(n.crit)},dn=function(t,e){if(void 0!==e&&(!Array.isArray(e)||e.some((function(t){return"string"!==typeof t}))))throw new TypeError('"'.concat(t,'" option must be an array of strings'));if(e)return new Set(e)};function yn(t){return yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yn(t)}function vn(){vn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==yn(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(yn(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function mn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mn(Object(r),!0).forEach((function(e){bn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bn(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=yn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function _n(t,e,r){return xn.apply(this,arguments)}function xn(){var t;return t=vn().mark((function t(e,r,n){var o,i,a,c,u,s,l,f,h,p,d,m,b,w,_,x,E,k;return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Rt(e)){t.next=2;break}throw new z("Flattened JWE must be an object");case 2:if(void 0!==e.protected||void 0!==e.header||void 0!==e.unprotected){t.next=4;break}throw new z("JOSE Header missing");case 4:if(void 0===e.iv||"string"===typeof e.iv){t.next=6;break}throw new z("JWE Initialization Vector incorrect type");case 6:if("string"===typeof e.ciphertext){t.next=8;break}throw new z("JWE Ciphertext missing or incorrect type");case 8:if(void 0===e.tag||"string"===typeof e.tag){t.next=10;break}throw new z("JWE Authentication Tag incorrect type");case 10:if(void 0===e.protected||"string"===typeof e.protected){t.next=12;break}throw new z("JWE Protected Header incorrect type");case 12:if(void 0===e.encrypted_key||"string"===typeof e.encrypted_key){t.next=14;break}throw new z("JWE Encrypted Key incorrect type");case 14:if(void 0===e.aad||"string"===typeof e.aad){t.next=16;break}throw new z("JWE AAD incorrect type");case 16:if(void 0===e.header||Rt(e.header)){t.next=18;break}throw new z("JWE Shared Unprotected Header incorrect type");case 18:if(void 0===e.unprotected||Rt(e.unprotected)){t.next=20;break}throw new z("JWE Per-Recipient Unprotected Header incorrect type");case 20:if(!e.protected){t.next=29;break}t.prev=21,a=j(e.protected),i=JSON.parse(v.decode(a)),t.next=29;break;case 26:throw t.prev=26,t.t0=t.catch(21),new z("JWE Protected Header is invalid");case 29:if(Nt(i,e.header,e.unprotected)){t.next=31;break}throw new z("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");case 31:if(c=gn(gn(gn({},i),e.header),e.unprotected),pn(z,new Map,null===n||void 0===n?void 0:n.crit,i,c),void 0===c.zip){t.next=35;break}throw new J('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');case 35:if(u=c.alg,s=c.enc,"string"===typeof u&&u){t.next=38;break}throw new z("missing JWE Algorithm (alg) in JWE Header");case 38:if("string"===typeof s&&s){t.next=40;break}throw new z("missing JWE Encryption Algorithm (enc) in JWE Header");case 40:if(l=n&&dn("keyManagementAlgorithms",n.keyManagementAlgorithms),f=n&&dn("contentEncryptionAlgorithms",n.contentEncryptionAlgorithms),!(l&&!l.has(u)||!l&&u.startsWith("PBES2"))){t.next=44;break}throw new W('"alg" (Algorithm) Header Parameter value not allowed');case 44:if(!f||f.has(s)){t.next=46;break}throw new W('"enc" (Encryption Algorithm) Header Parameter value not allowed');case 46:if(void 0===e.encrypted_key){t.next=54;break}t.prev=47,h=j(e.encrypted_key),t.next=54;break;case 51:throw t.prev=51,t.t1=t.catch(47),new z("Failed to base64url decode the encrypted_key");case 54:if(p=!1,"function"!==typeof r){t.next=60;break}return t.next=58,r(i,e);case 58:r=t.sent,p=!0;case 60:return t.prev=60,t.next=63,sn(u,r,h,c,n);case 63:d=t.sent,t.next=71;break;case 66:if(t.prev=66,t.t2=t.catch(60),!(t.t2 instanceof TypeError||t.t2 instanceof z||t.t2 instanceof J)){t.next=70;break}throw t.t2;case 70:d=qe(s);case 71:if(void 0===e.iv){t.next=79;break}t.prev=72,m=j(e.iv),t.next=79;break;case 76:throw t.prev=76,t.t3=t.catch(72),new z("Failed to base64url decode the iv");case 79:if(void 0===e.tag){t.next=87;break}t.prev=80,b=j(e.tag),t.next=87;break;case 84:throw t.prev=84,t.t4=t.catch(80),new z("Failed to base64url decode the tag");case 87:w=y.encode(null!==(o=e.protected)&&void 0!==o?o:""),_=void 0!==e.aad?g(w,y.encode("."),y.encode(e.aad)):w,t.prev=89,x=j(e.ciphertext),t.next=96;break;case 93:throw t.prev=93,t.t5=t.catch(89),new z("Failed to base64url decode the ciphertext");case 96:return t.next=98,Pt(s,d,x,m,b,_);case 98:if(E=t.sent,k={plaintext:E},void 0!==e.protected&&(k.protectedHeader=i),void 0===e.aad){t.next=109;break}t.prev=102,k.additionalAuthenticatedData=j(e.aad),t.next=109;break;case 106:throw t.prev=106,t.t6=t.catch(102),new z("Failed to base64url decode the aad");case 109:if(void 0!==e.unprotected&&(k.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(k.unprotectedHeader=e.header),!p){t.next=113;break}return t.abrupt("return",gn(gn({},k),{},{key:r}));case 113:return t.abrupt("return",k);case 114:case"end":return t.stop()}}),t,null,[[21,26],[47,51],[60,66],[72,76],[80,84],[89,93],[102,106]])})),xn=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){wn(i,n,o,a,c,"next",t)}function c(t){wn(i,n,o,a,c,"throw",t)}a(void 0)}))},xn.apply(this,arguments)}function En(t){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},En(t)}function kn(){kn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==En(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(En(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Sn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function On(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sn(Object(r),!0).forEach((function(e){Ln(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ln(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=En(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=En(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==En(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function An(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function jn(t,e,r){return Pn.apply(this,arguments)}function Pn(){var t;return t=kn().mark((function t(e,r,n){var o,i,a,c,u,s,l,f;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof Uint8Array&&(e=v.decode(e)),"string"===typeof e){t.next=3;break}throw new z("Compact JWE must be a string or Uint8Array");case 3:if(o=e.split("."),i=o[0],a=o[1],c=o[2],u=o[3],s=o[4],5===o.length){t.next=6;break}throw new z("Invalid Compact JWE");case 6:return t.next=8,_n({ciphertext:u,iv:c||void 0,protected:i,tag:s||void 0,encrypted_key:a||void 0},r,n);case 8:if(l=t.sent,f={plaintext:l.plaintext,protectedHeader:l.protectedHeader},"function"!==typeof r){t.next=12;break}return t.abrupt("return",On(On({},f),{},{key:l.key}));case 12:return t.abrupt("return",f);case 13:case"end":return t.stop()}}),t)})),Pn=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){An(i,n,o,a,c,"next",t)}function c(t){An(i,n,o,a,c,"throw",t)}a(void 0)}))},Pn.apply(this,arguments)}function Tn(t){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tn(t)}function Cn(){Cn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Tn(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Tn(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Nn(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return In(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?In(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function In(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Rn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Fn(t,e,r){return Gn.apply(this,arguments)}function Gn(){var t;return t=Cn().mark((function t(e,r,n){var o,i,a;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Rt(e)){t.next=2;break}throw new z("General JWE must be an object");case 2:if(Array.isArray(e.recipients)&&e.recipients.every(Rt)){t.next=4;break}throw new z("JWE Recipients missing or incorrect type");case 4:if(e.recipients.length){t.next=6;break}throw new z("JWE Recipients has no members");case 6:o=Nn(e.recipients),t.prev=7,o.s();case 9:if((i=o.n()).done){t.next=21;break}return a=i.value,t.prev=11,t.next=14,_n({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:a.encrypted_key,header:a.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},r,n);case 14:return t.abrupt("return",t.sent);case 17:t.prev=17,t.t0=t.catch(11);case 19:t.next=9;break;case 21:t.next=26;break;case 23:t.prev=23,t.t1=t.catch(7),o.e(t.t1);case 26:return t.prev=26,o.f(),t.finish(26);case 29:throw new V;case 30:case"end":return t.stop()}}),t,null,[[7,23,26,29],[11,17]])})),Gn=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Rn(i,n,o,a,c,"next",t)}function c(t){Rn(i,n,o,a,c,"throw",t)}a(void 0)}))},Gn.apply(this,arguments)}var Dn=Symbol();function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}var Un=["ext","key_ops","alg","use"];function Mn(){Mn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Hn(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Hn(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Kn(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Bn(t){return function(t){if(Array.isArray(t))return Wn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Wn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wn(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Jn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var Vn=function(){var t,e=(t=Mn().mark((function t(e){var r,n;return Mn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e instanceof Uint8Array)){t.next=2;break}return t.abrupt("return",{kty:"oct",k:L(e)});case 2:if(a(e)){t.next=4;break}throw new TypeError(yt.apply(void 0,[e].concat(Bn(gt),["Uint8Array"])));case 4:if(e.extractable){t.next=6;break}throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");case 6:return t.next=8,i.subtle.exportKey("jwk",e);case 8:return(r=t.sent).ext,r.key_ops,r.alg,r.use,n=Kn(r,Un),t.abrupt("return",n);case 15:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Jn(i,n,o,a,c,"next",t)}function c(t){Jn(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),zn=Vn;function Yn(t){return Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yn(t)}function qn(){qn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Yn(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Yn(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function $n(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Zn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){$n(i,n,o,a,c,"next",t)}function c(t){$n(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Xn(t){return Qn.apply(this,arguments)}function Qn(){return(Qn=Zn(qn().mark((function t(e){return qn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",or(e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function to(t){return eo.apply(this,arguments)}function eo(){return(eo=Zn(qn().mark((function t(e){return qn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ir(e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ro(t){return no.apply(this,arguments)}function no(){return(no=Zn(qn().mark((function t(e){return qn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",zn(e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function oo(t){return oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oo(t)}var io=["encryptedKey"],ao=["encryptedKey"];function co(){co=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==oo(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(oo(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function uo(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function so(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function lo(){var t;return t=co().mark((function t(e,r,n,o){var i,a,c,u,s,l,f,h,p,d,y,v,m,g,b,w,_,x,E,k,S=arguments;return co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=S.length>4&&void 0!==S[4]?S[4]:{},Fr(e,n,"encrypt"),t.next=4,null===(i=ze.normalizePublicKey)||void 0===i?void 0:i.call(ze,n,e);case 4:if(t.t0=t.sent,t.t0){t.next=7;break}t.t0=n;case 7:n=t.t0,t.t1=e,t.next="dir"===t.t1?11:"ECDH-ES"===t.t1||"ECDH-ES+A128KW"===t.t1||"ECDH-ES+A192KW"===t.t1||"ECDH-ES+A256KW"===t.t1?13:"RSA1_5"===t.t1||"RSA-OAEP"===t.t1||"RSA-OAEP-256"===t.t1||"RSA-OAEP-384"===t.t1||"RSA-OAEP-512"===t.t1?45:"PBES2-HS256+A128KW"===t.t1||"PBES2-HS384+A192KW"===t.t1||"PBES2-HS512+A256KW"===t.t1?50:"A128KW"===t.t1||"A192KW"===t.t1||"A256KW"===t.t1?58:"A128GCMKW"===t.t1||"A192GCMKW"===t.t1||"A256GCMKW"===t.t1?63:71;break;case 11:return s=n,t.abrupt("break",72);case 13:if(ne(n)){t.next=15;break}throw new J("ECDH with the provided key is not allowed or not supported by your javascript runtime");case 15:if(l=a.apu,f=a.apv,h=a.epk,t.t2=h,t.t2){t.next=22;break}return t.next=21,ee(n);case 21:h=t.sent.privateKey;case 22:return t.next=24,ro(h);case 24:return p=t.sent,d=p.x,y=p.y,v=p.crv,m=p.kty,t.next=31,Qt(n,h,"ECDH-ES"===e?r:e,"ECDH-ES"===e?Ye(r):parseInt(e.slice(-5,-2),10),l,f);case 31:if(g=t.sent,u={epk:{x:d,crv:v,kty:m}},"EC"===m&&(u.epk.y=y),l&&(u.apu=L(l)),f&&(u.apv=L(f)),"ECDH-ES"!==e){t.next=39;break}return s=g,t.abrupt("break",72);case 39:return s=o||qe(r),b=e.slice(-6),t.next=43,Jt(b,g,s);case 43:return c=t.sent,t.abrupt("break",72);case 45:return s=o||qe(r),t.next=48,ke(e,n,s);case 48:return c=t.sent,t.abrupt("break",72);case 50:return s=o||qe(r),w=a.p2c,_=a.p2s,t.next=54,de(e,n,s,w,_);case 54:return x=t.sent,c=x.encryptedKey,u=uo(x,io),t.abrupt("break",72);case 58:return s=o||qe(r),t.next=61,Jt(e,n,s);case 61:return c=t.sent,t.abrupt("break",72);case 63:return s=o||qe(r),E=a.iv,t.next=67,tn(e,n,s,E);case 67:return k=t.sent,c=k.encryptedKey,u=uo(k,ao),t.abrupt("break",72);case 71:throw new J('Invalid or unsupported "alg" (JWE Algorithm) header value');case 72:return t.abrupt("return",{cek:s,encryptedKey:c,parameters:u});case 73:case"end":return t.stop()}}),t)})),lo=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){so(i,n,o,a,c,"next",t)}function c(t){so(i,n,o,a,c,"throw",t)}a(void 0)}))},lo.apply(this,arguments)}var fo=function(t,e,r,n){return lo.apply(this,arguments)};function ho(t){return ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ho(t)}function po(){po=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ho(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ho(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function yo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yo(Object(r),!0).forEach((function(e){mo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mo(t,e,r){return(e=wo(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function go(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function bo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wo(n.key),n)}}function wo(t){var e=function(t,e){if("object"!=ho(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ho(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ho(e)?e:e+""}var _o=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e},e=[{key:"setKeyManagementParameters",value:function(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}},{key:"setProtectedHeader",value:function(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}},{key:"setSharedUnprotectedHeader",value:function(t){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=t,this}},{key:"setUnprotectedHeader",value:function(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}},{key:"setAdditionalAuthenticatedData",value:function(t){return this._aad=t,this}},{key:"setContentEncryptionKey",value:function(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}},{key:"setInitializationVector",value:function(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}},{key:"encrypt",value:(n=po().mark((function t(e,r){var n,o,i,a,c,u,s,l,f,h,p,d,m,b,w;return po().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._protectedHeader||this._unprotectedHeader||this._sharedUnprotectedHeader){t.next=2;break}throw new z("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");case 2:if(Nt(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader)){t.next=4;break}throw new z("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");case 4:if(n=vo(vo(vo({},this._protectedHeader),this._unprotectedHeader),this._sharedUnprotectedHeader),pn(z,new Map,null===r||void 0===r?void 0:r.crit,this._protectedHeader,n),void 0===n.zip){t.next=8;break}throw new J('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');case 8:if(o=n.alg,i=n.enc,"string"===typeof o&&o){t.next=11;break}throw new z('JWE "alg" (Algorithm) Header Parameter missing or invalid');case 11:if("string"===typeof i&&i){t.next=13;break}throw new z('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');case 13:if(!this._cek||"dir"!==o&&"ECDH-ES"!==o){t.next=15;break}throw new TypeError('setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header '.concat(o));case 15:return t.next=17,fo(o,i,e,this._cek,this._keyManagementParameters);case 17:return s=t.sent,c=s.cek,a=s.encryptedKey,(u=s.parameters)&&(r&&Dn in r?this._unprotectedHeader?this._unprotectedHeader=vo(vo({},this._unprotectedHeader),u):this.setUnprotectedHeader(u):this._protectedHeader?this._protectedHeader=vo(vo({},this._protectedHeader),u):this.setProtectedHeader(u)),f=this._protectedHeader?y.encode(L(JSON.stringify(this._protectedHeader))):y.encode(""),this._aad?(h=L(this._aad),l=g(f,y.encode("."),y.encode(h))):l=f,t.next=26,qr(i,this._plaintext,c,this._iv,l);case 26:return p=t.sent,d=p.ciphertext,m=p.tag,b=p.iv,w={ciphertext:L(d)},b&&(w.iv=L(b)),m&&(w.tag=L(m)),a&&(w.encrypted_key=L(a)),h&&(w.aad=h),this._protectedHeader&&(w.protected=v.decode(f)),this._sharedUnprotectedHeader&&(w.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(w.header=this._unprotectedHeader),t.abrupt("return",w);case 39:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){go(i,r,o,a,c,"next",t)}function c(t){go(i,r,o,a,c,"throw",t)}a(void 0)}))},function(t,e){return o.apply(this,arguments)})}],e&&bo(t.prototype,e),r&&bo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function xo(){xo=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==jo(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(jo(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Eo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ko(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Eo(Object(r),!0).forEach((function(e){So(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Eo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function So(t,e,r){return(e=No(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Lo(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lo(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Ao(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function jo(t){return jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jo(t)}function Po(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function To(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,No(n.key),n)}}function Co(t,e,r){return e&&To(t.prototype,e),r&&To(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function No(t){var e=function(t,e){if("object"!=jo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jo(e)?e:e+""}var Io=function(){return Co((function t(e,r,n){Po(this,t),this.parent=e,this.key=r,this.options=n}),[{key:"setUnprotectedHeader",value:function(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}},{key:"addRecipient",value:function(){var t;return(t=this.parent).addRecipient.apply(t,arguments)}},{key:"encrypt",value:function(){var t;return(t=this.parent).encrypt.apply(t,arguments)}},{key:"done",value:function(){return this.parent}}])}(),Ro=function(){return Co((function t(e){Po(this,t),this._recipients=[],this._plaintext=e}),[{key:"addRecipient",value:function(t,e){var r=new Io(this,t,{crit:null===e||void 0===e?void 0:e.crit});return this._recipients.push(r),r}},{key:"setProtectedHeader",value:function(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}},{key:"setSharedUnprotectedHeader",value:function(t){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}},{key:"setAdditionalAuthenticatedData",value:function(t){return this._aad=t,this}},{key:"encrypt",value:(t=xo().mark((function t(){var e,r,n,o,i,a,c,u,s,l,f,h,p,d,y,v,m,g,b,w,_,x,E;return xo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._recipients.length){t.next=2;break}throw new z("at least one recipient must be added");case 2:if(1!==this._recipients.length){t.next=14;break}return e=Oo(this._recipients,1),r=e[0],t.next=6,new _o(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(r.unprotectedHeader).encrypt(r.key,ko({},r.options));case 6:return n=t.sent,o={ciphertext:n.ciphertext,iv:n.iv,recipients:[{}],tag:n.tag},n.aad&&(o.aad=n.aad),n.protected&&(o.protected=n.protected),n.unprotected&&(o.unprotected=n.unprotected),n.encrypted_key&&(o.recipients[0].encrypted_key=n.encrypted_key),n.header&&(o.recipients[0].header=n.header),t.abrupt("return",o);case 14:a=0;case 15:if(!(a<this._recipients.length)){t.next=39;break}if(c=this._recipients[a],Nt(this._protectedHeader,this._unprotectedHeader,c.unprotectedHeader)){t.next=19;break}throw new z("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");case 19:if(u=ko(ko(ko({},this._protectedHeader),this._unprotectedHeader),c.unprotectedHeader),"string"===typeof(s=u.alg)&&s){t.next=23;break}throw new z('JWE "alg" (Algorithm) Header Parameter missing or invalid');case 23:if("dir"!==s&&"ECDH-ES"!==s){t.next=25;break}throw new z('"dir" and "ECDH-ES" alg may only be used with a single recipient');case 25:if("string"===typeof u.enc&&u.enc){t.next=27;break}throw new z('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');case 27:if(i){t.next=31;break}i=u.enc,t.next=33;break;case 31:if(i===u.enc){t.next=33;break}throw new z('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');case 33:if(pn(z,new Map,c.options.crit,this._protectedHeader,u),void 0===u.zip){t.next=36;break}throw new J('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');case 36:a++,t.next=15;break;case 39:l=qe(i),f={ciphertext:"",iv:"",recipients:[],tag:""},h=0;case 42:if(!(h<this._recipients.length)){t.next=71;break}if(v=this._recipients[h],m={},f.recipients.push(m),g=ko(ko(ko({},this._protectedHeader),this._unprotectedHeader),v.unprotectedHeader),b=g.alg.startsWith("PBES2")?2048+h:void 0,0!==h){t.next=61;break}return t.next=51,new _o(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(l).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(v.unprotectedHeader).setKeyManagementParameters({p2c:b}).encrypt(v.key,ko(ko({},v.options),{},So({},Dn,!0)));case 51:return w=t.sent,f.ciphertext=w.ciphertext,f.iv=w.iv,f.tag=w.tag,w.aad&&(f.aad=w.aad),w.protected&&(f.protected=w.protected),w.unprotected&&(f.unprotected=w.unprotected),m.encrypted_key=w.encrypted_key,w.header&&(m.header=w.header),t.abrupt("continue",68);case 61:return t.next=63,fo((null===(p=v.unprotectedHeader)||void 0===p?void 0:p.alg)||(null===(d=this._protectedHeader)||void 0===d?void 0:d.alg)||(null===(y=this._unprotectedHeader)||void 0===y?void 0:y.alg),i,v.key,l,{p2c:b});case 63:_=t.sent,x=_.encryptedKey,E=_.parameters,m.encrypted_key=L(x),(v.unprotectedHeader||E)&&(m.header=ko(ko({},v.unprotectedHeader),E));case 68:h++,t.next=42;break;case 71:return t.abrupt("return",f);case 72:case"end":return t.stop()}}),t,this)})),e=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ao(i,n,o,a,c,"next",t)}function c(t){Ao(i,n,o,a,c,"throw",t)}a(void 0)}))},function(){return e.apply(this,arguments)})}]);var t,e}();function Fo(t,e){var r="SHA-".concat(t.slice(-3));switch(t){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:t.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":return{name:"Ed25519"};case"EdDSA":return{name:e.name};default:throw new J("alg ".concat(t," is not supported either by JOSE or your javascript runtime"))}}function Go(t){return Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Go(t)}function Do(){Do=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Go(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Go(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ho(t){return function(t){if(Array.isArray(t))return Uo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Uo(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Uo(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Mo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ko(t,e,r){return Bo.apply(this,arguments)}function Bo(){var t;return t=Do().mark((function t(e,r,n){return Do().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("sign"!==n){t.next=4;break}return t.next=3,ze.normalizePrivateKey(r,e);case 3:r=t.sent;case 4:if("verify"!==n){t.next=8;break}return t.next=7,ze.normalizePublicKey(r,e);case 7:r=t.sent;case 8:if(!a(r)){t.next=11;break}return ft(r,e,n),t.abrupt("return",r);case 11:if(!(r instanceof Uint8Array)){t.next=15;break}if(e.startsWith("HS")){t.next=14;break}throw new TypeError(yt.apply(void 0,[r].concat(Ho(gt))));case 14:return t.abrupt("return",i.subtle.importKey("raw",r,{hash:"SHA-".concat(e.slice(-3)),name:"HMAC"},!1,[n]));case 15:throw new TypeError(yt.apply(void 0,[r].concat(Ho(gt),["Uint8Array","JSON Web Key"])));case 16:case"end":return t.stop()}}),t)})),Bo=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Mo(i,n,o,a,c,"next",t)}function c(t){Mo(i,n,o,a,c,"throw",t)}a(void 0)}))},Bo.apply(this,arguments)}function Wo(t){return Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wo(t)}function Jo(){Jo=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Wo(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Wo(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Vo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var zo=function(){var t,e=(t=Jo().mark((function t(e,r,n,o){var a,c;return Jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ko(e,r,"verify");case 2:return a=t.sent,me(e,a),c=Fo(e,a.algorithm),t.prev=5,t.next=8,i.subtle.verify(c,a,n,o);case 8:return t.abrupt("return",t.sent);case 11:return t.prev=11,t.t0=t.catch(5),t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,null,[[5,11]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Vo(i,n,o,a,c,"next",t)}function c(t){Vo(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r,n,o){return e.apply(this,arguments)}}(),Yo=zo;function qo(t){return qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qo(t)}function $o(){$o=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==qo(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(qo(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Zo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Xo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zo(Object(r),!0).forEach((function(e){Qo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Qo(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=qo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qo(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ti(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ei(t,e,r){return ri.apply(this,arguments)}function ri(){var t;return t=$o().mark((function t(e,r,n){var o,i,a,c,u,s,l,f,h,p,d,m,b;return $o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Rt(e)){t.next=2;break}throw new Y("Flattened JWS must be an object");case 2:if(void 0!==e.protected||void 0!==e.header){t.next=4;break}throw new Y('Flattened JWS must have either of the "protected" or "header" members');case 4:if(void 0===e.protected||"string"===typeof e.protected){t.next=6;break}throw new Y("JWS Protected Header incorrect type");case 6:if(void 0!==e.payload){t.next=8;break}throw new Y("JWS Payload missing");case 8:if("string"===typeof e.signature){t.next=10;break}throw new Y("JWS Signature missing or incorrect type");case 10:if(void 0===e.header||Rt(e.header)){t.next=12;break}throw new Y("JWS Unprotected Header incorrect type");case 12:if(i={},!e.protected){t.next=22;break}t.prev=14,a=j(e.protected),i=JSON.parse(v.decode(a)),t.next=22;break;case 19:throw t.prev=19,t.t0=t.catch(14),new Y("JWS Protected Header is invalid");case 22:if(Nt(i,e.header)){t.next=24;break}throw new Y("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");case 24:if(c=Xo(Xo({},i),e.header),u=pn(Y,new Map([["b64",!0]]),null===n||void 0===n?void 0:n.crit,i,c),s=!0,!u.has("b64")){t.next=31;break}if("boolean"===typeof(s=i.b64)){t.next=31;break}throw new Y('The "b64" (base64url-encode payload) Header Parameter must be a boolean');case 31:if("string"===typeof(l=c.alg)&&l){t.next=34;break}throw new Y('JWS "alg" (Algorithm) Header Parameter missing or invalid');case 34:if(!(f=n&&dn("algorithms",n.algorithms))||f.has(l)){t.next=37;break}throw new W('"alg" (Algorithm) Header Parameter value not allowed');case 37:if(!s){t.next=42;break}if("string"===typeof e.payload){t.next=40;break}throw new Y("JWS Payload must be a string");case 40:t.next=44;break;case 42:if("string"===typeof e.payload||e.payload instanceof Uint8Array){t.next=44;break}throw new Y("JWS Payload must be a string or an Uint8Array instance");case 44:if(h=!1,"function"!==typeof r){t.next=57;break}return t.next=48,r(i,e);case 48:if(r=t.sent,h=!0,Gr(l,r,"verify"),!Oe(r)){t.next=55;break}return t.next=54,Ar(r,l);case 54:r=t.sent;case 55:t.next=58;break;case 57:Gr(l,r,"verify");case 58:p=g(y.encode(null!==(o=e.protected)&&void 0!==o?o:""),y.encode("."),"string"===typeof e.payload?y.encode(e.payload):e.payload),t.prev=59,d=j(e.signature),t.next=66;break;case 63:throw t.prev=63,t.t1=t.catch(59),new Y("Failed to base64url decode the signature");case 66:return t.next=68,Yo(l,r,d,p);case 68:if(t.sent){t.next=71;break}throw new et;case 71:if(!s){t.next=81;break}t.prev=72,m=j(e.payload),t.next=79;break;case 76:throw t.prev=76,t.t2=t.catch(72),new Y("Failed to base64url decode the payload");case 79:t.next=82;break;case 81:m="string"===typeof e.payload?y.encode(e.payload):e.payload;case 82:if(b={payload:m},void 0!==e.protected&&(b.protectedHeader=i),void 0!==e.header&&(b.unprotectedHeader=e.header),!h){t.next=87;break}return t.abrupt("return",Xo(Xo({},b),{},{key:r}));case 87:return t.abrupt("return",b);case 88:case"end":return t.stop()}}),t,null,[[14,19],[59,63],[72,76]])})),ri=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ti(i,n,o,a,c,"next",t)}function c(t){ti(i,n,o,a,c,"throw",t)}a(void 0)}))},ri.apply(this,arguments)}function ni(t){return ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ni(t)}function oi(){oi=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ni(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ni(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ii(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ai(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ii(Object(r),!0).forEach((function(e){ci(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ii(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ci(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=ni(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ni(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ni(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ui(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function si(t,e,r){return li.apply(this,arguments)}function li(){var t;return t=oi().mark((function t(e,r,n){var o,i,a,c,u,s;return oi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof Uint8Array&&(e=v.decode(e)),"string"===typeof e){t.next=3;break}throw new Y("Compact JWS must be a string or Uint8Array");case 3:if(o=e.split("."),i=o[0],a=o[1],c=o[2],3===o.length){t.next=6;break}throw new Y("Invalid Compact JWS");case 6:return t.next=8,ei({payload:a,protected:i,signature:c},r,n);case 8:if(u=t.sent,s={payload:u.payload,protectedHeader:u.protectedHeader},"function"!==typeof r){t.next=12;break}return t.abrupt("return",ai(ai({},s),{},{key:u.key}));case 12:return t.abrupt("return",s);case 13:case"end":return t.stop()}}),t)})),li=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ui(i,n,o,a,c,"next",t)}function c(t){ui(i,n,o,a,c,"throw",t)}a(void 0)}))},li.apply(this,arguments)}function fi(t){return fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fi(t)}function hi(){hi=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==fi(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(fi(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function pi(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return di(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?di(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function di(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function yi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function vi(t,e,r){return mi.apply(this,arguments)}function mi(){var t;return t=hi().mark((function t(e,r,n){var o,i,a;return hi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Rt(e)){t.next=2;break}throw new Y("General JWS must be an object");case 2:if(Array.isArray(e.signatures)&&e.signatures.every(Rt)){t.next=4;break}throw new Y("JWS Signatures missing or incorrect type");case 4:o=pi(e.signatures),t.prev=5,o.s();case 7:if((i=o.n()).done){t.next=19;break}return a=i.value,t.prev=9,t.next=12,ei({header:a.header,payload:e.payload,protected:a.protected,signature:a.signature},r,n);case 12:return t.abrupt("return",t.sent);case 15:t.prev=15,t.t0=t.catch(9);case 17:t.next=7;break;case 19:t.next=24;break;case 21:t.prev=21,t.t1=t.catch(5),o.e(t.t1);case 24:return t.prev=24,o.f(),t.finish(24);case 27:throw new et;case 28:case"end":return t.stop()}}),t,null,[[5,21,24,27],[9,15]])})),mi=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){yi(i,n,o,a,c,"next",t)}function c(t){yi(i,n,o,a,c,"throw",t)}a(void 0)}))},mi.apply(this,arguments)}var gi=function(t){return Math.floor(t.getTime()/1e3)},bi=86400,wi=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,_i=function(t){var e=wi.exec(t);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");var r,n=parseFloat(e[2]);switch(e[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":r=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":r=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":r=Math.round(3600*n);break;case"day":case"days":case"d":r=Math.round(n*bi);break;case"week":case"weeks":case"w":r=Math.round(604800*n);break;default:r=Math.round(31557600*n)}return"-"===e[1]||"ago"===e[4]?-r:r};function xi(t){return xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xi(t)}function Ei(t){return function(t){if(Array.isArray(t))return Si(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ki(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ki(t,e){if(t){if("string"==typeof t)return Si(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Si(t,e):void 0}}function Si(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Oi=function(t){return t.toLowerCase().replace(/^application\//,"")},Li=function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{r=JSON.parse(v.decode(e))}catch(x){}if(!Rt(r))throw new q("JWT Claims Set must be a top-level JSON object");var o=n.typ;if(o&&("string"!==typeof t.typ||Oi(t.typ)!==Oi(o)))throw new K('unexpected "typ" JWT header value',r,"typ","check_failed");var i=n.requiredClaims,a=void 0===i?[]:i,c=n.issuer,u=n.subject,s=n.audience,l=n.maxTokenAge,f=Ei(a);void 0!==l&&f.push("iat"),void 0!==s&&f.push("aud"),void 0!==u&&f.push("sub"),void 0!==c&&f.push("iss");var h,p,d,y,m=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ki(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(new Set(f.reverse()));try{for(m.s();!(h=m.n()).done;){var g=h.value;if(!(g in r))throw new K('missing required "'.concat(g,'" claim'),r,g,"missing")}}catch(E){m.e(E)}finally{m.f()}if(c&&!(Array.isArray(c)?c:[c]).includes(r.iss))throw new K('unexpected "iss" claim value',r,"iss","check_failed");if(u&&r.sub!==u)throw new K('unexpected "sub" claim value',r,"sub","check_failed");if(s&&(p=r.aud,d="string"===typeof s?[s]:s,!("string"===typeof p?d.includes(p):Array.isArray(p)&&d.some(Set.prototype.has.bind(new Set(p))))))throw new K('unexpected "aud" claim value',r,"aud","check_failed");switch(xi(n.clockTolerance)){case"string":y=_i(n.clockTolerance);break;case"number":y=n.clockTolerance;break;case"undefined":y=0;break;default:throw new TypeError("Invalid clockTolerance option type")}var b=n.currentDate,w=gi(b||new Date);if((void 0!==r.iat||l)&&"number"!==typeof r.iat)throw new K('"iat" claim must be a number',r,"iat","invalid");if(void 0!==r.nbf){if("number"!==typeof r.nbf)throw new K('"nbf" claim must be a number',r,"nbf","invalid");if(r.nbf>w+y)throw new K('"nbf" claim timestamp check failed',r,"nbf","check_failed")}if(void 0!==r.exp){if("number"!==typeof r.exp)throw new K('"exp" claim must be a number',r,"exp","invalid");if(r.exp<=w-y)throw new B('"exp" claim timestamp check failed',r,"exp","check_failed")}if(l){var _=w-r.iat;if(_-y>("number"===typeof l?l:_i(l)))throw new B('"iat" claim timestamp check failed (too far in the past)',r,"iat","check_failed");if(_<0-y)throw new K('"iat" claim timestamp check failed (it should be in the past)',r,"iat","check_failed")}return r};function Ai(t){return Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ai(t)}function ji(){ji=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ai(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ai(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Pi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ti(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pi(Object(r),!0).forEach((function(e){Ci(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ci(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Ai(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ai(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ai(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ni(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ii(t,e,r){return Ri.apply(this,arguments)}function Ri(){var t;return t=ji().mark((function t(e,r,n){var o,i,a,c;return ji().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,si(e,r,n);case 2:if(i=t.sent,null===(o=i.protectedHeader.crit)||void 0===o||!o.includes("b64")||!1!==i.protectedHeader.b64){t.next=5;break}throw new q("JWTs MUST NOT use unencoded payload");case 5:if(a=Li(i.protectedHeader,i.payload,n),c={payload:a,protectedHeader:i.protectedHeader},"function"!==typeof r){t.next=9;break}return t.abrupt("return",Ti(Ti({},c),{},{key:i.key}));case 9:return t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})),Ri=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ni(i,n,o,a,c,"next",t)}function c(t){Ni(i,n,o,a,c,"throw",t)}a(void 0)}))},Ri.apply(this,arguments)}function Fi(t){return Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fi(t)}function Gi(){Gi=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Fi(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Fi(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Di(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Hi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Di(Object(r),!0).forEach((function(e){Ui(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Di(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ui(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Fi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fi(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ki(t,e,r){return Bi.apply(this,arguments)}function Bi(){var t;return t=Gi().mark((function t(e,r,n){var o,i,a,c;return Gi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,jn(e,r,n);case 2:if(o=t.sent,i=Li(o.protectedHeader,o.plaintext,n),void 0===(a=o.protectedHeader).iss||a.iss===i.iss){t.next=7;break}throw new K('replicated "iss" claim header parameter mismatch',i,"iss","mismatch");case 7:if(void 0===a.sub||a.sub===i.sub){t.next=9;break}throw new K('replicated "sub" claim header parameter mismatch',i,"sub","mismatch");case 9:if(void 0===a.aud||JSON.stringify(a.aud)===JSON.stringify(i.aud)){t.next=11;break}throw new K('replicated "aud" claim header parameter mismatch',i,"aud","mismatch");case 11:if(c={payload:i,protectedHeader:a},"function"!==typeof r){t.next=14;break}return t.abrupt("return",Hi(Hi({},c),{},{key:o.key}));case 14:return t.abrupt("return",c);case 15:case"end":return t.stop()}}),t)})),Bi=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Mi(i,n,o,a,c,"next",t)}function c(t){Mi(i,n,o,a,c,"throw",t)}a(void 0)}))},Bi.apply(this,arguments)}function Wi(t){return Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wi(t)}function Ji(){Ji=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Wi(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Wi(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Vi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function zi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yi(n.key),n)}}function Yi(t){var e=function(t,e){if("object"!=Wi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Wi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wi(e)?e:e+""}var qi=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._flattened=new _o(e)},e=[{key:"setContentEncryptionKey",value:function(t){return this._flattened.setContentEncryptionKey(t),this}},{key:"setInitializationVector",value:function(t){return this._flattened.setInitializationVector(t),this}},{key:"setProtectedHeader",value:function(t){return this._flattened.setProtectedHeader(t),this}},{key:"setKeyManagementParameters",value:function(t){return this._flattened.setKeyManagementParameters(t),this}},{key:"encrypt",value:(n=Ji().mark((function t(e,r){var n;return Ji().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._flattened.encrypt(e,r);case 2:return n=t.sent,t.abrupt("return",[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join("."));case 4:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){Vi(i,r,o,a,c,"next",t)}function c(t){Vi(i,r,o,a,c,"throw",t)}a(void 0)}))},function(t,e){return o.apply(this,arguments)})}],e&&zi(t.prototype,e),r&&zi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function $i(t){return $i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$i(t)}function Zi(){Zi=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==$i(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError($i(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Xi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var Qi=function(){var t,e=(t=Zi().mark((function t(e,r,n){var o,a;return Zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ko(e,r,"sign");case 2:return o=t.sent,me(e,o),t.next=6,i.subtle.sign(Fo(e,o.algorithm),o,n);case 6:return a=t.sent,t.abrupt("return",new Uint8Array(a));case 8:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Xi(i,n,o,a,c,"next",t)}function c(t){Xi(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r,n){return e.apply(this,arguments)}}(),ta=Qi;function ea(t){return ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ea(t)}function ra(){ra=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ea(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ea(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function na(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function oa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?na(Object(r),!0).forEach((function(e){ia(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):na(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ia(t,e,r){return(e=ua(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aa(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ca(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ua(n.key),n)}}function ua(t){var e=function(t,e){if("object"!=ea(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ea(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ea(e)?e:e+""}var sa=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e},e=[{key:"setProtectedHeader",value:function(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}},{key:"setUnprotectedHeader",value:function(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}},{key:"sign",value:(n=ra().mark((function t(e,r){var n,o,i,a,c,u,s,l,f;return ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._protectedHeader||this._unprotectedHeader){t.next=2;break}throw new Y("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");case 2:if(Nt(this._protectedHeader,this._unprotectedHeader)){t.next=4;break}throw new Y("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");case 4:if(n=oa(oa({},this._protectedHeader),this._unprotectedHeader),o=pn(Y,new Map([["b64",!0]]),null===r||void 0===r?void 0:r.crit,this._protectedHeader,n),i=!0,!o.has("b64")){t.next=11;break}if("boolean"===typeof(i=this._protectedHeader.b64)){t.next=11;break}throw new Y('The "b64" (base64url-encode payload) Header Parameter must be a boolean');case 11:if("string"===typeof(a=n.alg)&&a){t.next=14;break}throw new Y('JWS "alg" (Algorithm) Header Parameter missing or invalid');case 14:return Gr(a,e,"sign"),c=this._payload,i&&(c=y.encode(L(c))),u=this._protectedHeader?y.encode(L(JSON.stringify(this._protectedHeader))):y.encode(""),s=g(u,y.encode("."),c),t.next=21,ta(a,e,s);case 21:return l=t.sent,f={signature:L(l),payload:""},i&&(f.payload=v.decode(c)),this._unprotectedHeader&&(f.header=this._unprotectedHeader),this._protectedHeader&&(f.protected=v.decode(u)),t.abrupt("return",f);case 27:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){aa(i,r,o,a,c,"next",t)}function c(t){aa(i,r,o,a,c,"throw",t)}a(void 0)}))},function(t,e){return o.apply(this,arguments)})}],e&&ca(t.prototype,e),r&&ca(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function la(t){return la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},la(t)}function fa(){fa=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==la(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(la(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ha(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function pa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,da(n.key),n)}}function da(t){var e=function(t,e){if("object"!=la(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=la(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==la(e)?e:e+""}var ya=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._flattened=new sa(e)},e=[{key:"setProtectedHeader",value:function(t){return this._flattened.setProtectedHeader(t),this}},{key:"sign",value:(n=fa().mark((function t(e,r){var n;return fa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._flattened.sign(e,r);case 2:if(void 0!==(n=t.sent).payload){t.next=5;break}throw new TypeError("use the flattened module for creating JWS with b64: false");case 5:return t.abrupt("return","".concat(n.protected,".").concat(n.payload,".").concat(n.signature));case 6:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){ha(i,r,o,a,c,"next",t)}function c(t){ha(i,r,o,a,c,"throw",t)}a(void 0)}))},function(t,e){return o.apply(this,arguments)})}],e&&pa(t.prototype,e),r&&pa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}(),va=["payload"];function ma(){ma=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==wa(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(wa(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ga(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function ba(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function wa(t){return wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wa(t)}function _a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ka(n.key),n)}}function Ea(t,e,r){return e&&xa(t.prototype,e),r&&xa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ka(t){var e=function(t,e){if("object"!=wa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wa(e)?e:e+""}var Sa=function(){return Ea((function t(e,r,n){_a(this,t),this.parent=e,this.key=r,this.options=n}),[{key:"setProtectedHeader",value:function(t){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}},{key:"setUnprotectedHeader",value:function(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}},{key:"addSignature",value:function(){var t;return(t=this.parent).addSignature.apply(t,arguments)}},{key:"sign",value:function(){var t;return(t=this.parent).sign.apply(t,arguments)}},{key:"done",value:function(){return this.parent}}])}(),Oa=function(){return Ea((function t(e){_a(this,t),this._signatures=[],this._payload=e}),[{key:"addSignature",value:function(t,e){var r=new Sa(this,t,e);return this._signatures.push(r),r}},{key:"sign",value:(t=ma().mark((function t(){var e,r,n,o,i,a,c;return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._signatures.length){t.next=2;break}throw new Y("at least one signature must be added");case 2:e={signatures:[],payload:""},r=0;case 4:if(!(r<this._signatures.length)){t.next=24;break}return n=this._signatures[r],(o=new sa(this._payload)).setProtectedHeader(n.protectedHeader),o.setUnprotectedHeader(n.unprotectedHeader),t.next=11,o.sign(n.key,n.options);case 11:if(i=t.sent,a=i.payload,c=ga(i,va),0!==r){t.next=18;break}e.payload=a,t.next=20;break;case 18:if(e.payload===a){t.next=20;break}throw new Y("inconsistent use of JWS Unencoded Payload (RFC7797)");case 20:e.signatures.push(c);case 21:r++,t.next=4;break;case 24:return t.abrupt("return",e);case 25:case"end":return t.stop()}}),t,this)})),e=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ba(i,n,o,a,c,"next",t)}function c(t){ba(i,n,o,a,c,"throw",t)}a(void 0)}))},function(){return e.apply(this,arguments)})}]);var t,e}();function La(t){return La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},La(t)}function Aa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ja(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Aa(Object(r),!0).forEach((function(e){Pa(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Aa(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Pa(t,e,r){return(e=Ca(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ta(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ca(n.key),n)}}function Ca(t){var e=function(t,e){if("object"!=La(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=La(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==La(e)?e:e+""}function Na(t,e){if(!Number.isFinite(e))throw new TypeError("Invalid ".concat(t," input"));return e}var Ia=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!Rt(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e},(e=[{key:"setIssuer",value:function(t){return this._payload=ja(ja({},this._payload),{},{iss:t}),this}},{key:"setSubject",value:function(t){return this._payload=ja(ja({},this._payload),{},{sub:t}),this}},{key:"setAudience",value:function(t){return this._payload=ja(ja({},this._payload),{},{aud:t}),this}},{key:"setJti",value:function(t){return this._payload=ja(ja({},this._payload),{},{jti:t}),this}},{key:"setNotBefore",value:function(t){return"number"===typeof t?this._payload=ja(ja({},this._payload),{},{nbf:Na("setNotBefore",t)}):t instanceof Date?this._payload=ja(ja({},this._payload),{},{nbf:Na("setNotBefore",gi(t))}):this._payload=ja(ja({},this._payload),{},{nbf:gi(new Date)+_i(t)}),this}},{key:"setExpirationTime",value:function(t){return"number"===typeof t?this._payload=ja(ja({},this._payload),{},{exp:Na("setExpirationTime",t)}):t instanceof Date?this._payload=ja(ja({},this._payload),{},{exp:Na("setExpirationTime",gi(t))}):this._payload=ja(ja({},this._payload),{},{exp:gi(new Date)+_i(t)}),this}},{key:"setIssuedAt",value:function(t){return"undefined"===typeof t?this._payload=ja(ja({},this._payload),{},{iat:gi(new Date)}):t instanceof Date?this._payload=ja(ja({},this._payload),{},{iat:Na("setIssuedAt",gi(t))}):this._payload=ja(ja({},this._payload),{},"string"===typeof t?{iat:Na("setIssuedAt",gi(new Date)+_i(t))}:{iat:Na("setIssuedAt",t)}),this}}])&&Ta(t.prototype,e),r&&Ta(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ra(t){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ra(t)}function Fa(){Fa=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ra(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ra(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ga(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Da(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ha(n.key),n)}}function Ha(t){var e=function(t,e){if("object"!=Ra(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ra(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ra(e)?e:e+""}function Ua(t,e,r){return e=Ka(e),function(t,e){if(e&&("object"==Ra(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ma()?Reflect.construct(e,r||[],Ka(t).constructor):e.apply(t,r))}function Ma(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ma=function(){return!!t})()}function Ka(t){return Ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ka(t)}function Ba(t,e){return Ba=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ba(t,e)}var Wa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ua(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ba(t,e)}(e,t),r=e,n=[{key:"setProtectedHeader",value:function(t){return this._protectedHeader=t,this}},{key:"sign",value:(i=Fa().mark((function t(e,r){var n,o;return Fa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((o=new ya(y.encode(JSON.stringify(this._payload)))).setProtectedHeader(this._protectedHeader),!Array.isArray(null===(n=this._protectedHeader)||void 0===n?void 0:n.crit)||!this._protectedHeader.crit.includes("b64")||!1!==this._protectedHeader.b64){t.next=4;break}throw new q("JWTs MUST NOT use unencoded payload");case 4:return t.abrupt("return",o.sign(e,r));case 5:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=i.apply(t,e);function a(t){Ga(o,r,n,a,c,"next",t)}function c(t){Ga(o,r,n,a,c,"throw",t)}a(void 0)}))},function(t,e){return a.apply(this,arguments)})}],n&&Da(r.prototype,n),o&&Da(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,i,a}(Ia);function Ja(t){return Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ja(t)}function Va(){Va=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ja(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ja(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function za(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ya(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?za(Object(r),!0).forEach((function(e){qa(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):za(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qa(t,e,r){return(e=Xa(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $a(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Za(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xa(n.key),n)}}function Xa(t){var e=function(t,e){if("object"!=Ja(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ja(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ja(e)?e:e+""}function Qa(t,e,r){return e=ec(e),function(t,e){if(e&&("object"==Ja(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,tc()?Reflect.construct(e,r||[],ec(t).constructor):e.apply(t,r))}function tc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tc=function(){return!!t})()}function ec(t){return ec=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ec(t)}function rc(t,e){return rc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rc(t,e)}var nc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Qa(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rc(t,e)}(e,t),r=e,n=[{key:"setProtectedHeader",value:function(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}},{key:"setKeyManagementParameters",value:function(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}},{key:"setContentEncryptionKey",value:function(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}},{key:"setInitializationVector",value:function(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}},{key:"replicateIssuerAsHeader",value:function(){return this._replicateIssuerAsHeader=!0,this}},{key:"replicateSubjectAsHeader",value:function(){return this._replicateSubjectAsHeader=!0,this}},{key:"replicateAudienceAsHeader",value:function(){return this._replicateAudienceAsHeader=!0,this}},{key:"encrypt",value:(i=Va().mark((function t(e,r){var n;return Va().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new qi(y.encode(JSON.stringify(this._payload))),this._replicateIssuerAsHeader&&(this._protectedHeader=Ya(Ya({},this._protectedHeader),{},{iss:this._payload.iss})),this._replicateSubjectAsHeader&&(this._protectedHeader=Ya(Ya({},this._protectedHeader),{},{sub:this._payload.sub})),this._replicateAudienceAsHeader&&(this._protectedHeader=Ya(Ya({},this._protectedHeader),{},{aud:this._payload.aud})),n.setProtectedHeader(this._protectedHeader),this._iv&&n.setInitializationVector(this._iv),this._cek&&n.setContentEncryptionKey(this._cek),this._keyManagementParameters&&n.setKeyManagementParameters(this._keyManagementParameters),t.abrupt("return",n.encrypt(e,r));case 9:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=i.apply(t,e);function a(t){$a(o,r,n,a,c,"next",t)}function c(t){$a(o,r,n,a,c,"throw",t)}a(void 0)}))},function(t,e){return a.apply(this,arguments)})}],n&&Za(r.prototype,n),o&&Za(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,i,a}(Ia);function oc(t){return oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oc(t)}function ic(){ic=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==oc(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(oc(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ac(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function cc(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ac(i,n,o,a,c,"next",t)}function c(t){ac(i,n,o,a,c,"throw",t)}a(void 0)}))}}var uc=function(t,e){if("string"!==typeof t||!t)throw new $("".concat(e," missing or invalid"))};function sc(t,e){return lc.apply(this,arguments)}function lc(){return(lc=cc(ic().mark((function t(e,r){var n,o,i;return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Rt(e)){t.next=2;break}throw new TypeError("JWK must be an object");case 2:if(null!==(n=r)&&void 0!==n||(r="sha256"),"sha256"===r||"sha384"===r||"sha512"===r){t.next=5;break}throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');case 5:t.t0=e.kty,t.next="EC"===t.t0?8:"OKP"===t.t0?13:"RSA"===t.t0?17:"oct"===t.t0?21:24;break;case 8:return uc(e.crv,'"crv" (Curve) Parameter'),uc(e.x,'"x" (X Coordinate) Parameter'),uc(e.y,'"y" (Y Coordinate) Parameter'),o={crv:e.crv,kty:e.kty,x:e.x,y:e.y},t.abrupt("break",25);case 13:return uc(e.crv,'"crv" (Subtype of Key Pair) Parameter'),uc(e.x,'"x" (Public Key) Parameter'),o={crv:e.crv,kty:e.kty,x:e.x},t.abrupt("break",25);case 17:return uc(e.e,'"e" (Exponent) Parameter'),uc(e.n,'"n" (Modulus) Parameter'),o={e:e.e,kty:e.kty,n:e.n},t.abrupt("break",25);case 21:return uc(e.k,'"k" (Key Value) Parameter'),o={k:e.k,kty:e.kty},t.abrupt("break",25);case 24:throw new J('"kty" (Key Type) Parameter missing or unsupported');case 25:return i=y.encode(JSON.stringify(o)),t.t1=L,t.next=29,f(r,i);case 29:return t.t2=t.sent,t.abrupt("return",(0,t.t1)(t.t2));case 31:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function fc(t,e){return hc.apply(this,arguments)}function hc(){return(hc=cc(ic().mark((function t(e,r){var n,o;return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null!==(n=r)&&void 0!==n||(r="sha256"),t.next=3,sc(e,r);case 3:return o=t.sent,t.abrupt("return","urn:ietf:params:oauth:jwk-thumbprint:sha-".concat(r.slice(-3),":").concat(o));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pc(t){return pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pc(t)}function dc(){dc=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==pc(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(pc(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function yc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yc(Object(r),!0).forEach((function(e){mc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mc(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=pc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pc(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gc(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function bc(t,e){return wc.apply(this,arguments)}function wc(){var t;return t=dc().mark((function t(e,r){var n,o;return dc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Rt((n=vc(vc({},e),null===r||void 0===r?void 0:r.header)).jwk)){t.next=3;break}throw new Y('"jwk" (JSON Web Key) Header Parameter must be a JSON object');case 3:return t.next=5,Ar(vc(vc({},n.jwk),{},{ext:!0}),n.alg);case 5:if(!((o=t.sent)instanceof Uint8Array||"public"!==o.type)){t.next=8;break}throw new Y('"jwk" (JSON Web Key) Header Parameter must be a public key');case 8:return t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})),wc=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){gc(i,n,o,a,c,"next",t)}function c(t){gc(i,n,o,a,c,"throw",t)}a(void 0)}))},wc.apply(this,arguments)}function _c(){_c=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Tc(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Tc(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function xc(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Ec(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ec(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Ec(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function kc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Sc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kc(Object(r),!0).forEach((function(e){Oc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Oc(t,e,r){return(e=Pc(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lc(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ac(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Lc(i,n,o,a,c,"next",t)}function c(t){Lc(i,n,o,a,c,"throw",t)}a(void 0)}))}}function jc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pc(n.key),n)}}function Pc(t){var e=function(t,e){if("object"!=Tc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tc(e)?e:e+""}function Tc(t){return Tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(t)}function Cc(t){return function(){return new Nc(t.apply(this,arguments))}}function Nc(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,c=a instanceof Ic;Promise.resolve(c?a.v:a).then((function(r){if(c){var u="return"===e?"return":"next";if(!a.k||r.done)return n(u,r);r=t[u](r).value}o(i.done?"return":"normal",r)}),(function(t){n("throw",t)}))}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise((function(i,a){var c={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=c:(e=r=c,n(t,o))}))},"function"!=typeof t.return&&(this.return=void 0)}function Ic(t,e){this.v=t,this.k=e}function Rc(t){switch("string"===typeof t&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new J('Unsupported "alg" value for a JSON Web Key Set')}}function Fc(t){return Rt(t)}function Gc(t){return"function"===typeof structuredClone?structuredClone(t):JSON.parse(JSON.stringify(t))}Nc.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Nc.prototype.next=function(t){return this._invoke("next",t)},Nc.prototype.throw=function(t){return this._invoke("throw",t)},Nc.prototype.return=function(t){return this._invoke("return",t)};var Dc=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cached=new WeakMap,!function(t){return t&&"object"===Tc(t)&&Array.isArray(t.keys)&&t.keys.every(Fc)}(e))throw new Z("JSON Web Key Set malformed");this._jwks=Gc(e)},e=[{key:"getKey",value:(n=Ac(_c().mark((function t(e,r){var n,o,i,a,c,u,s,l,f;return _c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Sc(Sc({},e),null===r||void 0===r?void 0:r.header),o=n.alg,i=n.kid,a=Rc(o),c=this._jwks.keys.filter((function(t){var e=a===t.kty;if(e&&"string"===typeof i&&(e=i===t.kid),e&&"string"===typeof t.alg&&(e=o===t.alg),e&&"string"===typeof t.use&&(e="sig"===t.use),e&&Array.isArray(t.key_ops)&&(e=t.key_ops.includes("verify")),e)switch(o){case"ES256":e="P-256"===t.crv;break;case"ES256K":e="secp256k1"===t.crv;break;case"ES384":e="P-384"===t.crv;break;case"ES512":e="P-521"===t.crv;break;case"Ed25519":e="Ed25519"===t.crv;break;case"EdDSA":e="Ed25519"===t.crv||"Ed448"===t.crv}return e})),u=c[0],0!==(s=c.length)){t.next=6;break}throw new X;case 6:if(1===s){t.next=11;break}throw l=new Q,f=this._cached,l[Symbol.asyncIterator]=Cc(_c().mark((function t(){var e,r,n;return _c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=xc(c),t.prev=1,e.s();case 3:if((r=e.n()).done){t.next=16;break}return n=r.value,t.prev=5,t.next=8,new Ic(Hc(f,n,o),0);case 8:return t.next=10,t.sent;case 10:t.next=14;break;case 12:t.prev=12,t.t0=t.catch(5);case 14:t.next=3;break;case 16:t.next=21;break;case 18:t.prev=18,t.t1=t.catch(1),e.e(t.t1);case 21:return t.prev=21,e.f(),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[1,18,21,24],[5,12]])}))),l;case 11:return t.abrupt("return",Hc(this._cached,u,o));case 12:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})}],e&&jc(t.prototype,e),r&&jc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function Hc(t,e,r){return Uc.apply(this,arguments)}function Uc(){return(Uc=Ac(_c().mark((function t(e,r,n){var o,i;return _c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(o=e.get(r)||e.set(r,{}).get(r))[n]){t.next=8;break}return t.next=4,Ar(Sc(Sc({},r),{},{ext:!0}),n);case 4:if(!((i=t.sent)instanceof Uint8Array||"public"!==i.type)){t.next=7;break}throw new Z("JSON Web Key Set members must be public keys");case 7:o[n]=i;case 8:return t.abrupt("return",o[n]);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Mc(t){var e=new Dc(t),r=function(){var t=Ac(_c().mark((function t(r,n){return _c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getKey(r,n));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return Object.defineProperties(r,{jwks:{value:function(){return Gc(e._jwks)},enumerable:!0,configurable:!1,writable:!1}}),r}function Kc(t){return Kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kc(t)}function Bc(){Bc=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Kc(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Kc(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Wc(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var Jc,Vc,zc,Yc=function(){var t,e=(t=Bc().mark((function t(e,r,n){var o,i,a,c;return Bc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=!1,"function"===typeof AbortController&&(o=new AbortController,i=setTimeout((function(){a=!0,o.abort()}),r)),t.next=4,fetch(e.href,{signal:o?o.signal:void 0,redirect:"manual",headers:n.headers}).catch((function(t){if(a)throw new tt;throw t}));case 4:if(c=t.sent,void 0!==i&&clearTimeout(i),200===c.status){t.next=8;break}throw new M("Expected 200 OK from the JSON Web Key Set HTTP response");case 8:return t.prev=8,t.next=11,c.json();case 11:return t.abrupt("return",t.sent);case 14:throw t.prev=14,t.t0=t.catch(8),new M("Failed to parse the JSON Web Key Set HTTP response as JSON");case 17:case"end":return t.stop()}}),t,null,[[8,14]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Wc(i,n,o,a,c,"next",t)}function c(t){Wc(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r,n){return e.apply(this,arguments)}}(),qc=Yc;function $c(){$c=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==eu(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(eu(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Zc(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Xc(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Zc(i,n,o,a,c,"next",t)}function c(t){Zc(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Qc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tu(n.key),n)}}function tu(t){var e=function(t,e){if("object"!=eu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eu(e)?e:e+""}function eu(t){return eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(t)}if("undefined"===typeof navigator||null===(Jc=navigator.userAgent)||void 0===Jc||null===(Vc=Jc.startsWith)||void 0===Vc||!Vc.call(Jc,"Mozilla/5.0 ")){zc="".concat("jose","/").concat("v5.10.0")}var ru=Symbol();var nu=function(){return t=function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(e instanceof URL))throw new TypeError("url must be an instance of URL");var n,o;this._url=new URL(e.href),this._options={agent:null===r||void 0===r?void 0:r.agent,headers:null===r||void 0===r?void 0:r.headers},this._timeoutDuration="number"===typeof(null===r||void 0===r?void 0:r.timeoutDuration)?null===r||void 0===r?void 0:r.timeoutDuration:5e3,this._cooldownDuration="number"===typeof(null===r||void 0===r?void 0:r.cooldownDuration)?null===r||void 0===r?void 0:r.cooldownDuration:3e4,this._cacheMaxAge="number"===typeof(null===r||void 0===r?void 0:r.cacheMaxAge)?null===r||void 0===r?void 0:r.cacheMaxAge:6e5,void 0!==(null===r||void 0===r?void 0:r[ru])&&(this._cache=null===r||void 0===r?void 0:r[ru],n=null===r||void 0===r?void 0:r[ru],o=this._cacheMaxAge,"object"===eu(n)&&null!==n&&"uat"in n&&"number"===typeof n.uat&&!(Date.now()-n.uat>=o)&&"jwks"in n&&Rt(n.jwks)&&Array.isArray(n.jwks.keys)&&Array.prototype.every.call(n.jwks.keys,Rt)&&(this._jwksTimestamp=this._cache.uat,this._local=Mc(this._cache.jwks)))},e=[{key:"coolingDown",value:function(){return"number"===typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}},{key:"fresh",value:function(){return"number"===typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}},{key:"getKey",value:(o=Xc($c().mark((function t(e,r){return $c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._local&&this.fresh()){t.next=3;break}return t.next=3,this.reload();case 3:return t.prev=3,t.next=6,this._local(e,r);case 6:return t.abrupt("return",t.sent);case 9:if(t.prev=9,t.t0=t.catch(3),!(t.t0 instanceof X)){t.next=16;break}if(!1!==this.coolingDown()){t.next=16;break}return t.next=15,this.reload();case 15:return t.abrupt("return",this._local(e,r));case 16:throw t.t0;case 17:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(t,e){return o.apply(this,arguments)})},{key:"reload",value:(n=Xc($c().mark((function t(){var e,r=this;return $c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._pendingFetch&&("undefined"!==typeof WebSocketPair||"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!==typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0),e=new Headers(this._options.headers),zc&&!e.has("User-Agent")&&(e.set("User-Agent",zc),this._options.headers=Object.fromEntries(e.entries())),this._pendingFetch||(this._pendingFetch=qc(this._url,this._timeoutDuration,this._options).then((function(t){r._local=Mc(t),r._cache&&(r._cache.uat=Date.now(),r._cache.jwks=t),r._jwksTimestamp=Date.now(),r._pendingFetch=void 0})).catch((function(t){throw r._pendingFetch=void 0,t}))),t.next=6,this._pendingFetch;case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&Qc(t.prototype,e),r&&Qc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function ou(t,e){var r=new nu(t,e),n=function(){var t=Xc($c().mark((function t(e,n){return $c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.getKey(e,n));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return Object.defineProperties(n,{coolingDown:{get:function(){return r.coolingDown()},enumerable:!0,configurable:!1},fresh:{get:function(){return r.fresh()},enumerable:!0,configurable:!1},reload:{value:function(){return r.reload()},enumerable:!0,configurable:!1,writable:!1},reloading:{get:function(){return!!r._pendingFetch},enumerable:!0,configurable:!1},jwks:{value:function(){var t;return null===(t=r._local)||void 0===t?void 0:t.jwks()},enumerable:!0,configurable:!1,writable:!1}}),n}var iu=ru;function au(t){return au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},au(t)}function cu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uu(n.key),n)}}function uu(t){var e=function(t,e){if("object"!=au(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=au(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==au(e)?e:e+""}function su(t,e,r){return e=fu(e),function(t,e){if(e&&("object"==au(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,lu()?Reflect.construct(e,r||[],fu(t).constructor):e.apply(t,r))}function lu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lu=function(){return!!t})()}function fu(t){return fu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fu(t)}function hu(t,e){return hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hu(t,e)}var pu=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),su(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hu(t,e)}(e,t),r=e,o=[{key:"decode",value:function(t,e){if("string"!==typeof t)throw new q("Unsecured JWT must be a string");var r,n=t.split("."),o=n[0],i=n[1],a=n[2];if(3!==n.length||""!==a)throw new q("Invalid Unsecured JWT");try{if("none"!==(r=JSON.parse(v.decode(j(o)))).alg)throw new Error}catch(c){throw new q("Invalid Unsecured JWT")}return{payload:Li(r,j(i),e),header:r}}}],(n=[{key:"encode",value:function(){var t=L(JSON.stringify({alg:"none"})),e=L(JSON.stringify(this._payload));return"".concat(t,".").concat(e,".")}}])&&cu(r.prototype,n),o&&cu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(Ia),du=L,yu=j;function vu(t){return vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vu(t)}function mu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return gu(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gu(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function bu(t){var e;if("string"===typeof t){var r=t.split(".");if(3===r.length||5===r.length)e=mu(r,1)[0]}else if("object"===vu(t)&&t){if(!("protected"in t))throw new TypeError("Token does not contain a Protected Header");e=t.protected}try{if("string"!==typeof e||!e)throw new Error;var n=JSON.parse(v.decode(yu(e)));if(!Rt(n))throw new Error;return n}catch(o){throw new TypeError("Invalid Token or Protected Header formatting")}}function wu(t){if("string"!==typeof t)throw new q("JWTs must use Compact JWS serialization, JWT must be a string");var e,r,n=t.split("."),o=n[1],i=n.length;if(5===i)throw new q("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new q("Invalid JWT");if(!o)throw new q("JWTs must contain a payload");try{e=yu(o)}catch(a){throw new q("Failed to base64url decode the payload")}try{r=JSON.parse(v.decode(e))}catch(c){throw new q("Failed to parse the decoded payload as JSON")}if(!Rt(r))throw new q("Invalid JWT Claims Set");return r}function _u(t){return _u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_u(t)}function xu(){xu=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==_u(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_u(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Eu(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ku(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Eu(i,n,o,a,c,"next",t)}function c(t){Eu(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Su(t,e){return Ou.apply(this,arguments)}function Ou(){return(Ou=ku(xu().mark((function t(e,r){var n,o,a,c;return xu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="HS256"===t.t0||"HS384"===t.t0||"HS512"===t.t0?3:"A128CBC-HS256"===t.t0||"A192CBC-HS384"===t.t0||"A256CBC-HS512"===t.t0?7:"A128KW"===t.t0||"A192KW"===t.t0||"A256KW"===t.t0?9:"A128GCMKW"===t.t0||"A192GCMKW"===t.t0||"A256GCMKW"===t.t0||"A128GCM"===t.t0||"A192GCM"===t.t0||"A256GCM"===t.t0?13:17;break;case 3:return o=parseInt(e.slice(-3),10),a={name:"HMAC",hash:"SHA-".concat(o),length:o},c=["sign","verify"],t.abrupt("break",18);case 7:return o=parseInt(e.slice(-3),10),t.abrupt("return",rt(new Uint8Array(o>>3)));case 9:return o=parseInt(e.slice(1,4),10),a={name:"AES-KW",length:o},c=["wrapKey","unwrapKey"],t.abrupt("break",18);case 13:return o=parseInt(e.slice(1,4),10),a={name:"AES-GCM",length:o},c=["encrypt","decrypt"],t.abrupt("break",18);case 17:throw new J('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');case 18:return t.abrupt("return",i.subtle.generateKey(a,null!==(n=null===r||void 0===r?void 0:r.extractable)&&void 0!==n&&n,c));case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Lu(t){var e,r=null!==(e=null===t||void 0===t?void 0:t.modulusLength)&&void 0!==e?e:2048;if("number"!==typeof r||r<2048)throw new J("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return r}function Au(t,e){return ju.apply(this,arguments)}function ju(){return(ju=ku(xu().mark((function t(e,r){var n,o,a,c,u,s,l;return xu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="PS256"===t.t0||"PS384"===t.t0||"PS512"===t.t0?3:"RS256"===t.t0||"RS384"===t.t0||"RS512"===t.t0?6:"RSA-OAEP"===t.t0||"RSA-OAEP-256"===t.t0||"RSA-OAEP-384"===t.t0||"RSA-OAEP-512"===t.t0?9:"ES256"===t.t0?12:"ES384"===t.t0?15:"ES512"===t.t0?18:"Ed25519"===t.t0?21:"EdDSA"===t.t0?24:"ECDH-ES"===t.t0||"ECDH-ES+A128KW"===t.t0||"ECDH-ES+A192KW"===t.t0||"ECDH-ES+A256KW"===t.t0?33:44;break;case 3:return o={name:"RSA-PSS",hash:"SHA-".concat(e.slice(-3)),publicExponent:new Uint8Array([1,0,1]),modulusLength:Lu(r)},a=["sign","verify"],t.abrupt("break",45);case 6:return o={name:"RSASSA-PKCS1-v1_5",hash:"SHA-".concat(e.slice(-3)),publicExponent:new Uint8Array([1,0,1]),modulusLength:Lu(r)},a=["sign","verify"],t.abrupt("break",45);case 9:return o={name:"RSA-OAEP",hash:"SHA-".concat(parseInt(e.slice(-3),10)||1),publicExponent:new Uint8Array([1,0,1]),modulusLength:Lu(r)},a=["decrypt","unwrapKey","encrypt","wrapKey"],t.abrupt("break",45);case 12:return o={name:"ECDSA",namedCurve:"P-256"},a=["sign","verify"],t.abrupt("break",45);case 15:return o={name:"ECDSA",namedCurve:"P-384"},a=["sign","verify"],t.abrupt("break",45);case 18:return o={name:"ECDSA",namedCurve:"P-521"},a=["sign","verify"],t.abrupt("break",45);case 21:return o={name:"Ed25519"},a=["sign","verify"],t.abrupt("break",45);case 24:a=["sign","verify"],u=null!==(c=null===r||void 0===r?void 0:r.crv)&&void 0!==c?c:"Ed25519",t.t1=u,t.next="Ed25519"===t.t1||"Ed448"===t.t1?29:31;break;case 29:return o={name:u},t.abrupt("break",32);case 31:throw new J("Invalid or unsupported crv option provided");case 32:case 43:return t.abrupt("break",45);case 33:a=["deriveKey","deriveBits"],l=null!==(s=null===r||void 0===r?void 0:r.crv)&&void 0!==s?s:"P-256",t.t2=l,t.next="P-256"===t.t2||"P-384"===t.t2||"P-521"===t.t2?38:"X25519"===t.t2||"X448"===t.t2?40:42;break;case 38:return o={name:"ECDH",namedCurve:l},t.abrupt("break",43);case 40:return o={name:l},t.abrupt("break",43);case 42:throw new J("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448");case 44:throw new J('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');case 45:return t.abrupt("return",i.subtle.generateKey(o,null!==(n=null===r||void 0===r?void 0:r.extractable)&&void 0!==n&&n,a));case 46:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pu(t){return Pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pu(t)}function Tu(){Tu=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Pu(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Pu(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Cu(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Nu(t,e){return Iu.apply(this,arguments)}function Iu(){var t;return t=Tu().mark((function t(e,r){return Tu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Au(e,r));case 1:case"end":return t.stop()}}),t)})),Iu=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Cu(i,n,o,a,c,"next",t)}function c(t){Cu(i,n,o,a,c,"throw",t)}a(void 0)}))},Iu.apply(this,arguments)}function Ru(t){return Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(t)}function Fu(){Fu=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ru(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ru(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Gu(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Du(t,e){return Hu.apply(this,arguments)}function Hu(){var t;return t=Fu().mark((function t(e,r){return Fu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Su(e,r));case 1:case"end":return t.stop()}}),t)})),Hu=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Gu(i,n,o,a,c,"next",t)}function c(t){Gu(i,n,o,a,c,"throw",t)}a(void 0)}))},Hu.apply(this,arguments)}var Uu="WebCryptoAPI"},function(t,e,r){"use strict";function n(){n=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,i=Object.create(o.prototype),c=new C(n||[]);return a(i,"_invoke",{value:A(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d="suspendedStart",y="suspendedYield",v="executing",m="completed",g={};function b(){}function w(){}function _(){}var x={};f(x,u,(function(){return this}));var E=Object.getPrototypeOf,k=E&&E(E(N([])));k&&k!==r&&i.call(k,u)&&(x=k);var S=_.prototype=b.prototype=Object.create(x);function O(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(n,a,c,u){var s=p(t[n],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==o(f)&&i.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var n;a(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,n){r(t,o,e,n)}))}return n=n?n.then(i,i):i()}})}function A(e,r,n){var o=d;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?m:y,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(o(e)+" is not iterable")}return w.prototype=_,a(S,"constructor",{value:_,configurable:!0}),a(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,f(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},O(L.prototype),f(L.prototype,s,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(S),f(S,l,"Generator"),f(S,u,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}r.r(e),r.d(e,"setPolyfills",(function(){return z})),r.d(e,"clearCache",(function(){return q})),r.d(e,"configureCache",(function(){return Y})),r.d(e,"helpers",(function(){return U})),r.d(e,"onVisible",(function(){return et})),r.d(e,"onHidden",(function(){return tt})),r.d(e,"GrowthBook",(function(){return Le})),r.d(e,"prefetchPayload",(function(){return Ae})),r.d(e,"GrowthBookMultiUser",(function(){return Ve})),r.d(e,"GrowthBookClient",(function(){return Ve})),r.d(e,"UserScopedGrowthBook",(function(){return ze})),r.d(e,"StickyBucketService",(function(){return fr})),r.d(e,"LocalStorageStickyBucketService",(function(){return hr})),r.d(e,"ExpressCookieStickyBucketService",(function(){return pr})),r.d(e,"BrowserCookieStickyBucketService",(function(){return dr})),r.d(e,"RedisStickyBucketService",(function(){return yr})),r.d(e,"evalCondition",(function(){return Lt})),r.d(e,"isURLTargeted",(function(){return y})),r.d(e,"getPolyfills",(function(){return l})),r.d(e,"getAutoExperimentChangeType",(function(){return O})),r.d(e,"paddedVersionString",(function(){return E})),r.d(e,"EVENT_EXPERIMENT_VIEWED",(function(){return Jt})),r.d(e,"EVENT_FEATURE_EVALUATED",(function(){return Wt}));var s={fetch:globalThis.fetch?globalThis.fetch.bind(globalThis):void 0,SubtleCrypto:globalThis.crypto?globalThis.crypto.subtle:void 0,EventSource:globalThis.EventSource};function l(){return s}function f(t){for(var e=2166136261,r=t.length,n=0;n<r;n++)e^=t.charCodeAt(n),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}function h(t,e,r){return 2===r?f(f(t+e)+"")%1e4/1e4:1===r?f(e+t)%1e3/1e3:null}function p(t,e){return t>=e[0]&&t<e[1]}function d(t){try{var e=t.replace(/([^\\])\//g,"$1\\/");return new RegExp(e)}catch(r){return void console.error(r)}}function y(t,e){if(!e.length)return!1;for(var r=!1,n=!1,o=0;o<e.length;o++){var i=m(t,e[o].type,e[o].pattern);if(!1===e[o].include){if(i)return!1}else r=!0,i&&(n=!0)}return n||!r}function v(t,e){try{var r=new URL(e.replace(/^([^:/?]*)\./i,"https://$1.").replace(/\*/g,"_____"),"https://_____"),n=[[t.host,r.host,!1],[t.pathname,r.pathname,!0]];return r.hash&&n.push([t.hash,r.hash,!1]),r.searchParams.forEach((function(e,r){n.push([t.searchParams.get(r)||"",e,!1])})),!n.some((function(t){return!function(t,e,r){try{var n=e.replace(/[*.+?^${}()|[\]\\]/g,"\\$&").replace(/_____/g,".*");return r&&(n="\\/?"+n.replace(/(^\/|\/$)/g,"")+"\\/?"),new RegExp("^"+n+"$","i").test(t)}catch(o){return!1}}(t[0],t[1],t[2])}))}catch(o){return!1}}function m(t,e,r){try{var n=new URL(t,"https://_");if("regex"===e){var o=d(r);return!!o&&(o.test(n.href)||o.test(n.href.substring(n.origin.length)))}return"simple"===e&&v(n,r)}catch(i){return!1}}function g(t,e,r){(e=void 0===e?1:e)<0?e=0:e>1&&(e=1);var n,o=(n=t)<=0?[]:new Array(n).fill(1/n);(r=r||o).length!==t&&(r=o);var i=r.reduce((function(t,e){return e+t}),0);(i<.99||i>1.01)&&(r=o);var a=0;return r.map((function(t){var r=a;return a+=t,[r,r+e*t]}))}var b=function(t){return Uint8Array.from(atob(t),(function(t){return t.charCodeAt(0)}))};function w(t,e,r){return _.apply(this,arguments)}function _(){return(_=a(n().mark((function t(e,r,o){var i,a,u,l,f,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=r||"",o=o||globalThis.crypto&&globalThis.crypto.subtle||s.SubtleCrypto){t.next=4;break}throw new Error("No SubtleCrypto implementation found");case 4:return t.prev=4,t.next=7,o.importKey("raw",b(r),{name:"AES-CBC",length:128},!0,["encrypt","decrypt"]);case 7:return i=t.sent,a=e.split("."),u=c(a,2),l=u[0],f=u[1],t.next=11,o.decrypt({name:"AES-CBC",iv:b(l)},i,b(f));case 11:return h=t.sent,t.abrupt("return",(new TextDecoder).decode(h));case 15:throw t.prev=15,t.t0=t.catch(4),new Error("Failed to decrypt");case 18:case"end":return t.stop()}}),t,null,[[4,15]])})))).apply(this,arguments)}function x(t){return"string"===typeof t?t:JSON.stringify(t)}function E(t){"number"===typeof t&&(t+=""),t&&"string"===typeof t||(t="0");var e=t.replace(/(^v|\+.*$)/g,"").split(/[-.]/);return 3===e.length&&e.push("~"),e.map((function(t){return t.match(/^[0-9]+$/)?t.padStart(5," "):t})).join("-")}function k(){var t;try{t="1.4.1"}catch(e){t=""}return t}function S(t){return"object"===o(t)&&null!==t}function O(t){return t.urlPatterns&&t.variations.some((function(t){return S(t)&&"urlRedirect"in t}))?"redirect":t.variations.some((function(t){return S(t)&&(t.domMutations||"js"in t||"css"in t)}))?"visual":"unknown"}function L(t,e){return A.apply(this,arguments)}function A(){return(A=a(n().mark((function t(e,r){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var n,o=!1,i=function(e){o||(o=!0,n&&clearTimeout(n),t(e||null))};r&&(n=setTimeout((function(){return i()}),r)),e.then((function(t){return i(t)})).catch((function(){return i()}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(){j=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==P(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(P(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function T(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return C(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function N(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function I(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){N(i,n,o,a,c,"next",t)}function c(t){N(i,n,o,a,c,"throw",t)}a(void 0)}))}}function R(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function F(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?R(Object(r),!0).forEach((function(e){G(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function G(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=P(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var D={staleTTL:6e4,maxAge:144e5,cacheKey:"gbFeaturesCache",backgroundSync:!0,maxEntries:10,disableIdleStreams:!1,idleStreamInterval:2e4,disableCache:!1},H=l(),U={fetchFeaturesCall:function(t){var e=t.host,r=t.clientKey,n=t.headers;return H.fetch("".concat(e,"/api/features/").concat(r),{headers:n})},fetchRemoteEvalCall:function(t){var e=t.host,r=t.clientKey,n=t.payload,o={method:"POST",headers:F({"Content-Type":"application/json"},t.headers),body:JSON.stringify(n)};return H.fetch("".concat(e,"/api/eval/").concat(r),o)},eventSourceCall:function(t){var e=t.host,r=t.clientKey,n=t.headers;return n?new H.EventSource("".concat(e,"/sub/").concat(r),{headers:n}):new H.EventSource("".concat(e,"/sub/").concat(r))},startIdleListener:function(){var t;if("undefined"!==typeof window&&"undefined"!==typeof document){var e=function(){"visible"===document.visibilityState?(window.clearTimeout(t),et()):"hidden"===document.visibilityState&&(t=window.setTimeout(tt,D.idleStreamInterval))};return document.addEventListener("visibilitychange",e),function(){return document.removeEventListener("visibilitychange",e)}}},stopIdleListener:function(){}};try{globalThis.localStorage&&(H.localStorage=globalThis.localStorage)}catch(vr){}var M=new Map,K=!1,B=new Map,W=new Map,J=new Map,V=new Set;function z(t){Object.assign(H,t)}function Y(t){Object.assign(D,t),D.backgroundSync||wt()}function q(){return $.apply(this,arguments)}function $(){return($=I(j().mark((function t(){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return B.clear(),W.clear(),wt(),K=!1,t.next=6,rt();case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(t){return X.apply(this,arguments)}function X(){return(X=I(j().mark((function t(e){var r,n,o,i;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.instance,n=e.timeout,o=e.skipCache,i=e.allowStale,e.backgroundSync||(D.backgroundSync=!1),t.abrupt("return",ot({instance:r,allowStale:i,timeout:n,skipCache:o}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Q(t){M.forEach((function(e){return e.delete(t)}))}function tt(){J.forEach((function(t){t&&(t.state="idle",mt(t))}))}function et(){J.forEach((function(t){t&&"idle"===t.state&&gt(t)}))}function rt(){return nt.apply(this,arguments)}function nt(){return(nt=I(j().mark((function t(){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,H.localStorage){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,H.localStorage.setItem(D.cacheKey,JSON.stringify(Array.from(B.entries())));case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function ot(t){return it.apply(this,arguments)}function it(){return(it=I(j().mark((function t(e){var r,n,o,i,a,c,u,s,l,f;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.instance,n=e.allowStale,o=e.timeout,i=e.skipCache,a=at(r),c=ct(r),u=new Date,s=new Date(u.getTime()-D.maxAge+D.staleTTL),t.next=7,ut();case 7:if(!((l=D.disableCache||i?void 0:B.get(c))&&(n||l.staleAt>u)&&l.staleAt>s)){t.next=14;break}return l.sse&&V.add(a),l.staleAt<u?pt(r):yt(r),t.abrupt("return",{data:l.data,success:!0,source:"cache"});case 14:return t.next=16,L(pt(r),o);case 16:return f=t.sent,t.abrupt("return",f||{data:null,success:!1,source:"timeout",error:new Error("Timeout")});case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function at(t){var e=T(t.getApiInfo(),2),r=e[0],n=e[1];return"".concat(r,"||").concat(n)}function ct(t){var e=at(t);if(!("isRemoteEval"in t)||!t.isRemoteEval())return e;var r=t.getAttributes(),n=t.getCacheKeyAttributes()||Object.keys(t.getAttributes()),o={};n.forEach((function(t){o[t]=r[t]}));var i=t.getForcedVariations(),a=t.getUrl();return"".concat(e,"||").concat(JSON.stringify({ca:o,fv:i,url:a}))}function ut(){return st.apply(this,arguments)}function st(){return(st=I(j().mark((function t(){var e,r,n;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!K){t.next=2;break}return t.abrupt("return");case 2:if(K=!0,t.prev=3,!H.localStorage){t.next=9;break}return t.next=7,H.localStorage.getItem(D.cacheKey);case 7:e=t.sent,!D.disableCache&&e&&((r=JSON.parse(e))&&Array.isArray(r)&&r.forEach((function(t){var e=T(t,2),r=e[0],n=e[1];B.set(r,F(F({},n),{},{staleAt:new Date(n.staleAt)}))})),lt());case 9:t.next=13;break;case 11:t.prev=11,t.t0=t.catch(3);case 13:D.disableIdleStreams||(n=U.startIdleListener())&&(U.stopIdleListener=n);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})))).apply(this,arguments)}function lt(){for(var t=Array.from(B.entries()).map((function(t){var e=T(t,2);return{key:e[0],staleAt:e[1].staleAt.getTime()}})).sort((function(t,e){return t.staleAt-e.staleAt})),e=Math.min(Math.max(0,B.size-D.maxEntries),B.size),r=0;r<e;r++)B.delete(t[r].key)}function ft(t,e,r){var n=r.dateUpdated||"",o=new Date(Date.now()+D.staleTTL),i=D.disableCache?void 0:B.get(e);if(i&&n&&i.version===n)return i.staleAt=o,void rt();D.disableCache||(B.set(e,{data:r,version:n,staleAt:o,sse:V.has(t)}),lt()),rt();var a=M.get(t);a&&a.forEach((function(t){return function(t,e){return ht.apply(this,arguments)}(t,r)}))}function ht(){return(ht=I(j().mark((function t(e,r){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setPayload(r||e.getPayload());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pt(t){return dt.apply(this,arguments)}function dt(){return(dt=I(j().mark((function t(e){var r,n,o,i,a,c,u,s,l;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.getApiHosts(),n=r.apiHost,o=r.apiRequestHeaders,i=e.getClientKey(),a="isRemoteEval"in e&&e.isRemoteEval(),c=at(e),u=ct(e),(s=W.get(u))||(l=a?U.fetchRemoteEvalCall({host:n,clientKey:i,payload:{attributes:e.getAttributes(),forcedVariations:e.getForcedVariations(),forcedFeatures:Array.from(e.getForcedFeatures().entries()),url:e.getUrl()},headers:o}):U.fetchFeaturesCall({host:n,clientKey:i,headers:o}),s=l.then((function(t){if(!t.ok)throw new Error("HTTP error: ".concat(t.status));return"enabled"===t.headers.get("x-sse-support")&&V.add(c),t.json()})).then((function(t){return ft(c,u,t),yt(e),W.delete(u),{data:t,success:!0,source:"network"}})).catch((function(t){return W.delete(u),{data:null,source:"error",success:!1,error:t}})),W.set(u,s)),t.abrupt("return",s);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function yt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=at(t),n=ct(t),o=t.getApiHosts(),i=o.streamingHost,a=o.streamingHostRequestHeaders,c=t.getClientKey();if(e&&V.add(r),D.backgroundSync&&V.has(r)&&H.EventSource){if(J.has(r))return;var u={src:null,host:i,clientKey:c,headers:a,cb:function(t){try{if("features-updated"===t.type){var e=M.get(r);e&&e.forEach((function(t){pt(t)}))}else if("features"===t.type){var o=JSON.parse(t.data);ft(r,n,o)}u.errors=0}catch(vr){vt(u)}},errors:0,state:"active"};J.set(r,u),gt(u)}}function vt(t){if("idle"!==t.state&&(t.errors++,t.errors>3||t.src&&2===t.src.readyState)){var e=Math.pow(3,t.errors-3)*(1e3+1e3*Math.random());mt(t),setTimeout((function(){["idle","active"].includes(t.state)||gt(t)}),Math.min(e,3e5))}}function mt(t){t.src&&(t.src.onopen=null,t.src.onerror=null,t.src.close(),t.src=null,"active"===t.state&&(t.state="disabled"))}function gt(t){t.src=U.eventSourceCall({host:t.host,clientKey:t.clientKey,headers:t.headers}),t.state="active",t.src.addEventListener("features",t.cb),t.src.addEventListener("features-updated",t.cb),t.src.onerror=function(){return vt(t)},t.src.onopen=function(){t.errors=0}}function bt(t,e){mt(t),J.delete(e)}function wt(){V.clear(),J.forEach(bt),M.clear(),U.stopIdleListener()}function _t(t,e){if(e.streaming){if(!t.getClientKey())throw new Error("Must specify clientKey to enable streaming");e.payload&&yt(t,!0),function(t){var e=at(t),r=M.get(e)||new Set;r.add(t),M.set(e,r)}(t)}}var xt=r(53);function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function kt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return St(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?St(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var Ot={};function Lt(t,e,r){r=r||{};for(var n=0,o=Object.entries(e);n<o.length;n++){var i=kt(o[n],2),a=i[0],c=i[1];switch(a){case"$or":if(!Nt(t,c,r))return!1;break;case"$nor":if(Nt(t,c,r))return!1;break;case"$and":if(!It(t,c,r))return!1;break;case"$not":if(Lt(t,c,r))return!1;break;default:if(!jt(c,At(t,a),r))return!1}}return!0}function At(t,e){for(var r=e.split("."),n=t,o=0;o<r.length;o++){if(!n||"object"!==Et(n)||!(r[o]in n))return null;n=n[r[o]]}return n}function jt(t,e,r){if("string"===typeof t)return e+""===t;if("number"===typeof t)return 1*e===t;if("boolean"===typeof t)return null!==e&&!!e===t;if(null===t)return null===e;if(Array.isArray(t)||!Pt(t))return JSON.stringify(e)===JSON.stringify(t);for(var n in t)if(!Ct(n,e,t[n],r))return!1;return!0}function Pt(t){var e=Object.keys(t);return e.length>0&&e.filter((function(t){return"$"===t[0]})).length===e.length}function Tt(t,e){return Array.isArray(t)?t.some((function(t){return e.includes(t)})):e.includes(t)}function Ct(t,e,r,n){switch(t){case"$veq":return E(e)===E(r);case"$vne":return E(e)!==E(r);case"$vgt":return E(e)>E(r);case"$vgte":return E(e)>=E(r);case"$vlt":return E(e)<E(r);case"$vlte":return E(e)<=E(r);case"$eq":return e===r;case"$ne":return e!==r;case"$lt":return e<r;case"$lte":return e<=r;case"$gt":return e>r;case"$gte":return e>=r;case"$exists":return r?null!=e:null==e;case"$in":return!!Array.isArray(r)&&Tt(e,r);case"$inGroup":return Tt(e,n[r]||[]);case"$notInGroup":return!Tt(e,n[r]||[]);case"$nin":return!!Array.isArray(r)&&!Tt(e,r);case"$not":return!jt(r,e,n);case"$size":return!!Array.isArray(e)&&jt(r,e.length,n);case"$elemMatch":return function(t,e,r){if(!Array.isArray(t))return!1;for(var n=Pt(e)?function(t){return jt(e,t,r)}:function(t){return Lt(t,e,r)},o=0;o<t.length;o++)if(t[o]&&n(t[o]))return!0;return!1}(e,r,n);case"$all":if(!Array.isArray(e))return!1;for(var o=0;o<r.length;o++){for(var i=!1,a=0;a<e.length;a++)if(jt(r[o],e[a],n)){i=!0;break}if(!i)return!1}return!0;case"$regex":try{return(c=r,Ot[c]||(Ot[c]=new RegExp(c.replace(/([^\\])\//g,"$1\\/"))),Ot[c]).test(e)}catch(vr){return!1}case"$type":return function(t){if(null===t)return"null";if(Array.isArray(t))return"array";var e=Et(t);return["string","number","boolean","object","undefined"].includes(e)?e:"unknown"}(e)===r;default:return console.error("Unknown operator: "+t),!1}var c}function Nt(t,e,r){if(!e.length)return!0;for(var n=0;n<e.length;n++)if(Lt(t,e[n],r))return!0;return!1}function It(t,e,r){for(var n=0;n<e.length;n++)if(!Lt(t,e[n],r))return!1;return!0}function Rt(){Rt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ft(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ft(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Gt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Dt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Ht(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ut(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ht(i,n,o,a,c,"next",t)}function c(t){Ht(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Kt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(r),!0).forEach((function(e){Bt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Bt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Ft(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ft(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Wt="Feature Evaluated",Jt="Experiment Viewed";function Vt(t){return zt.apply(this,arguments)}function zt(){return(zt=Ut(Rt().mark((function t(e){return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}function Yt(t,e,r){var n=[];if(t.global.trackingCallback){var o=t.global.trackingCallback;n.push(Vt((function(){return o(e,r,t.user)})))}if(t.user.trackingCallback){var i=t.user.trackingCallback;n.push(Vt((function(){return i(e,r)})))}if(t.global.eventLogger){var a=t.global.eventLogger;n.push(Vt((function(){return a(Jt,{experimentId:e.key,variationId:r.key,hashAttribute:r.hashAttribute,hashValue:r.hashValue},t.user)})))}return n}function qt(t,e){if(e.stack.evaluatedFeatures.has(t))return Zt(e,t,null,"cyclicPrerequisite");e.stack.evaluatedFeatures.add(t),e.stack.id=t;var r=function(t){var e=new Map;return t.global.forcedFeatureValues&&t.global.forcedFeatureValues.forEach((function(t,r){return e.set(r,t)})),t.user.forcedFeatureValues&&t.user.forcedFeatureValues.forEach((function(t,r){return e.set(r,t)})),e}(e);if(r.has(t))return Zt(e,t,r.get(t),"override");if(!e.global.features||!e.global.features[t])return Zt(e,t,null,"unknownFeature");var n=e.global.features[t];if(n.rules){var o,i=new Set(e.stack.evaluatedFeatures),a=Gt(n.rules);try{t:for(a.s();!(o=a.n()).done;){var c=o.value;if(c.parentConditions){var u,s=Gt(c.parentConditions);try{for(s.s();!(u=s.n()).done;){var l=u.value;e.stack.evaluatedFeatures=new Set(i);var f=qt(l.id,e);if("cyclicPrerequisite"===f.source)return Zt(e,t,null,"cyclicPrerequisite");if(!Lt({value:f.value},l.condition||{})){if(l.gate)return Zt(e,t,null,"prerequisite");continue t}}}catch(d){s.e(d)}finally{s.f()}}if(!c.filters||!Qt(c.filters,e)){if("force"in c){if(c.condition&&!Xt(c.condition,e))continue;if(!te(e,c.seed||t,c.hashAttribute,e.user.saveStickyBucketAssignmentDoc&&!c.disableStickyBucketing?c.fallbackAttribute:void 0,c.range,c.coverage,c.hashVersion))continue;return c.tracks&&c.tracks.forEach((function(t){!Yt(e,t.experiment,t.result).length&&e.global.saveDeferredTrack&&e.global.saveDeferredTrack({experiment:t.experiment,result:t.result})})),Zt(e,t,c.force,"force",c.id)}if(c.variations){var h={variations:c.variations,key:c.key||t};"coverage"in c&&(h.coverage=c.coverage),c.weights&&(h.weights=c.weights),c.hashAttribute&&(h.hashAttribute=c.hashAttribute),c.fallbackAttribute&&(h.fallbackAttribute=c.fallbackAttribute),c.disableStickyBucketing&&(h.disableStickyBucketing=c.disableStickyBucketing),void 0!==c.bucketVersion&&(h.bucketVersion=c.bucketVersion),void 0!==c.minBucketVersion&&(h.minBucketVersion=c.minBucketVersion),c.namespace&&(h.namespace=c.namespace),c.meta&&(h.meta=c.meta),c.ranges&&(h.ranges=c.ranges),c.name&&(h.name=c.name),c.phase&&(h.phase=c.phase),c.seed&&(h.seed=c.seed),c.hashVersion&&(h.hashVersion=c.hashVersion),c.filters&&(h.filters=c.filters),c.condition&&(h.condition=c.condition);var p=$t(h,t,e).result;if(e.global.onExperimentEval&&e.global.onExperimentEval(h,p),p.inExperiment&&!p.passthrough)return Zt(e,t,p.value,"experiment",c.id,h,p)}}}}catch(d){a.e(d)}finally{a.f()}}return Zt(e,t,void 0===n.defaultValue?null:n.defaultValue,"defaultValue")}function $t(t,e,r){var n=t.key,o=t.variations.length;if(o<2)return{result:ee(r,t,-1,!1,e)};if(!1===r.global.enabled||!1===r.user.enabled)return{result:ee(r,t,-1,!1,e)};if(t=function(t,e){var r=t.key,n=e.global.overrides;n&&n[r]&&"string"===typeof(t=Object.assign({},t,n[r])).url&&(t.url=d(t.url));return t}(t,r),t.urlPatterns&&!y(r.user.url||"",t.urlPatterns))return{result:ee(r,t,-1,!1,e)};var i=function(t,e,r){if(!e)return null;var n=e.split("?")[1];if(!n)return null;var o=n.replace(/#.*/,"").split("&").map((function(t){return t.split("=",2)})).filter((function(e){return c(e,1)[0]===t})).map((function(t){var e=c(t,2)[1];return parseInt(e)}));return o.length>0&&o[0]>=0&&o[0]<r?o[0]:null}(n,r.user.url||"",o);if(null!==i)return{result:ee(r,t,i,!1,e)};var a=function(t){return t.global.forcedVariations&&t.user.forcedVariations?Kt(Kt({},t.global.forcedVariations),t.user.forcedVariations):t.global.forcedVariations?t.global.forcedVariations:t.user.forcedVariations?t.user.forcedVariations:{}}(r);if(n in a)return{result:ee(r,t,a[n],!1,e)};if("draft"===t.status||!1===t.active)return{result:ee(r,t,-1,!1,e)};var u=re(r,t.hashAttribute,r.user.saveStickyBucketAssignmentDoc&&!t.disableStickyBucketing?t.fallbackAttribute:void 0),s=u.hashAttribute,l=u.hashValue;if(!l)return{result:ee(r,t,-1,!1,e)};var f=-1,v=!1,m=!1;if(r.user.saveStickyBucketAssignmentDoc&&!t.disableStickyBucketing){var b=function(t){var e=t.ctx,r=t.expKey,n=t.expBucketVersion,o=t.expHashAttribute,i=t.expFallbackAttribute,a=t.expMinBucketVersion,c=t.expMeta;a=a||0,o=o||"id",c=c||[];var u=ne(r,n=n||0),s=function(t,e,r){if(!t.user.stickyBucketAssignmentDocs)return{};var n=re(t,e),o=n.hashAttribute,i=n.hashValue,a="".concat(o,"||").concat(x(i)),c=re(t,r),u=c.hashAttribute,s=c.hashValue,l=s?"".concat(u,"||").concat(x(s)):null,f={};l&&t.user.stickyBucketAssignmentDocs[l]&&Object.assign(f,t.user.stickyBucketAssignmentDocs[l].assignments||{});t.user.stickyBucketAssignmentDocs[a]&&Object.assign(f,t.user.stickyBucketAssignmentDocs[a].assignments||{});return f}(e,o,i);if(a>0)for(var l=0;l<=a;l++){if(void 0!==s[ne(r,l)])return{variation:-1,versionIsBlocked:!0}}var f=s[u];if(void 0===f)return{variation:-1};var h=c.findIndex((function(t){return t.key===f}));return h<0?{variation:-1}:{variation:h}}({ctx:r,expKey:t.key,expBucketVersion:t.bucketVersion,expHashAttribute:t.hashAttribute,expFallbackAttribute:t.fallbackAttribute,expMinBucketVersion:t.minBucketVersion,expMeta:t.meta}),w=b.variation;v=w>=0,f=w,m=!!b.versionIsBlocked}if(!v){if(t.filters){if(Qt(t.filters,r))return{result:ee(r,t,-1,!1,e)}}else if(t.namespace&&!function(t,e){var r=h("__"+e[0],t,1);return null!==r&&r>=e[1]&&r<e[2]}(l,t.namespace))return{result:ee(r,t,-1,!1,e)};if(t.include&&!function(t){try{return t()}catch(vr){return console.error(vr),!1}}(t.include))return{result:ee(r,t,-1,!1,e)};if(t.condition&&!Xt(t.condition,r))return{result:ee(r,t,-1,!1,e)};if(t.parentConditions){var _,E=new Set(r.stack.evaluatedFeatures),k=Gt(t.parentConditions);try{for(k.s();!(_=k.n()).done;){var S=_.value;r.stack.evaluatedFeatures=new Set(E);var O=qt(S.id,r);if("cyclicPrerequisite"===O.source)return{result:ee(r,t,-1,!1,e)};if(!Lt({value:O.value},S.condition||{}))return{result:ee(r,t,-1,!1,e)}}}catch(R){k.e(R)}finally{k.f()}}if(t.groups&&!function(t,e){for(var r=e.global.groups||{},n=0;n<t.length;n++)if(r[t[n]])return!0;return!1}(t.groups,r))return{result:ee(r,t,-1,!1,e)}}if(t.url&&!function(t,e){var r=e.user.url;if(!r)return!1;var n=r.replace(/^https?:\/\//,"").replace(/^[^/]*\//,"/");return!!t.test(r)||!!t.test(n)}(t.url,r))return{result:ee(r,t,-1,!1,e)};var L=h(t.seed||n,l,t.hashVersion||1);if(null===L)return{result:ee(r,t,-1,!1,e)};v||(f=function(t,e){for(var r=0;r<e.length;r++)if(p(t,e[r]))return r;return-1}(L,t.ranges||g(o,void 0===t.coverage?1:t.coverage,t.weights)));if(m)return{result:ee(r,t,-1,!1,e,void 0,!0)};if(f<0)return{result:ee(r,t,-1,!1,e)};if("force"in t)return{result:ee(r,t,void 0===t.force?-1:t.force,!1,e)};if(r.global.qaMode||r.user.qaMode)return{result:ee(r,t,-1,!1,e)};if("stopped"===t.status)return{result:ee(r,t,-1,!1,e)};var A=ee(r,t,f,!0,e,L,v);if(r.user.saveStickyBucketAssignmentDoc&&!t.disableStickyBucketing){var j=function(t,e,r,n){var o="".concat(e,"||").concat(r),i=t.user.stickyBucketAssignmentDocs&&t.user.stickyBucketAssignmentDocs[o]&&t.user.stickyBucketAssignmentDocs[o].assignments||{},a=Kt(Kt({},i),n),c=JSON.stringify(i)!==JSON.stringify(a);return{key:o,doc:{attributeName:e,attributeValue:r,assignments:a},changed:c}}(r,s,x(l),Bt({},ne(t.key,t.bucketVersion),A.key)),P=j.changed,T=j.key,C=j.doc;P&&(r.user.stickyBucketAssignmentDocs=r.user.stickyBucketAssignmentDocs||{},r.user.stickyBucketAssignmentDocs[T]=C,r.user.saveStickyBucketAssignmentDoc(C))}var N=Yt(r,t,A);0===N.length&&r.global.saveDeferredTrack&&r.global.saveDeferredTrack({experiment:t,result:A});var I=N.length?1===N.length?N[0]:Promise.all(N).then((function(){})):void 0;return"changeId"in t&&t.changeId&&r.global.recordChangeId&&r.global.recordChangeId(t.changeId),{result:A,trackingCall:I}}function Zt(t,e,r,n,o,i,a){var c={value:r,on:!!r,off:!r,source:n,ruleId:o||""};if(i&&(c.experiment=i),a&&(c.experimentResult=a),"override"!==n){if(t.global.onFeatureUsage){var u=t.global.onFeatureUsage;Vt((function(){return u(e,c,t.user)}))}if(t.user.onFeatureUsage){var s=t.user.onFeatureUsage;Vt((function(){return s(e,c)}))}if(t.global.eventLogger){var l=t.global.eventLogger;Vt((function(){return l(Wt,{feature:e,source:c.source,value:c.value,ruleId:"defaultValue"===c.source?"$default":c.ruleId||"",variationId:c.experimentResult?c.experimentResult.key:""},t.user)}))}}return c}function Xt(t,e){return Lt(e.user.attributes||{},t,e.global.savedGroups||{})}function Qt(t,e){return t.some((function(t){var r=re(e,t.attribute).hashValue;if(!r)return!0;var n=h(t.seed,r,t.hashVersion||2);return null===n||!t.ranges.some((function(t){return p(n,t)}))}))}function te(t,e,r,n,o,i,a){if(!o&&void 0===i)return!0;if(!o&&0===i)return!1;var c=re(t,r,n).hashValue;if(!c)return!1;var u=h(e,c,a||1);return null!==u&&(o?p(u,o):void 0===i||u<=i)}function ee(t,e,r,n,o,i,a){var c=!0;(r<0||r>=e.variations.length)&&(r=0,c=!1);var u=re(t,e.hashAttribute,t.user.saveStickyBucketAssignmentDoc&&!e.disableStickyBucketing?e.fallbackAttribute:void 0),s=u.hashAttribute,l=u.hashValue,f=e.meta?e.meta[r]:{},h={key:f.key||""+r,featureId:o,inExperiment:c,hashUsed:n,variationId:r,value:e.variations[r],hashAttribute:s,hashValue:l,stickyBucketUsed:!!a};return f.name&&(h.name=f.name),void 0!==i&&(h.bucket=i),f.passthrough&&(h.passthrough=f.passthrough),h}function re(t,e,r){var n=e||"id",o="";return t.user.attributes&&t.user.attributes[n]&&(o=t.user.attributes[n]),t.user.attributes&&!o&&r&&(t.user.attributes[r]&&(o=t.user.attributes[r]),o&&(n=r)),{hashAttribute:n,hashValue:o}}function ne(t,e){return e=e||0,"".concat(t,"__").concat(e)}function oe(t,e,r){return ie.apply(this,arguments)}function ie(){return(ie=Ut(Rt().mark((function t(e,r,n){var o;return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=ae(e,n),t.abrupt("return",r.getAllAssignments(o));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ae(t,e){var r={},n=function(t,e){var r=new Set,n=e&&e.features?e.features:t.global.features||{},o=e&&e.experiments?e.experiments:t.global.experiments||[];return Object.keys(n).forEach((function(t){var e=n[t];if(e.rules){var o,i=Gt(e.rules);try{for(i.s();!(o=i.n()).done;){var a=o.value;a.variations&&(r.add(a.hashAttribute||"id"),a.fallbackAttribute&&r.add(a.fallbackAttribute))}}catch(c){i.e(c)}finally{i.f()}}})),o.map((function(t){r.add(t.hashAttribute||"id"),t.fallbackAttribute&&r.add(t.fallbackAttribute)})),Array.from(r)}(t,e);return n.forEach((function(e){var n=re(t,e).hashValue;r[e]=x(n)})),r}function ce(t,e,r){return ue.apply(this,arguments)}function ue(){return(ue=Ut(Rt().mark((function t(e,r,n){return Rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=Kt({},e)).encryptedFeatures){t.next=14;break}return t.prev=2,t.t0=JSON,t.next=6,w(e.encryptedFeatures,r,n);case 6:t.t1=t.sent,e.features=t.t0.parse.call(t.t0,t.t1),t.next=13;break;case 10:t.prev=10,t.t2=t.catch(2),console.error(t.t2);case 13:delete e.encryptedFeatures;case 14:if(!e.encryptedExperiments){t.next=27;break}return t.prev=15,t.t3=JSON,t.next=19,w(e.encryptedExperiments,r,n);case 19:t.t4=t.sent,e.experiments=t.t3.parse.call(t.t3,t.t4),t.next=26;break;case 23:t.prev=23,t.t5=t.catch(15),console.error(t.t5);case 26:delete e.encryptedExperiments;case 27:if(!e.encryptedSavedGroups){t.next=40;break}return t.prev=28,t.t6=JSON,t.next=32,w(e.encryptedSavedGroups,r,n);case 32:t.t7=t.sent,e.savedGroups=t.t6.parse.call(t.t6,t.t7),t.next=39;break;case 36:t.prev=36,t.t8=t.catch(28),console.error(t.t8);case 39:delete e.encryptedSavedGroups;case 40:return t.abrupt("return",e);case 41:case"end":return t.stop()}}),t,null,[[2,10],[15,23],[28,36]])})))).apply(this,arguments)}function se(t){var e=t.apiHost||"https://cdn.growthbook.io";return{apiHost:e.replace(/\/*$/,""),streamingHost:(t.streamingHost||e).replace(/\/*$/,""),apiRequestHeaders:t.apiHostRequestHeaders,streamingHostRequestHeaders:t.streamingHostRequestHeaders}}var le=["data"];function fe(t){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(t)}function he(t){return function(t){if(Array.isArray(t))return xe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function de(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(r),!0).forEach((function(e){ye(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ye(t,e,r){return(e=ke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ve(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function me(){me=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==fe(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(fe(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ge(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function be(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ge(i,n,o,a,c,"next",t)}function c(t){ge(i,n,o,a,c,"throw",t)}a(void 0)}))}}function we(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_e(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function _e(t,e){if(t){if("string"==typeof t)return xe(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xe(t,e):void 0}}function xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Ee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ke(n.key),n)}}function ke(t){var e=function(t,e){if("object"!=fe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fe(e)?e:e+""}var Se="undefined"!==typeof window&&"undefined"!==typeof document,Oe=k(),Le=function(){return t=function e(r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=r||{},this.version=Oe,this._options=this.context=r,this._renderer=r.renderer||null,this._trackedExperiments=new Set,this._completedChangeIds=new Set,this._trackedFeatures={},this.debug=!!r.debug,this._subscriptions=new Set,this.ready=!1,this._assigned=new Map,this._attributeOverrides={},this._activeAutoExperiments=new Map,this._triggeredExpKeys=new Set,this._initialized=!1,this._redirectedUrl="",this._deferredTrackingCalls=new Map,this._autoExperimentsAllowed=!r.disableExperimentsOnLoad,this._destroyCallbacks=[],this.logs=[],this.log=this.log.bind(this),this._track=this._track.bind(this),this._saveDeferredTrack=this._saveDeferredTrack.bind(this),this._trackFeatureUsage=this._trackFeatureUsage.bind(this),this._fireSubscriptions=this._fireSubscriptions.bind(this),this._recordChangedId=this._recordChangedId.bind(this),r.remoteEval){if(r.decryptionKey)throw new Error("Encryption is not available for remoteEval");if(!r.clientKey)throw new Error("Missing clientKey");var n=!1;try{n=!!new URL(r.apiHost||"").hostname.match(/growthbook\.io$/i)}catch(t){}if(n)throw new Error("Cannot use remoteEval on GrowthBook Cloud")}else if(r.cacheKeyAttributes)throw new Error("cacheKeyAttributes are only used for remoteEval");if(r.stickyBucketService){var o=r.stickyBucketService;this._saveStickyBucketAssignmentDoc=function(t){return o.saveAssignments(t)}}if(r.plugins){var i,a=we(r.plugins);try{for(a.s();!(i=a.n()).done;)(0,i.value)(this)}catch(s){a.e(s)}finally{a.f()}}if(r.features&&(this.ready=!0),Se&&r.enableDevMode&&(window._growthbook=this,document.dispatchEvent(new Event("gbloaded"))),r.experiments&&(this.ready=!0,this._updateAllAutoExperiments()),this._options.stickyBucketService&&this._options.stickyBucketAssignmentDocs)for(var c in this._options.stickyBucketAssignmentDocs){var u=this._options.stickyBucketAssignmentDocs[c];u&&this._options.stickyBucketService.saveAssignments(u).catch((function(){}))}this.ready&&this.refreshStickyBuckets(this.getPayload())},e=[{key:"setPayload",value:(b=be(me().mark((function t(e){var r;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._payload=e,t.next=3,ce(e,this._options.decryptionKey);case 3:return r=t.sent,this._decryptedPayload=r,t.next=7,this.refreshStickyBuckets(r);case 7:r.features&&(this._options.features=r.features),r.savedGroups&&(this._options.savedGroups=r.savedGroups),r.experiments&&(this._options.experiments=r.experiments,this._updateAllAutoExperiments()),this.ready=!0,this._render();case 12:case"end":return t.stop()}}),t,this)}))),function(t){return b.apply(this,arguments)})},{key:"initSync",value:function(t){this._initialized=!0;var e=t.payload;if(e.encryptedExperiments||e.encryptedFeatures)throw new Error("initSync does not support encrypted payloads");if(this._options.stickyBucketService&&!this._options.stickyBucketAssignmentDocs)throw new Error("initSync requires you to pass stickyBucketAssignmentDocs into the GrowthBook constructor");return this._payload=e,this._decryptedPayload=e,e.features&&(this._options.features=e.features),e.experiments&&(this._options.experiments=e.experiments,this._updateAllAutoExperiments()),this.ready=!0,_t(this,t),this}},{key:"init",value:(g=be(me().mark((function t(e){var r,n,o;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._initialized=!0,(e=e||{}).cacheSettings&&Y(e.cacheSettings),!e.payload){t.next=10;break}return t.next=6,this.setPayload(e.payload);case 6:return _t(this,e),t.abrupt("return",{success:!0,source:"init"});case 10:return t.next=12,this._refresh(de(de({},e),{},{allowStale:!0}));case 12:return r=t.sent,n=r.data,o=ve(r,le),_t(this,e),t.next=18,this.setPayload(n||{});case 18:return t.abrupt("return",o);case 19:case"end":return t.stop()}}),t,this)}))),function(t){return g.apply(this,arguments)})},{key:"loadFeatures",value:(m=be(me().mark((function t(e){var r;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||{},t.next=3,this.init({skipCache:e.skipCache,timeout:e.timeout,streaming:(null===(r=this._options.backgroundSync)||void 0===r||r)&&(e.autoRefresh||this._options.subscribeToChanges)});case 3:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"refreshFeatures",value:function(){var t=be(me().mark((function t(e){var r;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._refresh(de(de({},e||{}),{},{allowStale:!1}));case 2:if(!(r=t.sent).data){t.next=6;break}return t.next=6,this.setPayload(r.data);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getApiInfo",value:function(){return[this.getApiHosts().apiHost,this.getClientKey()]}},{key:"getApiHosts",value:function(){return se(this._options)}},{key:"getClientKey",value:function(){return this._options.clientKey||""}},{key:"getPayload",value:function(){return this._payload||{features:this.getFeatures(),experiments:this.getExperiments()}}},{key:"getDecryptedPayload",value:function(){return this._decryptedPayload||this.getPayload()}},{key:"isRemoteEval",value:function(){return this._options.remoteEval||!1}},{key:"getCacheKeyAttributes",value:function(){return this._options.cacheKeyAttributes}},{key:"_refresh",value:(v=be(me().mark((function t(e){var r,n,o,i,a;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.timeout,o=e.skipCache,i=e.allowStale,a=e.streaming,this._options.clientKey){t.next=3;break}throw new Error("Missing clientKey");case 3:return t.abrupt("return",Z({instance:this,timeout:n,skipCache:o||this._options.disableCache,allowStale:i,backgroundSync:null===(r=null!==a&&void 0!==a?a:this._options.backgroundSync)||void 0===r||r}));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return v.apply(this,arguments)})},{key:"_render",value:function(){if(this._renderer)try{this._renderer()}catch(t){console.error("Failed to render",t)}}},{key:"setFeatures",value:function(t){this._options.features=t,this.ready=!0,this._render()}},{key:"setEncryptedFeatures",value:(d=be(me().mark((function t(e,r,n){var o;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,r||this._options.decryptionKey,n);case 2:o=t.sent,this.setFeatures(JSON.parse(o));case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return d.apply(this,arguments)})},{key:"setExperiments",value:function(t){this._options.experiments=t,this.ready=!0,this._updateAllAutoExperiments()}},{key:"setEncryptedExperiments",value:(p=be(me().mark((function t(e,r,n){var o;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,r||this._options.decryptionKey,n);case 2:o=t.sent,this.setExperiments(JSON.parse(o));case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return p.apply(this,arguments)})},{key:"setAttributes",value:(h=be(me().mark((function t(e){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._options.attributes=e,!this._options.stickyBucketService){t.next=4;break}return t.next=4,this.refreshStickyBuckets();case 4:if(!this._options.remoteEval){t.next=8;break}return t.next=7,this._refreshForRemoteEval();case 7:return t.abrupt("return");case 8:this._render(),this._updateAllAutoExperiments();case 10:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"updateAttributes",value:(f=be(me().mark((function t(e){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.setAttributes(de(de({},this._options.attributes),e)));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"setAttributeOverrides",value:(l=be(me().mark((function t(e){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._attributeOverrides=e,!this._options.stickyBucketService){t.next=4;break}return t.next=4,this.refreshStickyBuckets();case 4:if(!this._options.remoteEval){t.next=8;break}return t.next=7,this._refreshForRemoteEval();case 7:return t.abrupt("return");case 8:this._render(),this._updateAllAutoExperiments();case 10:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"setForcedVariations",value:(s=be(me().mark((function t(e){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._options.forcedVariations=e||{},!this._options.remoteEval){t.next=5;break}return t.next=4,this._refreshForRemoteEval();case 4:return t.abrupt("return");case 5:this._render(),this._updateAllAutoExperiments();case 7:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"setForcedFeatures",value:function(t){this._forcedFeatureValues=t,this._render()}},{key:"setURL",value:(u=be(me().mark((function t(e){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==this._options.url){t.next=2;break}return t.abrupt("return");case 2:if(this._options.url=e,this._redirectedUrl="",!this._options.remoteEval){t.next=9;break}return t.next=7,this._refreshForRemoteEval();case 7:return this._updateAllAutoExperiments(!0),t.abrupt("return");case 9:this._updateAllAutoExperiments(!0);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"getAttributes",value:function(){return de(de({},this._options.attributes),this._attributeOverrides)}},{key:"getForcedVariations",value:function(){return this._options.forcedVariations||{}}},{key:"getForcedFeatures",value:function(){return this._forcedFeatureValues||new Map}},{key:"getStickyBucketAssignmentDocs",value:function(){return this._options.stickyBucketAssignmentDocs||{}}},{key:"getUrl",value:function(){return this._options.url||""}},{key:"getFeatures",value:function(){return this._options.features||{}}},{key:"getExperiments",value:function(){return this._options.experiments||[]}},{key:"getCompletedChangeIds",value:function(){return Array.from(this._completedChangeIds)}},{key:"subscribe",value:function(t){var e=this;return this._subscriptions.add(t),function(){e._subscriptions.delete(t)}}},{key:"_refreshForRemoteEval",value:(c=be(me().mark((function t(){var e;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._options.remoteEval){t.next=2;break}return t.abrupt("return");case 2:if(this._initialized){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,this._refresh({allowStale:!1});case 6:if(!(e=t.sent).data){t.next=10;break}return t.next=10,this.setPayload(e.data);case 10:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"getAllResults",value:function(){return new Map(this._assigned)}},{key:"onDestroy",value:function(t){this._destroyCallbacks.push(t)}},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"destroy",value:function(){this._destroyed=!0,this._destroyCallbacks.forEach((function(e){try{e()}catch(t){console.error(t)}})),this._subscriptions.clear(),this._assigned.clear(),this._trackedExperiments.clear(),this._completedChangeIds.clear(),this._deferredTrackingCalls.clear(),this._trackedFeatures={},this._destroyCallbacks=[],this._payload=void 0,this._saveStickyBucketAssignmentDoc=void 0,Q(this),this.logs=[],Se&&window._growthbook===this&&delete window._growthbook,this._activeAutoExperiments.forEach((function(t){t.undo()})),this._activeAutoExperiments.clear(),this._triggeredExpKeys.clear()}},{key:"setRenderer",value:function(t){this._renderer=t}},{key:"forceVariation",value:function(t,e){this._options.forcedVariations=this._options.forcedVariations||{},this._options.forcedVariations[t]=e,this._options.remoteEval?this._refreshForRemoteEval():(this._updateAllAutoExperiments(),this._render())}},{key:"run",value:function(t){var e=$t(t,null,this._getEvalContext()).result;return this._fireSubscriptions(t,e),e}},{key:"triggerExperiment",value:function(t){var e=this;return this._triggeredExpKeys.add(t),this._options.experiments?this._options.experiments.filter((function(e){return e.key===t})).map((function(t){return e._runAutoExperiment(t)})).filter((function(t){return null!==t})):null}},{key:"triggerAutoExperiments",value:function(){this._autoExperimentsAllowed=!0,this._updateAllAutoExperiments(!0)}},{key:"_getEvalContext",value:function(){return{user:this._getUserContext(),global:this._getGlobalContext(),stack:{evaluatedFeatures:new Set}}}},{key:"_getUserContext",value:function(){return{attributes:this._options.user?de(de({},this._options.user),this.getAttributes()):this.getAttributes(),blockedChangeIds:this._options.blockedChangeIds,stickyBucketAssignmentDocs:this._options.stickyBucketAssignmentDocs,url:this._getContextUrl(),forcedVariations:this._options.forcedVariations,forcedFeatureValues:this._forcedFeatureValues,saveStickyBucketAssignmentDoc:this._saveStickyBucketAssignmentDoc,trackingCallback:this._options.trackingCallback?this._track:void 0,onFeatureUsage:this._trackFeatureUsage}}},{key:"_getGlobalContext",value:function(){return{features:this._options.features,experiments:this._options.experiments,log:this.log,enabled:this._options.enabled,qaMode:this._options.qaMode,savedGroups:this._options.savedGroups,groups:this._options.groups,overrides:this._options.overrides,onExperimentEval:this._subscriptions.size>0?this._fireSubscriptions:void 0,recordChangeId:this._recordChangedId,saveDeferredTrack:this._saveDeferredTrack,eventLogger:this._options.eventLogger}}},{key:"_runAutoExperiment",value:function(e,r){var n=this,o=this._activeAutoExperiments.get(e);if(e.manual&&!this._triggeredExpKeys.has(e.key)&&!o)return null;var i,a,c=this._isAutoExperimentBlockedByContext(e);if(c)i=ee(this._getEvalContext(),e,-1,!1,"");else{var u=$t(e,null,this._getEvalContext());i=u.result,a=u.trackingCall,this._fireSubscriptions(e,i)}var s=JSON.stringify(i.value);if(!r&&i.inExperiment&&o&&o.valueHash===s)return i;if(o&&this._undoActiveAutoExperiment(e),i.inExperiment){var l=O(e);if("redirect"===l&&i.value.urlRedirect&&e.urlPatterns){var f=e.persistQueryString?function(e,r){var n,o;try{n=new URL(e),o=new URL(r)}catch(t){return console.error("Unable to merge query strings: ".concat(t)),r}return n.searchParams.forEach((function(t,e){o.searchParams.has(e)||o.searchParams.set(e,t)})),o.toString()}(this._getContextUrl(),i.value.urlRedirect):i.value.urlRedirect;if(y(f,e.urlPatterns))return this.log("Skipping redirect because original URL matches redirect URL",{id:e.key}),i;this._redirectedUrl=f;var h,p=this._getNavigateFunction(),d=p.navigate,v=p.delay;if(d)if(Se)Promise.all([].concat(he(a?[L(a,null!==(h=this._options.maxNavigateDelay)&&void 0!==h?h:1e3)]:[]),[new Promise((function(t){var e;return window.setTimeout(t,null!==(e=n._options.navigateDelay)&&void 0!==e?e:v)}))])).then((function(){try{d(f)}catch(t){console.error(t)}}));else try{d(f)}catch(t){console.error(t)}}else if("visual"===l){var m=this._options.applyDomChangesCallback?this._options.applyDomChangesCallback(i.value):this._applyDOMChanges(i.value);m&&this._activeAutoExperiments.set(e,{undo:m,valueHash:s})}}return i}},{key:"_undoActiveAutoExperiment",value:function(t){var e=this._activeAutoExperiments.get(t);e&&(e.undo(),this._activeAutoExperiments.delete(t))}},{key:"_updateAllAutoExperiments",value:function(t){var e=this;if(this._autoExperimentsAllowed){var r=this._options.experiments||[],n=new Set(r);this._activeAutoExperiments.forEach((function(t,r){n.has(r)||(t.undo(),e._activeAutoExperiments.delete(r))}));var o,i=we(r);try{for(i.s();!(o=i.n()).done;){var a=o.value,c=this._runAutoExperiment(a,t);if(null!==c&&void 0!==c&&c.inExperiment&&"redirect"===O(a))break}}catch(u){i.e(u)}finally{i.f()}}}},{key:"_fireSubscriptions",value:function(e,r){var n=e.key,o=this._assigned.get(n);o&&o.result.inExperiment===r.inExperiment&&o.result.variationId===r.variationId||(this._assigned.set(n,{experiment:e,result:r}),this._subscriptions.forEach((function(n){try{n(e,r)}catch(t){console.error(t)}})))}},{key:"_recordChangedId",value:function(t){this._completedChangeIds.add(t)}},{key:"_trackFeatureUsage",value:function(e,r){var n=JSON.stringify(r.value);if(this._trackedFeatures[e]!==n&&(this._trackedFeatures[e]=n,this._options.enableDevMode&&this.logs.push({featureKey:e,result:r,timestamp:Date.now().toString(),logType:"feature"}),this._options.onFeatureUsage))try{this._options.onFeatureUsage(e,r)}catch(t){}}},{key:"isOn",value:function(t){return this.evalFeature(t).on}},{key:"isOff",value:function(t){return this.evalFeature(t).off}},{key:"getFeatureValue",value:function(t,e){var r=this.evalFeature(t).value;return null===r?e:r}},{key:"feature",value:function(t){return this.evalFeature(t)}},{key:"evalFeature",value:function(t){return qt(t,this._getEvalContext())}},{key:"log",value:function(t,e){this.debug&&(this._options.log?this._options.log(t,e):console.log(t,e))}},{key:"getDeferredTrackingCalls",value:function(){return Array.from(this._deferredTrackingCalls.values())}},{key:"setDeferredTrackingCalls",value:function(t){var e=this;this._deferredTrackingCalls=new Map(t.filter((function(t){return t&&t.experiment&&t.result})).map((function(t){return[e._getTrackKey(t.experiment,t.result),t]})))}},{key:"fireDeferredTrackingCalls",value:(a=be(me().mark((function t(){var e,r=this;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._options.trackingCallback){t.next=2;break}return t.abrupt("return");case 2:return e=[],this._deferredTrackingCalls.forEach((function(t){t&&t.experiment&&t.result?e.push(r._track(t.experiment,t.result)):console.error("Invalid deferred tracking call",{call:t})})),this._deferredTrackingCalls.clear(),t.next=7,Promise.all(e);case 7:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"setTrackingCallback",value:function(t){this._options.trackingCallback=t,this.fireDeferredTrackingCalls()}},{key:"setEventLogger",value:function(t){this._options.eventLogger=t}},{key:"logEvent",value:(i=be(me().mark((function t(e,r){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._destroyed){t.next=3;break}return console.error("Cannot log event to destroyed GrowthBook instance"),t.abrupt("return");case 3:if(this._options.enableDevMode&&this.logs.push({eventName:e,properties:r,timestamp:Date.now().toString(),logType:"event"}),!this._options.eventLogger){t.next=15;break}return t.prev=5,t.next=8,this._options.eventLogger(e,r||{},this._getUserContext());case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),console.error(t.t0);case 13:t.next=16;break;case 15:console.error("No event logger configured");case 16:case"end":return t.stop()}}),t,this,[[5,10]])}))),function(t,e){return i.apply(this,arguments)})},{key:"_getTrackKey",value:function(t,e){return e.hashAttribute+e.hashValue+t.key+e.variationId}},{key:"_saveDeferredTrack",value:function(t){this._deferredTrackingCalls.set(this._getTrackKey(t.experiment,t.result),t)}},{key:"_track",value:(o=be(me().mark((function t(e,r){var n;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this._getTrackKey(e,r),!this._trackedExperiments.has(n)){t.next=3;break}return t.abrupt("return");case 3:if(this._trackedExperiments.add(n),this._options.enableDevMode&&this.logs.push({experiment:e,result:r,timestamp:Date.now().toString(),logType:"experiment"}),this._options.trackingCallback){t.next=7;break}return t.abrupt("return");case 7:return t.prev=7,t.next=10,this._options.trackingCallback(e,r);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(7),console.error(t.t0);case 15:case"end":return t.stop()}}),t,this,[[7,12]])}))),function(t,e){return o.apply(this,arguments)})},{key:"_getContextUrl",value:function(){return this._options.url||(Se?window.location.href:"")}},{key:"_isAutoExperimentBlockedByContext",value:function(e){var r=O(e);if("visual"===r){if(this._options.disableVisualExperiments)return!0;if(this._options.disableJsInjection&&e.variations.some((function(t){return t.js})))return!0}else{if("redirect"!==r)return!0;if(this._options.disableUrlRedirectExperiments)return!0;try{var n,o=new URL(this._getContextUrl()),i=we(e.variations);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a&&a.urlRedirect){var c=new URL(a.urlRedirect);if(this._options.disableCrossOriginUrlRedirectExperiments){if(c.protocol!==o.protocol)return!0;if(c.host!==o.host)return!0}}}}catch(u){i.e(u)}finally{i.f()}}catch(t){return this.log("Error parsing current or redirect URL",{id:e.key,error:t}),!0}}return!(!e.changeId||!(this._options.blockedChangeIds||[]).includes(e.changeId))}},{key:"getRedirectUrl",value:function(){return this._redirectedUrl}},{key:"_getNavigateFunction",value:function(){return this._options.navigate?{navigate:this._options.navigate,delay:0}:Se?{navigate:function(t){window.location.replace(t)},delay:100}:{navigate:null,delay:0}}},{key:"_applyDOMChanges",value:function(t){if(Se){var e=[];if(t.css){var r=document.createElement("style");r.innerHTML=t.css,document.head.appendChild(r),e.push((function(){return r.remove()}))}if(t.js){var n=document.createElement("script");n.innerHTML=t.js,this._options.jsInjectionNonce&&(n.nonce=this._options.jsInjectionNonce),document.head.appendChild(n),e.push((function(){return n.remove()}))}return t.domMutations&&t.domMutations.forEach((function(t){e.push(xt.declarative(t).revert)})),function(){e.forEach((function(t){return t()}))}}}},{key:"refreshStickyBuckets",value:(n=be(me().mark((function t(e){var r,n;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._options.stickyBucketService){t.next=6;break}return r=this._getEvalContext(),t.next=4,oe(r,this._options.stickyBucketService,e);case 4:n=t.sent,this._options.stickyBucketAssignmentDocs=n;case 6:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}],e&&Ee(t.prototype,e),r&&Ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,i,a,c,u,s,l,f,h,p,d,v,m,g,b}();function Ae(t){return je.apply(this,arguments)}function je(){return(je=be(me().mark((function t(e){var r;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Le(e),t.next=3,Z({instance:r,skipCache:e.skipCache,allowStale:!1,backgroundSync:e.streaming});case 3:r.destroy();case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Pe=["data"];function Te(t){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Te(t)}function Ce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ne(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ce(Object(r),!0).forEach((function(e){Ie(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ie(t,e,r){return(e=We(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Re(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Fe(){Fe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Te(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Te(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ge(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function De(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ge(i,n,o,a,c,"next",t)}function c(t){Ge(i,n,o,a,c,"throw",t)}a(void 0)}))}}function He(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Ue(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ue(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,We(n.key),n)}}function Be(t,e,r){return e&&Ke(t.prototype,e),r&&Ke(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function We(t){var e=function(t,e){if("object"!=Te(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Te(e)?e:e+""}var Je=k(),Ve=function(){return Be((function t(e){if(Me(this,t),e=e||{},this.version=Je,this._options=e,this.debug=!!e.debug,this.ready=!1,this._features={},this._experiments=[],this.log=this.log.bind(this),e.plugins){var r,n=He(e.plugins);try{for(n.s();!(r=n.n()).done;){(0,r.value)(this)}}catch(o){n.e(o)}finally{n.f()}}}),[{key:"setPayload",value:(n=De(Fe().mark((function t(e){var r;return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._payload=e,t.next=3,ce(e,this._options.decryptionKey);case 3:r=t.sent,this._decryptedPayload=r,r.features&&(this._features=r.features),r.experiments&&(this._experiments=r.experiments),r.savedGroups&&(this._options.savedGroups=r.savedGroups),this.ready=!0;case 9:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"initSync",value:function(t){var e=t.payload;if(e.encryptedExperiments||e.encryptedFeatures)throw new Error("initSync does not support encrypted payloads");return this._payload=e,this._decryptedPayload=e,e.features&&(this._features=e.features),e.experiments&&(this._experiments=e.experiments),this.ready=!0,_t(this,t),this}},{key:"init",value:(r=De(Fe().mark((function t(e){var r,n,o;return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=e||{}).cacheSettings&&Y(e.cacheSettings),!e.payload){t.next=9;break}return t.next=5,this.setPayload(e.payload);case 5:return _t(this,e),t.abrupt("return",{success:!0,source:"init"});case 9:return t.next=11,this._refresh(Ne(Ne({},e),{},{allowStale:!0}));case 11:return r=t.sent,n=r.data,o=Re(r,Pe),_t(this,e),t.next=17,this.setPayload(n||{});case 17:return t.abrupt("return",o);case 18:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"refreshFeatures",value:function(){var t=De(Fe().mark((function t(e){var r;return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._refresh(Ne(Ne({},e||{}),{},{allowStale:!1}));case 2:if(!(r=t.sent).data){t.next=6;break}return t.next=6,this.setPayload(r.data);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getApiInfo",value:function(){return[this.getApiHosts().apiHost,this.getClientKey()]}},{key:"getApiHosts",value:function(){return se(this._options)}},{key:"getClientKey",value:function(){return this._options.clientKey||""}},{key:"getPayload",value:function(){return this._payload||{features:this.getFeatures(),experiments:this._experiments||[]}}},{key:"getDecryptedPayload",value:function(){return this._decryptedPayload||this.getPayload()}},{key:"_refresh",value:(e=De(Fe().mark((function t(e){var r,n,o,i;return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.timeout,n=e.skipCache,o=e.allowStale,i=e.streaming,this._options.clientKey){t.next=3;break}throw new Error("Missing clientKey");case 3:return t.abrupt("return",Z({instance:this,timeout:r,skipCache:n||this._options.disableCache,allowStale:o,backgroundSync:null===i||void 0===i||i}));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"getFeatures",value:function(){return this._features||{}}},{key:"getGlobalAttributes",value:function(){return this._options.globalAttributes||{}}},{key:"setGlobalAttributes",value:function(t){this._options.globalAttributes=t}},{key:"destroy",value:function(){this._destroyed=!0,Q(this),this._features={},this._experiments=[],this._decryptedPayload=void 0,this._payload=void 0,this._options={}}},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"setEventLogger",value:function(t){this._options.eventLogger=t}},{key:"logEvent",value:function(t,e,r){if(this._options.eventLogger){var n=this._getEvalContext(r);this._options.eventLogger(t,e,n.user)}}},{key:"runInlineExperiment",value:function(t,e){return $t(t,null,this._getEvalContext(e)).result}},{key:"_getEvalContext",value:function(t){return this._options.globalAttributes&&(t=Ne(Ne({},t),{},{attributes:Ne(Ne({},this._options.globalAttributes),t.attributes)})),{user:t,global:this._getGlobalContext(),stack:{evaluatedFeatures:new Set}}}},{key:"_getGlobalContext",value:function(){return{features:this._features,experiments:this._experiments,log:this.log,enabled:this._options.enabled,qaMode:this._options.qaMode,savedGroups:this._options.savedGroups,forcedFeatureValues:this._options.forcedFeatureValues,forcedVariations:this._options.forcedVariations,trackingCallback:this._options.trackingCallback,onFeatureUsage:this._options.onFeatureUsage}}},{key:"isOn",value:function(t,e){return this.evalFeature(t,e).on}},{key:"isOff",value:function(t,e){return this.evalFeature(t,e).off}},{key:"getFeatureValue",value:function(t,e,r){var n=this.evalFeature(t,r).value;return null===n?e:n}},{key:"evalFeature",value:function(t,e){return qt(t,this._getEvalContext(e))}},{key:"log",value:function(t,e){this.debug&&(this._options.log?this._options.log(t,e):console.log(t,e))}},{key:"setTrackingCallback",value:function(t){this._options.trackingCallback=t}},{key:"applyStickyBuckets",value:(t=De(Fe().mark((function t(e,r){var n,o,i;return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._getEvalContext(e),t.next=3,oe(n,r);case 3:return o=t.sent,i=Ne(Ne({},e),{},{stickyBucketAssignmentDocs:o,saveStickyBucketAssignmentDoc:function(t){return r.saveAssignments(t)}}),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"createScopedInstance",value:function(t){return new ze(this,t,this._options.plugins)}}]);var t,e,r,n}(),ze=function(){return Be((function t(e,r,n){if(Me(this,t),this._gb=e,this._userContext=r,n){var o,i=He(n);try{for(i.s();!(o=i.n()).done;){(0,o.value)(this)}}catch(a){i.e(a)}finally{i.f()}}}),[{key:"runInlineExperiment",value:function(t){return this._gb.runInlineExperiment(t,this._userContext)}},{key:"isOn",value:function(t){return this._gb.isOn(t,this._userContext)}},{key:"isOff",value:function(t){return this._gb.isOff(t,this._userContext)}},{key:"getFeatureValue",value:function(t,e){return this._gb.getFeatureValue(t,e,this._userContext)}},{key:"evalFeature",value:function(t){return this._gb.evalFeature(t,this._userContext)}},{key:"logEvent",value:function(t,e){this._gb.logEvent(t,e||{},this._userContext)}},{key:"setTrackingCallback",value:function(t){this._userContext.trackingCallback=t}},{key:"getClientKey",value:function(){return this._gb.getClientKey()}},{key:"setURL",value:function(t){this._userContext.url=t}},{key:"updateAttributes",value:function(t){this._userContext.attributes=Ne(Ne({},this._userContext.attributes),t)}}])}();function Ye(t){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}function qe(t){return function(t){if(Array.isArray(t))return or(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||nr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(t,e,r){return e=Xe(e),function(t,e){if(e&&("object"==Ye(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ze()?Reflect.construct(e,r||[],Xe(t).constructor):e.apply(t,r))}function Ze(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ze=function(){return!!t})()}function Xe(t){return Xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xe(t)}function Qe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tr(t,e)}function tr(t,e){return tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tr(t,e)}function er(){er=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:O(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ye(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ye(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function rr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||nr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(t,e){if(t){if("string"==typeof t)return or(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?or(t,e):void 0}}function or(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ir(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ar(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ir(i,n,o,a,c,"next",t)}function c(t){ir(i,n,o,a,c,"throw",t)}a(void 0)}))}}function cr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ur(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lr(n.key),n)}}function sr(t,e,r){return e&&ur(t.prototype,e),r&&ur(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function lr(t){var e=function(t,e){if("object"!=Ye(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ye(e)?e:e+""}var fr=function(){return sr((function t(e){cr(this,t),e=e||{},this.prefix=e.prefix||""}),[{key:"getAllAssignments",value:(t=ar(er().mark((function t(e){var r,n=this;return er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={},t.next=3,Promise.all(Object.entries(e).map((function(t){var e=rr(t,2),r=e[0],o=e[1];return n.getAssignments(r,o)})));case 3:return t.sent.forEach((function(t){if(t){var e="".concat(t.attributeName,"||").concat(t.attributeValue);r[e]=t}})),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})},{key:"getKey",value:function(t,e){return"".concat(this.prefix).concat(t,"||").concat(e)}}]);var t}(),hr=function(t){function e(t){var r;cr(this,e),t=t||{},(r=$e(this,e)).prefix=t.prefix||"gbStickyBuckets__";try{r.localStorage=t.localStorage||globalThis.localStorage}catch(vr){}return r}return Qe(e,t),sr(e,[{key:"getAssignments",value:(n=ar(er().mark((function t(e,r){var n,o,i,a;return er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.getKey(e,r),o=null,this.localStorage){t.next=4;break}return t.abrupt("return",o);case 4:return t.prev=4,t.next=7,this.localStorage.getItem(n);case 7:if(t.t0=t.sent,t.t0){t.next=10;break}t.t0="{}";case 10:i=t.t0,(a=JSON.parse(i)).attributeName&&a.attributeValue&&a.assignments&&(o=a),t.next=17;break;case 15:t.prev=15,t.t1=t.catch(4);case 17:return t.abrupt("return",o);case 18:case"end":return t.stop()}}),t,this,[[4,15]])}))),function(t,e){return n.apply(this,arguments)})},{key:"saveAssignments",value:(r=ar(er().mark((function t(e){var r;return er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.getKey(e.attributeName,e.attributeValue),this.localStorage){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,this.localStorage.setItem(r,JSON.stringify(e));case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(3);case 10:case"end":return t.stop()}}),t,this,[[3,8]])}))),function(t){return r.apply(this,arguments)})}]);var r,n}(fr),pr=function(t){function e(t){var r;cr(this,e);var n=t.prefix,o=void 0===n?"gbStickyBuckets__":n,i=t.req,a=t.res,c=t.cookieAttributes,u=void 0===c?{maxAge:15552e6}:c;return(r=$e(this,e)).prefix=o,r.req=i,r.res=a,r.cookieAttributes=u,r}return Qe(e,t),sr(e,[{key:"getAssignments",value:(n=ar(er().mark((function t(e,r){var n,o,i,a;return er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.getKey(e,r),o=null,this.req){t.next=4;break}return t.abrupt("return",o);case 4:try{i=this.req.cookies[n]||"{}",(a=JSON.parse(i)).attributeName&&a.attributeValue&&a.assignments&&(o=a)}catch(vr){}return t.abrupt("return",o);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"saveAssignments",value:(r=ar(er().mark((function t(e){var r,n;return er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.getKey(e.attributeName,e.attributeValue),this.res){t.next=3;break}return t.abrupt("return");case 3:n=JSON.stringify(e),this.res.cookie(encodeURIComponent(r),encodeURIComponent(n),this.cookieAttributes);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}]);var r,n}(fr),dr=function(t){function e(t){var r;cr(this,e);var n=t.prefix,o=void 0===n?"gbStickyBuckets__":n,i=t.jsCookie,a=t.cookieAttributes,c=void 0===a?{expires:180}:a;return(r=$e(this,e)).prefix=o,r.jsCookie=i,r.cookieAttributes=c,r}return Qe(e,t),sr(e,[{key:"getAssignments",value:(n=ar(er().mark((function t(e,r){var n,o,i,a;return er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.getKey(e,r),o=null,this.jsCookie){t.next=4;break}return t.abrupt("return",o);case 4:try{i=this.jsCookie.get(n),(a=JSON.parse(i||"{}")).attributeName&&a.attributeValue&&a.assignments&&(o=a)}catch(vr){}return t.abrupt("return",o);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"saveAssignments",value:(r=ar(er().mark((function t(e){var r,n;return er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.getKey(e.attributeName,e.attributeValue),this.jsCookie){t.next=3;break}return t.abrupt("return");case 3:n=JSON.stringify(e),this.jsCookie.set(r,n,this.cookieAttributes);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}]);var r,n}(fr),yr=function(t){function e(t){var r;cr(this,e);var n=t.redis;return(r=$e(this,e)).redis=n,r}return Qe(e,t),sr(e,[{key:"getAllAssignments",value:(o=ar(er().mark((function t(e){var r,n,o,i=this;return er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={},o=Object.entries(e).map((function(t){var e=rr(t,2),r=e[0],n=e[1];return i.getKey(r,n)})),this.redis){t.next=4;break}return t.abrupt("return",n);case 4:return t.next=6,(r=this.redis).mget.apply(r,qe(o)).then((function(t){t.forEach((function(t){try{var e=JSON.parse(t||"{}");if(e.attributeName&&e.attributeValue&&e.assignments){var r="".concat(e.attributeName,"||").concat(e.attributeValue);n[r]=e}}catch(vr){}}))}));case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"getAssignments",value:(n=ar(er().mark((function t(e,r){return er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null);case 1:case"end":return t.stop()}}),t)}))),function(t,e){return n.apply(this,arguments)})},{key:"saveAssignments",value:(r=ar(er().mark((function t(e){var r;return er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.getKey(e.attributeName,e.attributeValue),this.redis){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.redis.set(r,JSON.stringify(e));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}]);var r,n,o}(fr)}]);
//# sourceMappingURL=application-5bcb5eca090e783bffee.js.map